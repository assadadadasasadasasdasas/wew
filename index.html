<!DOCTYPE html>
<html lang="tr" data-theme="dark">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CALEJON â€” Premium Åapka</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=DM+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
<style>
/* ====== THEME VARIABLES ====== */
:root, [data-theme="dark"] {
  --bg:#080706; --surface:#0f0e0c; --surface2:#161412;
  --border:rgba(193,163,120,0.12); --gold:#c1a378; --gold-light:#d4bc96;
  --gold-dim:rgba(193,163,120,0.4); --text:#e8e2d8;
  --text-dim:rgba(232,226,216,0.45); --text-mid:rgba(232,226,216,0.65);
  --accent:#8b3a3a; --success:#5a8a5a;
  --card-bg:#0f0e0c; --input-bg:#111; --input-border:#222;
  --shadow:rgba(0,0,0,0.4); --invert:0;
}
[data-theme="light"] {
  --bg:#f5f2ed; --surface:#ffffff; --surface2:#f0ebe3;
  --border:rgba(120,100,70,0.15); --gold:#8a6d3b; --gold-light:#a0813f;
  --gold-dim:rgba(120,100,70,0.4); --text:#1a1714;
  --text-dim:rgba(26,23,20,0.5); --text-mid:rgba(26,23,20,0.7);
  --accent:#a04040; --success:#3a7a3a;
  --card-bg:#fff; --input-bg:#f8f5f0; --input-border:#d5d0c8;
  --shadow:rgba(0,0,0,0.08); --invert:1;
}

* { margin:0; padding:0; box-sizing:border-box; }
html { scroll-behavior:smooth; }
body { background:var(--bg); color:var(--text); font-family:'DM Sans',sans-serif; overflow-x:hidden; transition:background .4s,color .4s; }
::selection { background:rgba(193,163,120,.25); }
::-webkit-scrollbar { width:5px; }
::-webkit-scrollbar-track { background:var(--bg); }
::-webkit-scrollbar-thumb { background:var(--gold-dim); border-radius:3px; }

@keyframes fadeUp{from{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
@keyframes float{0%,100%{transform:translateY(0) rotate(-1deg)}50%{transform:translateY(-12px) rotate(1deg)}}
@keyframes pulse{0%,100%{opacity:.3}50%{opacity:.8}}
@keyframes spin{to{transform:rotate(360deg)}}
@keyframes shimmer{0%{background-position:-200% 0}100%{background-position:200% 0}}

/* NAV */
nav {
  position:fixed;top:0;left:0;right:0;z-index:500;
  padding:16px 32px;display:flex;justify-content:space-between;align-items:center;
  background:linear-gradient(to bottom,var(--bg),transparent);
  backdrop-filter:blur(12px);
}
.logo {
  font-family:'Playfair Display',serif;font-size:24px;letter-spacing:10px;cursor:pointer;
  color:var(--gold);font-weight:400;
}
.nav-links { display:flex;gap:24px;align-items:center; }
.nav-links a {
  font-size:10px;letter-spacing:2px;color:var(--text-dim);text-decoration:none;
  text-transform:uppercase;cursor:pointer;transition:color .3s;
}
.nav-links a:hover { color:var(--gold); }
.theme-toggle {
  width:36px;height:36px;border-radius:50%;background:var(--surface);
  border:1px solid var(--border);color:var(--gold);font-size:16px;
  cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .3s;
}
.theme-toggle:hover { border-color:var(--gold); }
.hamburger { display:none;cursor:pointer;font-size:20px;color:var(--gold);background:none;border:none; }
.mobile-menu {
  display:none;position:fixed;top:0;left:0;right:0;bottom:0;
  background:var(--bg);z-index:499;flex-direction:column;
  align-items:center;justify-content:center;gap:20px;
}
.mobile-menu.open { display:flex; }
.mobile-menu a { font-size:15px;letter-spacing:3px;color:var(--text-mid);text-decoration:none;text-transform:uppercase;padding:10px;cursor:pointer; }

/* COMMON */
.section-label { font-size:10px;letter-spacing:5px;color:var(--gold-dim);text-transform:uppercase;margin-bottom:12px; }
.section-title { font-family:'Playfair Display',serif;font-weight:400;letter-spacing:2px;line-height:1.2;margin-bottom:16px; }
.section-desc { color:var(--text-dim);font-size:14px;font-weight:300;line-height:1.9;max-width:520px; }
.divider { width:50px;height:1px;background:linear-gradient(90deg,var(--gold),transparent);margin:12px 0; }

/* HERO */
.hero { height:100vh;display:flex;align-items:center;justify-content:center;text-align:center;position:relative; }
.hero-bg { position:absolute;inset:0;background:radial-gradient(ellipse at 30% 20%,rgba(193,163,120,.05) 0%,transparent 60%); }
.hero-hat { animation:float 5s ease-in-out infinite;margin-bottom:28px; }
.hero h1 {
  font-family:'Playfair Display',serif;font-size:clamp(48px,8vw,100px);
  font-weight:400;letter-spacing:14px;
  background:linear-gradient(135deg,var(--text),var(--gold),var(--text));
  background-size:200%;-webkit-background-clip:text;-webkit-text-fill-color:transparent;
  animation:shimmer 6s ease-in-out infinite;
}
.hero-sub { font-size:12px;letter-spacing:6px;color:var(--gold-dim);margin:16px 0 40px;text-transform:uppercase;font-weight:300; }
.btn-gold {
  padding:14px 40px;background:linear-gradient(135deg,var(--gold),#a08050);border:none;
  color:#080706;font-size:11px;letter-spacing:3px;font-weight:600;cursor:pointer;
  text-transform:uppercase;font-family:'DM Sans',sans-serif;transition:all .4s;
}
.btn-gold:hover { transform:translateY(-2px);box-shadow:0 10px 30px rgba(193,163,120,.2); }
.btn-outline {
  padding:14px 40px;background:transparent;border:1px solid var(--gold-dim);color:var(--gold);
  font-size:11px;letter-spacing:3px;cursor:pointer;text-transform:uppercase;
  font-family:'DM Sans',sans-serif;transition:all .4s;
}
.btn-outline:hover { border-color:var(--gold);background:rgba(193,163,120,.06); }

/* PRODUCTS */
.products { padding:100px 36px; }
.products-grid { display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:24px;max-width:1000px;margin:40px auto 0; }
.product-card {
  border:1px solid var(--border);background:var(--card-bg);overflow:hidden;cursor:pointer;transition:all .4s;position:relative;
}
.product-card:hover { border-color:rgba(193,163,120,.3);transform:translateY(-3px); }
.product-img { padding:40px 0;text-align:center;background:radial-gradient(circle,rgba(193,163,120,.03),transparent); }
.product-info { padding:20px 24px; }
.product-name { font-family:'Playfair Display',serif;font-size:18px;letter-spacing:2px;margin-bottom:4px; }
.product-desc { font-size:12px;color:var(--text-dim);font-weight:300;margin-bottom:10px; }
.product-price { font-size:17px;color:var(--gold);font-family:'Playfair Display',serif; }
.product-badge { position:absolute;top:12px;right:12px;font-size:9px;letter-spacing:2px;padding:3px 8px;background:var(--accent);color:#fff;text-transform:uppercase; }

/* TRY-ON + AI IMAGE GEN */
.tryon { padding:80px 36px;background:var(--surface);border-top:1px solid var(--border);border-bottom:1px solid var(--border); }
.tryon-wrap { max-width:680px;margin:0 auto; }
.tryon-hats { display:flex;gap:10px;margin:20px 0; }
.tryon-hat { flex:1;padding:12px;border:1px solid var(--input-border);background:var(--bg);cursor:pointer;text-align:center;border-radius:6px;transition:all .2s; }
.tryon-hat.active { border-color:var(--gold);background:rgba(193,163,120,.04); }
.tryon-hat p { font-size:11px;margin-top:4px; }
.upload-area { border:2px dashed var(--input-border);border-radius:8px;padding:50px 20px;text-align:center;cursor:pointer;background:var(--bg);transition:border-color .3s; }
.upload-area:hover { border-color:var(--gold-dim); }
#tryonFile,#aiFile { display:none; }
#tryonCanvas { width:100%;border-radius:8px;border:1px solid var(--input-border);cursor:grab;display:block; }
.tryon-controls { display:flex;align-items:center;justify-content:center;gap:12px;margin-top:12px; }
.sz-btn { width:32px;height:32px;border-radius:50%;background:var(--bg);border:1px solid var(--input-border);color:var(--text);font-size:16px;cursor:pointer; }
.sz-btn:hover { border-color:var(--gold-dim); }
.tryon-btns { display:flex;gap:10px;margin-top:14px; }
.tryon-btns button { flex:1;padding:12px;border-radius:6px;font-size:12px;cursor:pointer;font-family:'DM Sans',sans-serif; }
.tryon-dl { background:var(--gold);color:#080706;border:none;font-weight:600; }
.tryon-reset { background:transparent;color:var(--text-dim);border:1px solid var(--input-border); }
.share-row { display:flex;gap:6px;margin-top:10px;justify-content:center;flex-wrap:wrap; }
.share-btn { padding:6px 14px;border-radius:4px;border:1px solid var(--input-border);background:var(--bg);color:var(--text-dim);font-size:10px;cursor:pointer;letter-spacing:1px;transition:all .2s; }
.share-btn:hover { border-color:var(--gold-dim);color:var(--gold); }
.status-bar { text-align:center;font-size:11px;color:#555;letter-spacing:1px;margin-bottom:12px; }
.status-bar.ok { color:var(--success); }
.spin-sm { display:inline-block;width:18px;height:18px;border:2px solid var(--input-border);border-top-color:var(--gold);border-radius:50%;animation:spin .7s linear infinite; }
.editor { display:none; }
.editor.show { display:block; }

/* AI IMAGE GEN */
.ai-gen { padding:80px 36px; }
.ai-gen-wrap { max-width:600px;margin:0 auto; }
.ai-result { margin-top:20px;text-align:center;display:none; }
.ai-result img { max-width:100%;border-radius:8px;border:1px solid var(--border); }
.ai-result.show { display:block; }
.ai-loading { text-align:center;padding:40px;display:none; }
.ai-loading.show { display:block; }

/* AI CHAT */
.ai-section { padding:80px 36px; }
.chat-container { max-width:600px;margin:32px auto 0;border:1px solid var(--border);background:var(--card-bg);border-radius:8px;overflow:hidden; }
.chat-header { padding:14px 18px;border-bottom:1px solid var(--border);display:flex;align-items:center;gap:8px; }
.chat-dot { width:8px;height:8px;border-radius:50%;background:#555; }
.chat-header span { font-size:11px;letter-spacing:2px;color:var(--text-mid); }
.chat-messages { height:280px;overflow-y:auto;padding:16px;display:flex;flex-direction:column;gap:12px; }
.msg { max-width:82%;padding:10px 14px;border-radius:12px;font-size:13px;line-height:1.7;font-weight:300; }
.msg.bot { align-self:flex-start;background:var(--surface2);border-bottom-left-radius:4px;color:var(--text-mid); }
.msg.user { align-self:flex-end;background:rgba(193,163,120,.12);border-bottom-right-radius:4px;color:var(--text); }
.msg.typing .dots { display:inline-flex;gap:4px; }
.msg.typing .dots span { width:5px;height:5px;border-radius:50%;background:var(--gold-dim);animation:pulse 1.2s ease-in-out infinite; }
.msg.typing .dots span:nth-child(2){animation-delay:.2s}
.msg.typing .dots span:nth-child(3){animation-delay:.4s}
.chat-input-row { display:flex;border-top:1px solid var(--border); }
.chat-input-row input { flex:1;padding:14px 16px;background:transparent;border:none;color:var(--text);font-size:13px;font-family:'DM Sans',sans-serif;outline:none; }
.chat-input-row input::placeholder{color:var(--text-dim)}
.chat-input-row button { padding:14px 20px;background:transparent;border:none;border-left:1px solid var(--border);color:var(--gold);cursor:pointer;font-size:11px;letter-spacing:2px;font-family:'DM Sans',sans-serif; }

/* FORUM */
.forum { padding:80px 36px;background:var(--surface);border-top:1px solid var(--border); }
.forum-container { max-width:760px;margin:32px auto 0; }
.forum-post-btn { display:inline-block;padding:9px 24px;border:1px solid var(--gold-dim);color:var(--gold);font-size:10px;letter-spacing:2px;cursor:pointer;background:transparent;font-family:'DM Sans',sans-serif;margin-bottom:20px; }
.forum-new { display:none;padding:20px;border:1px solid var(--border);background:var(--bg);border-radius:8px;margin-bottom:20px; }
.forum-new.open{display:block}
.forum-new input,.forum-new textarea { width:100%;padding:10px 12px;background:var(--input-bg);border:1px solid var(--input-border);border-radius:4px;color:var(--text);font-size:13px;font-family:'DM Sans',sans-serif;margin-bottom:8px;outline:none;resize:vertical; }
.forum-new textarea{min-height:70px}
.forum-new button { padding:9px 20px;background:var(--gold);color:#080706;border:none;border-radius:4px;cursor:pointer;font-size:11px;font-family:'DM Sans',sans-serif;font-weight:600; }
.forum-thread { border:1px solid var(--border);background:var(--bg);border-radius:6px;margin-bottom:10px;overflow:hidden; }
.thread-header { padding:14px 16px;cursor:pointer;display:flex;justify-content:space-between;align-items:center; }
.thread-title { font-size:14px; }
.thread-meta span { font-size:10px;color:var(--text-dim);margin-left:12px; }
.thread-tag { font-size:8px;padding:2px 6px;border:1px solid var(--border);border-radius:3px;letter-spacing:1px;text-transform:uppercase;color:var(--gold-dim); }
.thread-body { display:none;padding:0 16px 14px; }
.thread-body.open{display:block}
.thread-body p { font-size:13px;color:var(--text-dim);line-height:1.8;font-weight:300;margin-bottom:10px; }
.reply-box { display:flex;gap:6px;margin-top:8px; }
.reply-box input { flex:1;padding:8px 10px;background:var(--input-bg);border:1px solid var(--input-border);border-radius:4px;color:var(--text);font-size:12px;font-family:'DM Sans',sans-serif;outline:none; }
.reply-box button { padding:8px 14px;background:var(--gold);color:#080706;border:none;border-radius:4px;cursor:pointer;font-size:10px;font-weight:600; }
.reply-item { padding:8px 12px;margin-top:6px;background:var(--surface2);border-radius:4px;border-left:2px solid var(--gold-dim); }
.reply-item .ra { font-size:10px;color:var(--gold);margin-bottom:2px; }
.reply-item .rt { font-size:12px;color:var(--text-dim);line-height:1.6; }

/* GAMES */
.games { padding:80px 36px; }
.games-grid { display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px;max-width:1000px;margin:32px auto 0; }
.game-card { border:1px solid var(--border);background:var(--card-bg);border-radius:8px;overflow:hidden;text-align:center; }
.game-card h3 { font-family:'Playfair Display',serif;font-size:18px;padding:16px;letter-spacing:2px; }
.game-card canvas { display:block;width:100%;background:#111;cursor:pointer; }
.game-controls { padding:12px;display:flex;gap:8px;justify-content:center;flex-wrap:wrap; }
.game-btn { padding:8px 16px;background:var(--gold);color:#080706;border:none;border-radius:4px;font-size:11px;cursor:pointer;font-weight:600;font-family:'DM Sans',sans-serif; }
.game-btn.sec { background:transparent;color:var(--text-dim);border:1px solid var(--input-border); }
.game-score { font-size:12px;color:var(--gold);letter-spacing:2px;padding:4px 12px; }

/* REVIEWS */
.reviews { padding:80px 36px;background:var(--surface);border-top:1px solid var(--border); }
.reviews-grid { display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:16px;max-width:900px;margin:32px auto 0; }
.review-card { padding:24px;border:1px solid var(--border);background:var(--card-bg); }
.review-stars { color:var(--gold);font-size:13px;margin-bottom:10px; }
.review-text { font-size:13px;color:var(--text-dim);line-height:1.8;font-weight:300;font-style:italic;margin-bottom:12px; }
.review-author { font-size:11px;color:var(--text-mid); }

/* NEWSLETTER */
.newsletter { padding:60px 36px;text-align:center;border-top:1px solid var(--border);background:var(--surface); }
.nl-form { display:flex;gap:0;max-width:400px;margin:24px auto 0;border:1px solid var(--border);overflow:hidden; }
.nl-form input { flex:1;padding:12px 16px;background:transparent;border:none;color:var(--text);font-size:13px;font-family:'DM Sans',sans-serif;outline:none; }
.nl-form button { padding:12px 24px;background:var(--gold);color:#080706;border:none;font-size:10px;letter-spacing:2px;cursor:pointer;font-weight:600;text-transform:uppercase; }

/* LEGAL */
.legal { padding:80px 36px; }
.legal-container { max-width:700px;margin:0 auto; }
.legal-tabs { display:flex;gap:0;margin:24px 0;border-bottom:1px solid var(--border);flex-wrap:wrap; }
.legal-tab { padding:10px 18px;font-size:11px;letter-spacing:1px;color:var(--text-dim);cursor:pointer;border:none;border-bottom:2px solid transparent;background:none;font-family:'DM Sans',sans-serif;text-transform:uppercase; }
.legal-tab.active { color:var(--gold);border-bottom-color:var(--gold); }
.legal-content { display:none; }
.legal-content.active{display:block}
.legal-content h3 { font-family:'Playfair Display',serif;font-size:16px;margin:24px 0 10px;color:var(--text); }
.legal-content p { font-size:13px;color:var(--text-dim);line-height:1.9;font-weight:300;margin-bottom:8px; }

/* FOOTER */
footer { padding:50px 36px 24px;border-top:1px solid var(--border); }
.footer-grid { display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:32px;max-width:900px;margin:0 auto 32px; }
.footer-col h4 { font-size:10px;letter-spacing:3px;color:var(--gold-dim);text-transform:uppercase;margin-bottom:12px; }
.footer-col a { display:block;font-size:12px;color:var(--text-dim);text-decoration:none;margin-bottom:8px;font-weight:300;cursor:pointer; }
.footer-col a:hover{color:var(--gold)}
.footer-bottom { text-align:center;padding-top:20px;border-top:1px solid var(--border);font-size:10px;color:var(--text-dim);letter-spacing:2px; }

@media(max-width:768px) {
  .nav-links{display:none} .hamburger{display:block}
  .products-grid,.games-grid{grid-template-columns:1fr}
  .footer-grid{grid-template-columns:1fr 1fr}
  .legal-tabs{flex-wrap:wrap}
}
</style>
</head>
<body>

<!-- NAV -->
<nav>
  <div class="logo" onclick="goTo('hero')">CALEJON</div>
  <div class="nav-links">
    <a onclick="goTo('products')">Koleksiyon</a>
    <a onclick="goTo('tryon')">Sanal Dene</a>
    <a onclick="goTo('aigen')">AI GÃ¶rsel</a>
    <a onclick="goTo('ai')">Asistan</a>
    <a onclick="goTo('games')">Oyunlar</a>
    <a onclick="goTo('forum')">Forum</a>
    <a onclick="goTo('legal')">Yasal</a>
    <button class="theme-toggle" onclick="toggleTheme()" id="themeBtn" title="Tema DeÄŸiÅŸtir">â˜€</button>
  </div>
  <div style="display:flex;gap:10px;align-items:center;">
    <button class="theme-toggle" onclick="toggleTheme()" id="themeBtn2" title="Tema">â˜€</button>
    <button class="hamburger" onclick="toggleMenu()">â˜°</button>
  </div>
</nav>
<div class="mobile-menu" id="mobMenu">
  <a onclick="goTo('products');toggleMenu()">Koleksiyon</a>
  <a onclick="goTo('tryon');toggleMenu()">Sanal Dene</a>
  <a onclick="goTo('aigen');toggleMenu()">AI GÃ¶rsel</a>
  <a onclick="goTo('ai');toggleMenu()">AI Asistan</a>
  <a onclick="goTo('games');toggleMenu()">Oyunlar</a>
  <a onclick="goTo('forum');toggleMenu()">Forum</a>
  <a onclick="goTo('legal');toggleMenu()">Yasal</a>
</div>

<!-- HERO -->
<section class="hero" id="hero">
  <div class="hero-bg"></div>
  <div style="position:relative;z-index:2;">
    <div class="hero-hat">
      <svg width="140" height="100" viewBox="0 0 180 130"><ellipse cx="90" cy="98" rx="78" ry="22" fill="rgba(193,163,120,.12)"/><ellipse cx="90" cy="94" rx="73" ry="20" fill="var(--surface)" stroke="rgba(193,163,120,.2)" stroke-width=".5"/><path d="M22,88 Q14,34 44,14 Q90,-12 136,14 Q166,34 158,88Z" fill="var(--surface)" stroke="rgba(193,163,120,.15)" stroke-width=".5"/><rect x="22" y="74" width="136" height="10" rx="2" fill="rgba(193,163,120,.15)"/></svg>
    </div>
    <h1>CALEJON</h1>
    <p class="hero-sub">Yapay Zeka ile ÅapkanÄ± KeÅŸfet</p>
    <div style="display:flex;gap:14px;justify-content:center;flex-wrap:wrap;">
      <button class="btn-gold" onclick="goTo('tryon')">Åapka Dene</button>
      <button class="btn-outline" onclick="goTo('aigen')">AI GÃ¶rsel Ãœret</button>
    </div>
  </div>
</section>

<!-- PRODUCTS -->
<section class="products" id="products">
  <div style="text-align:center;">
    <span class="section-label">KOLEKSÄ°YON 2026</span>
    <h2 class="section-title" style="font-size:clamp(28px,4vw,46px);">Essentials</h2>
  </div>
  <div class="products-grid" id="prodGrid"></div>
</section>

<!-- TRY-ON -->
<section class="tryon" id="tryon">
  <div class="tryon-wrap">
    <div style="text-align:center;">
      <span class="section-label">SANAL DENEME</span>
      <h2 class="section-title" style="font-size:clamp(24px,3vw,38px);">FotoÄŸrafÄ±nÄ± YÃ¼kle, ÅapkanÄ± Dene</h2>
    </div>
    <div class="status-bar" id="modelStatus">YÃ¼z tanÄ±ma yÃ¼kleniyor...</div>
    <p style="font-size:10px;letter-spacing:2px;color:var(--text-dim);margin-bottom:8px;">ÅAPKA SEÃ‡</p>
    <div class="tryon-hats" id="tryonHats"></div>
    <div id="uploadArea" class="upload-area" onclick="document.getElementById('tryonFile').click()">
      <p style="font-size:32px;margin-bottom:8px;">ğŸ“·</p>
      <p style="font-size:14px;color:var(--text-mid);">FotoÄŸrafÄ±nÄ± YÃ¼kle</p>
      <p style="font-size:11px;color:var(--text-dim);margin-top:4px;">AI yÃ¼zÃ¼nÃ¼ bulup ÅŸapkayÄ± otomatik yerleÅŸtirir</p>
    </div>
    <input type="file" id="tryonFile" accept="image/*">
    <div id="tryonLoading" style="text-align:center;padding:24px;display:none;"><div class="spin-sm"></div><p style="font-size:12px;color:var(--gold);margin-top:8px;">YÃ¼z algÄ±lanÄ±yor...</p></div>
    <div class="editor" id="tryonEditor">
      <p style="font-size:10px;letter-spacing:2px;color:var(--text-dim);margin-bottom:8px;">SÃœRÃœKLE Â· BOYUT AYARLA</p>
      <canvas id="tryonCanvas"></canvas>
      <div class="tryon-controls">
        <button class="sz-btn" onclick="chgSz(-0.1)">âˆ’</button>
        <span style="font-size:11px;color:var(--text-dim);">Boyut</span>
        <button class="sz-btn" onclick="chgSz(0.1)">+</button>
      </div>
      <div class="tryon-btns">
        <button class="tryon-dl" onclick="dlImg()">Ä°ndir</button>
        <button class="tryon-reset" onclick="rstImg()">Yeni FotoÄŸraf</button>
      </div>
      <div class="share-row">
        <button class="share-btn" onclick="shareTo('twitter')">ğ•</button>
        <button class="share-btn" onclick="shareTo('facebook')">Facebook</button>
        <button class="share-btn" onclick="shareTo('whatsapp')">WhatsApp</button>
        <button class="share-btn" onclick="shareTo('copy')">Link Kopyala</button>
      </div>
    </div>
  </div>
</section>

<!-- AI IMAGE GEN -->
<section class="ai-gen" id="aigen">
  <div class="ai-gen-wrap">
    <div style="text-align:center;">
      <span class="section-label">YAPAY ZEKA GÃ–RSEL ÃœRETÄ°CÄ°</span>
      <h2 class="section-title" style="font-size:clamp(24px,3vw,38px);">AI ile Åapka FotoÄŸrafÄ± OluÅŸtur</h2>
      <p class="section-desc" style="margin:0 auto 20px;">Yapay zeka sana Ã¶zel ÅŸapka konsepti Ã¼retiyor â€” tamamen Ã¼cretsiz, API anahtarÄ± gerekmez!</p>
    </div>
    <div style="margin-bottom:16px;">
      <p style="font-size:10px;letter-spacing:2px;color:var(--text-dim);margin-bottom:8px;">ÅAPKA STÄ°LÄ° SEÃ‡</p>
      <div style="display:flex;gap:8px;flex-wrap:wrap;" id="aiStyleBtns">
        <button class="share-btn active" onclick="setAIStyle(this,'siyah klasik ÅŸapka')" style="border-color:var(--gold);color:var(--gold);">Siyah Klasik</button>
        <button class="share-btn" onclick="setAIStyle(this,'beyaz minimalist ÅŸapka')">Beyaz Minimal</button>
        <button class="share-btn" onclick="setAIStyle(this,'kahverengi vintage deri ÅŸapka')">Kahve Vintage</button>
      </div>
    </div>
    <div style="margin-bottom:16px;">
      <p style="font-size:10px;letter-spacing:2px;color:var(--text-dim);margin-bottom:8px;">EK DETAYLAR (opsiyonel)</p>
      <input type="text" id="aiExtraPrompt" placeholder="Ã–rn: stÃ¼dyo Ä±ÅŸÄ±ÄŸÄ±, gÃ¼neÅŸli park, ÅŸehir sokaÄŸÄ±..." style="width:100%;padding:12px;background:var(--input-bg);border:1px solid var(--input-border);border-radius:6px;color:var(--text);font-size:13px;font-family:'DM Sans',sans-serif;outline:none;">
    </div>
    <div style="display:flex;gap:8px;">
      <select id="aiGender" style="padding:12px;background:var(--input-bg);border:1px solid var(--input-border);border-radius:6px;color:var(--text);font-size:12px;font-family:'DM Sans',sans-serif;outline:none;">
        <option value="erkek">Erkek Model</option>
        <option value="kadÄ±n">KadÄ±n Model</option>
      </select>
      <button class="btn-gold" onclick="generateAIImage()" style="flex:1;">âœ¨ AI GÃ¶rsel Ãœret</button>
    </div>
    <div class="ai-loading" id="aiLoading"><div class="spin-sm"></div><p style="font-size:12px;color:var(--gold);margin-top:10px;">AI gÃ¶rsel Ã¼retiyor... (10-20 sn)</p></div>
    <div class="ai-result" id="aiResult">
      <img id="aiResultImg" alt="AI Generated">
      <div style="margin-top:12px;display:flex;gap:8px;justify-content:center;">
        <button class="game-btn" onclick="generateAIImage()">ğŸ”„ Yeniden Ãœret</button>
        <button class="game-btn sec" onclick="dlAIImg()">Ä°ndir</button>
      </div>
    </div>
  </div>
</section>

<!-- AI CHAT -->
<section class="ai-section" id="ai">
  <div style="text-align:center;">
    <span class="section-label">YAPAY ZEKA STÄ°L DANIÅMANI</span>
    <h2 class="section-title" style="font-size:clamp(24px,3vw,38px);">Calejon AI Asistan</h2>
    <p class="section-desc" style="margin:0 auto;">Åapka, stil, beden â€” AI asistana her ÅŸeyi sor. Gemini API ile gerÃ§ek yapay zeka!</p>
  </div>
  <div class="chat-container">
    <div class="chat-header">
      <div class="chat-dot" id="chatDot"></div>
      <span id="chatHeaderText">CALEJON AI</span>
    </div>
    <div id="apiSetup" style="padding:18px;text-align:center;">
      <p style="font-size:12px;color:var(--text-dim);line-height:1.8;margin-bottom:12px;">GerÃ§ek AI chatbot iÃ§in <a href="https://aistudio.google.com/apikey" target="_blank" style="color:var(--gold);">Google Gemini API anahtarÄ± al</a> (Ã¼cretsiz)</p>
      <div style="display:flex;gap:6px;"><input type="password" id="apiKeyInput" placeholder="API anahtarÄ± yapÄ±ÅŸtÄ±r..." style="flex:1;padding:10px;background:var(--input-bg);border:1px solid var(--input-border);border-radius:4px;color:var(--text);font-size:12px;font-family:'DM Sans',sans-serif;outline:none;"><button onclick="connectAI()" style="padding:10px 16px;background:var(--gold);color:#080706;border:none;border-radius:4px;cursor:pointer;font-size:11px;font-weight:600;">BaÄŸla</button></div>
      <button onclick="skipAI()" style="margin-top:8px;background:none;border:none;color:#555;font-size:10px;cursor:pointer;text-decoration:underline;">API olmadan devam et</button>
    </div>
    <div id="chatArea" style="display:none;">
      <div class="chat-messages" id="chatMessages"><div class="msg bot">Merhaba! Ben Calejon AI stil danÄ±ÅŸmanÄ±nÄ±zÄ±m ğŸ© Ne sormak istersin?</div></div>
      <div class="chat-input-row"><input type="text" id="chatInput" placeholder="MesajÄ±nÄ±zÄ± yazÄ±n..." onkeydown="if(event.key==='Enter')sendChat()"><button onclick="sendChat()">GÃ–NDER</button></div>
    </div>
  </div>
</section>

<!-- GAMES -->
<section class="games" id="games">
  <div style="text-align:center;">
    <span class="section-label">EÄLENCE KÃ–ÅESÄ°</span>
    <h2 class="section-title" style="font-size:clamp(24px,3vw,38px);">Mini Oyunlar</h2>
    <p class="section-desc" style="margin:0 auto;">Åapka denerken biraz da eÄŸlen!</p>
  </div>
  <div class="games-grid">
    <!-- AIR HOCKEY -->
    <div class="game-card">
      <h3>ğŸ’ Masa Hokeyi</h3>
      <canvas id="hockeyCanvas" width="360" height="500"></canvas>
      <div class="game-score" id="hockeyScore">Sen: 0 â€” Rakip: 0</div>
      <div class="game-controls"><button class="game-btn" onclick="startHockey()">BaÅŸlat</button><button class="game-btn sec" onclick="resetHockey()">SÄ±fÄ±rla</button></div>
    </div>
    <!-- PLATFORMER -->
    <div class="game-card">
      <h3>ğŸ® Platform KoÅŸusu</h3>
      <canvas id="platformCanvas" width="360" height="400"></canvas>
      <div class="game-score" id="platformScore">Puan: 0</div>
      <div class="game-controls"><button class="game-btn" onclick="startPlatform()">BaÅŸlat</button><button class="game-btn sec" onclick="resetPlatform()">SÄ±fÄ±rla</button></div>
    </div>
    <!-- FOOTBALL -->
    <div class="game-card">
      <h3>âš½ PenaltÄ± AtÄ±ÅŸÄ±</h3>
      <canvas id="footballCanvas" width="360" height="400"></canvas>
      <div class="game-score" id="footballScore">Gol: 0 / 5 â€” KaÃ§an: 0</div>
      <div class="game-controls"><button class="game-btn" onclick="startFootball()">BaÅŸlat</button><button class="game-btn sec" onclick="resetFootball()">SÄ±fÄ±rla</button></div>
    </div>
  </div>
</section>

<!-- FORUM -->
<section class="forum" id="forum">
  <div style="text-align:center;"><span class="section-label">TOPLULUK</span><h2 class="section-title" style="font-size:clamp(24px,3vw,38px);">Forum</h2></div>
  <div class="forum-container">
    <button class="forum-post-btn" onclick="toggleForumNew()">+ Yeni Konu</button>
    <div class="forum-new" id="forumNew"><input type="text" id="fTitle" placeholder="BaÅŸlÄ±k..."><textarea id="fBody" placeholder="Mesaj..."></textarea><button onclick="postThread()">PaylaÅŸ</button></div>
    <div id="forumThreads"></div>
  </div>
</section>

<!-- REVIEWS -->
<section class="reviews" id="reviews">
  <div style="text-align:center;"><span class="section-label">YORUMLAR</span><h2 class="section-title" style="font-size:clamp(24px,3vw,38px);">Neler Diyorlar?</h2></div>
  <div class="reviews-grid">
    <div class="review-card"><div class="review-stars">â˜…â˜…â˜…â˜…â˜…</div><p class="review-text">"Sanal deneme harika, kalite mÃ¼kemmel."</p><p class="review-author">â€” Elif K.</p></div>
    <div class="review-card"><div class="review-stars">â˜…â˜…â˜…â˜…â˜…</div><p class="review-text">"Midnight Classic kumaÅŸÄ± Ã§ok yumuÅŸak. Paketleme ÅŸÄ±k."</p><p class="review-author">â€” Mert A.</p></div>
    <div class="review-card"><div class="review-stars">â˜…â˜…â˜…â˜…â˜†</div><p class="review-text">"AI asistan bana Terra Signature Ã¶nerdi, tam isabetli."</p><p class="review-author">â€” Selin D.</p></div>
  </div>
</section>

<!-- NEWSLETTER -->
<section class="newsletter"><span class="section-label">BÃœLTEN</span><h2 class="section-title" style="font-size:clamp(20px,3vw,32px);">Haberdar Ol</h2>
  <div class="nl-form"><input type="email" id="nlEmail" placeholder="E-posta..."><button onclick="subNL()">KAYIT</button></div>
  <p id="nlMsg" style="margin-top:10px;font-size:11px;color:var(--success);display:none;"></p>
</section>

<!-- LEGAL -->
<section class="legal" id="legal">
  <div class="legal-container">
    <div style="text-align:center;"><span class="section-label">YASAL</span><h2 class="section-title" style="font-size:clamp(24px,3vw,38px);">SÃ¶zleÅŸmeler</h2></div>
    <div class="legal-tabs">
      <button class="legal-tab active" onclick="showLegal(0,this)">KullanÄ±m</button>
      <button class="legal-tab" onclick="showLegal(1,this)">Gizlilik</button>
      <button class="legal-tab" onclick="showLegal(2,this)">Ä°ade</button>
      <button class="legal-tab" onclick="showLegal(3,this)">KVKK</button>
      <button class="legal-tab" onclick="showLegal(4,this)">Ã‡erez</button>
    </div>
    <div class="legal-content active" id="lt0"><h3>KullanÄ±m ÅartlarÄ±</h3><p>Ä°ÅŸbu ÅŸartlar Calejon web sitesi ve hizmetlerinin kullanÄ±mÄ±nÄ± dÃ¼zenler. Siteyi kullanarak ÅŸartlarÄ± kabul etmiÅŸ sayÄ±lÄ±rsÄ±nÄ±z. Site "olduÄŸu gibi" sunulur. Forum ve topluluklarda hakaret, spam ve yanÄ±ltÄ±cÄ± iÃ§erik yasaktÄ±r.</p><h3>Fikri MÃ¼lkiyet</h3><p>Sitedeki tÃ¼m iÃ§erikler Calejon'un mÃ¼lkiyetindedir. Ä°zinsiz kopyalama ve ticari kullanÄ±m yasaktÄ±r. AI tarafÄ±ndan Ã¼retilen gÃ¶rseller kiÅŸisel kullanÄ±m iÃ§indir.</p></div>
    <div class="legal-content" id="lt1"><h3>Gizlilik PolitikasÄ±</h3><p>FotoÄŸraflarÄ±nÄ±z sunucuya gÃ¶nderilmez, tarayÄ±cÄ±nÄ±zda iÅŸlenir. Forum ve hesap bilgileri (ad, e-posta) yalnÄ±zca hizmet sunumu iÃ§in kullanÄ±lÄ±r. Veriler Ã¼Ã§Ã¼ncÃ¼ taraflarla paylaÅŸÄ±lmaz. SSL ÅŸifreleme ile korunur.</p></div>
    <div class="legal-content" id="lt2"><h3>Ä°ade PolitikasÄ±</h3><p>14 gÃ¼n iÃ§inde koÅŸulsuz iade. ÃœrÃ¼n kullanÄ±lmamÄ±ÅŸ ve etiketli olmalÄ±. Limited edition yalnÄ±zca deÄŸiÅŸim. Ä°ade kargo mÃ¼ÅŸteriye ait. Ã–deme iadesi 5-10 iÅŸ gÃ¼nÃ¼.</p></div>
    <div class="legal-content" id="lt3"><h3>KVKK AydÄ±nlatma</h3><p>6698 sayÄ±lÄ± KVKK kapsamÄ±nda veri sorumlusu Calejon Tekstil A.Å.'dir. Kimlik, iletiÅŸim, iÅŸlem bilgileri iÅŸlenir. FotoÄŸraflar saklanmaz. HaklarÄ±nÄ±z: Ã¶ÄŸrenme, dÃ¼zeltme, silme, itiraz. BaÅŸvuru: kvkk@calejon.com</p></div>
    <div class="legal-content" id="lt4"><h3>Ã‡erez PolitikasÄ±</h3><p>Zorunlu, analiz ve tercih Ã§erezleri kullanÄ±lÄ±r. TarayÄ±cÄ± ayarlarÄ±ndan yÃ¶netebilirsiniz. BazÄ± Ã¶zellikler Ã§erez olmadan Ã§alÄ±ÅŸmayabilir.</p></div>
  </div>
</section>

<!-- FOOTER -->
<footer>
  <div class="footer-grid">
    <div class="footer-col"><h4>Marka</h4><a onclick="goTo('hero')">Ana Sayfa</a><a onclick="goTo('products')">Koleksiyon</a><a onclick="goTo('aigen')">AI GÃ¶rsel</a></div>
    <div class="footer-col"><h4>Destek</h4><a href="#">SSS</a><a href="#">Beden Rehberi</a><a href="mailto:destek@calejon.com">destek@calejon.com</a></div>
    <div class="footer-col"><h4>Yasal</h4><a onclick="goTo('legal')">KullanÄ±m ÅartlarÄ±</a><a onclick="goTo('legal')">Gizlilik</a><a onclick="goTo('legal')">KVKK</a></div>
    <div class="footer-col"><h4>Ä°letiÅŸim</h4><a href="mailto:info@calejon.com">info@calejon.com</a><a href="#">Ä°stanbul, TÃ¼rkiye</a></div>
  </div>
  <div class="footer-bottom">Â© 2026 CALEJON â€” TÃœM HAKLARI SAKLIDIR</div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@latest/vision_bundle.js" crossorigin="anonymous"></script>
<script>
// ====================== UTILS ======================
function goTo(id){document.getElementById(id).scrollIntoView({behavior:'smooth'});}
function toggleMenu(){document.getElementById('mobMenu').classList.toggle('open');}

// ====================== THEME ======================
function toggleTheme(){
  var t=document.documentElement.getAttribute('data-theme')==='dark'?'light':'dark';
  document.documentElement.setAttribute('data-theme',t);
  var icon=t==='dark'?'â˜€':'ğŸŒ™';
  document.getElementById('themeBtn').textContent=icon;
  document.getElementById('themeBtn2').textContent=icon;
}

// ====================== PRODUCTS ======================
var HATS=[
  {id:'black',name:'Midnight Classic',price:'â‚º890',desc:'Saf siyah, zamansÄ±z ÅŸÄ±klÄ±k',brim:'#222',crown:'#1a1a1a',band:'#444',badge:'YENÄ°'},
  {id:'white',name:'Arctic Essential',price:'â‚º890',desc:'Beyaz, minimalist zarafet',brim:'#ddd',crown:'#f0f0f0',band:'#bbb',badge:''},
  {id:'brown',name:'Terra Signature',price:'â‚º1.290',desc:'Limited edition, doÄŸal deri bant',brim:'#4a3028',crown:'#5a3a2a',band:'#7a5a42',badge:'LÄ°MÄ°TED'}
];
function renderProducts(){
  var g=document.getElementById('prodGrid');g.innerHTML='';
  HATS.forEach(function(h){
    g.innerHTML+='<div class="product-card" onclick="goTo(\'tryon\')">'+(h.badge?'<div class="product-badge">'+h.badge+'</div>':'')+'<div class="product-img"><svg width="130" height="84" viewBox="0 0 120 78"><ellipse cx="60" cy="65" rx="55" ry="13" fill="'+h.brim+'"/><path d="M20,62 Q14,25 35,12 Q60,-2 85,12 Q106,25 100,62Z" fill="'+h.crown+'"/><rect x="20" y="52" width="80" height="6" rx="1" fill="'+h.band+'"/></svg></div><div class="product-info"><p class="product-name">'+h.name+'</p><p class="product-desc">'+h.desc+'</p><span class="product-price">'+h.price+'</span></div></div>';
  });
}
renderProducts();

// ====================== TRY-ON ======================
var curHat='black',hScale=1,hX=150,hY=30,drag=false,oX=0,oY=0,uImg=null;
var cv=document.getElementById('tryonCanvas'),cx=cv.getContext('2d');
var fLM=null,mReady=false;

function renderTryonHats(){
  var c=document.getElementById('tryonHats');c.innerHTML='';
  HATS.forEach(function(h){
    c.innerHTML+='<div class="tryon-hat'+(curHat===h.id?' active':'')+'" onclick="pickHat(\''+h.id+'\',this)"><svg width="50" height="33" viewBox="0 0 120 78"><ellipse cx="60" cy="65" rx="55" ry="13" fill="'+h.brim+'"/><path d="M20,62 Q14,25 35,12 Q60,-2 85,12 Q106,25 100,62Z" fill="'+h.crown+'"/><rect x="20" y="52" width="80" height="6" rx="1" fill="'+h.band+'"/></svg><p>'+h.name.split(' ')[0]+'</p></div>';
  });
}
renderTryonHats();

async function initModel(){
  try{
    var v=window.vision;
    var r=await v.FilesetResolver.forVisionTasks("https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@latest/wasm");
    fLM=await v.FaceLandmarker.createFromOptions(r,{baseOptions:{modelAssetPath:"https://storage.googleapis.com/mediapipe-models/face_landmarker/face_landmarker/float16/1/face_landmarker.task",delegate:"GPU"},runningMode:"IMAGE",numFaces:1});
    mReady=true;var s=document.getElementById('modelStatus');s.textContent='âœ“ YÃ¼z tanÄ±ma hazÄ±r';s.className='status-bar ok';
  }catch(e){console.error(e);var s=document.getElementById('modelStatus');s.textContent='âš  Model yÃ¼klenemedi â€” manuel mod';s.style.color='var(--accent)';}
}
initModel();

function getHatCol(){return HATS.find(function(h){return h.id===curHat;})||HATS[0];}
function drwHat(){
  var w=140*hScale,h=95*hScale,c=getHatCol(),x=hX,y=hY;
  cx.save();cx.shadowColor='rgba(0,0,0,.4)';cx.shadowBlur=14;cx.shadowOffsetY=5;
  var by=y+h*.72;
  cx.beginPath();cx.ellipse(x+w/2,by,w*.65,h*.22,0,0,Math.PI*2);cx.fillStyle=c.brim;cx.fill();
  cx.beginPath();cx.moveTo(x+w*.14,by-2);cx.quadraticCurveTo(x+w*.08,y+h*.15,x+w*.27,y+h*.05);cx.quadraticCurveTo(x+w*.5,y-h*.06,x+w*.73,y+h*.05);cx.quadraticCurveTo(x+w*.92,y+h*.15,x+w*.86,by-2);cx.closePath();cx.fillStyle=c.crown;cx.fill();
  cx.fillStyle=c.band;cx.fillRect(x+w*.14,by-h*.14,w*.72,h*.08);cx.restore();
}
function redraw(){if(!uImg)return;cx.clearRect(0,0,cv.width,cv.height);cx.drawImage(uImg,0,0,cv.width,cv.height);drwHat();}
function detect(img){
  if(!fLM||!mReady){hX=cv.width/2-70;hY=30;hScale=1;return;}
  try{var res=fLM.detect(img);if(!res.faceLandmarks||!res.faceLandmarks.length){alert('YÃ¼z bulunamadÄ±!');hX=cv.width/2-70;hY=30;hScale=1;return;}
  var lm=res.faceLandmarks[0],tX=lm[10].x*cv.width,tY=lm[10].y*cv.height,cY=lm[152].y*cv.height,fW=(lm[454].x-lm[234].x)*cv.width;
  var tw=fW*1.3;hScale=tw/140;var aw=140*hScale,ah=95*hScale;hX=tX-aw/2;hY=tY-ah*.55;
  }catch(e){hX=cv.width/2-70;hY=30;hScale=1;}
}
function loadF(f){var rd=new FileReader();rd.onload=function(ev){document.getElementById('uploadArea').style.display='none';document.getElementById('tryonLoading').style.display='block';var im=new Image();im.onload=function(){uImg=im;var mw=Math.min(500,window.innerWidth-80),sc=mw/im.width;cv.width=mw;cv.height=im.height*sc;detect(im);document.getElementById('tryonLoading').style.display='none';document.getElementById('tryonEditor').className='editor show';redraw();};im.src=ev.target.result;};rd.readAsDataURL(f);}
document.getElementById('tryonFile').addEventListener('change',function(e){if(e.target.files[0])loadF(e.target.files[0]);});
var ua=document.getElementById('uploadArea');
ua.addEventListener('dragover',function(e){e.preventDefault();});
ua.addEventListener('drop',function(e){e.preventDefault();if(e.dataTransfer.files[0])loadF(e.dataTransfer.files[0]);});
function gp(e){var r=cv.getBoundingClientRect();var px=e.touches?e.touches[0].clientX:e.clientX;var py=e.touches?e.touches[0].clientY:e.clientY;return{x:(px-r.left)*(cv.width/r.width),y:(py-r.top)*(cv.height/r.height)};}
cv.addEventListener('mousedown',function(e){e.preventDefault();var p=gp(e),w=140*hScale,h=95*hScale;if(p.x>=hX&&p.x<=hX+w&&p.y>=hY&&p.y<=hY+h){drag=true;oX=p.x-hX;oY=p.y-hY;}});
cv.addEventListener('mousemove',function(e){if(!drag)return;var p=gp(e);hX=p.x-oX;hY=p.y-oY;redraw();});
cv.addEventListener('mouseup',function(){drag=false;});
cv.addEventListener('mouseleave',function(){drag=false;});
cv.addEventListener('touchstart',function(e){e.preventDefault();var p=gp(e),w=140*hScale,h=95*hScale;if(p.x>=hX&&p.x<=hX+w&&p.y>=hY&&p.y<=hY+h){drag=true;oX=p.x-hX;oY=p.y-hY;}},{passive:false});
cv.addEventListener('touchmove',function(e){if(!drag)return;e.preventDefault();var p=gp(e);hX=p.x-oX;hY=p.y-oY;redraw();},{passive:false});
cv.addEventListener('touchend',function(){drag=false;});
function pickHat(id){curHat=id;renderTryonHats();if(uImg)redraw();}
function chgSz(d){hScale=Math.max(.3,Math.min(2.5,hScale+d));if(uImg)redraw();}
function dlImg(){var a=document.createElement('a');a.download='calejon-sapka.png';a.href=cv.toDataURL();a.click();}
function rstImg(){uImg=null;document.getElementById('uploadArea').style.display='block';document.getElementById('tryonEditor').className='editor';document.getElementById('tryonFile').value='';}
function shareTo(p){var u=encodeURIComponent(location.href),t=encodeURIComponent("Calejon'da AI ile ÅŸapka denedim! ğŸ©");if(p==='copy'){navigator.clipboard.writeText(location.href);alert('Link kopyalandÄ±!');}else{var m={twitter:'https://twitter.com/intent/tweet?text='+t+'&url='+u,facebook:'https://www.facebook.com/sharer/sharer.php?u='+u,whatsapp:'https://wa.me/?text='+t+'%20'+u};window.open(m[p],'_blank','width=600,height=400');}}

// ====================== AI IMAGE GEN (Pollinations.ai - FREE) ======================
var aiHatStyle='siyah klasik ÅŸapka';
function setAIStyle(btn,style){aiHatStyle=style;document.querySelectorAll('#aiStyleBtns .share-btn').forEach(function(b){b.style.borderColor='var(--input-border)';b.style.color='var(--text-dim)';});btn.style.borderColor='var(--gold)';btn.style.color='var(--gold)';}
function generateAIImage(){
  var gender=document.getElementById('aiGender').value;
  var extra=document.getElementById('aiExtraPrompt').value.trim();
  var prompt='fashion photography, '+gender+' model wearing a stylish '+aiHatStyle+', premium hat brand Calejon, elegant pose, professional studio lighting, high end fashion editorial, 8k quality';
  if(extra) prompt+=', '+extra;
  prompt+=', photorealistic, detailed face, sharp focus';
  document.getElementById('aiLoading').className='ai-loading show';
  document.getElementById('aiResult').className='ai-result';
  var url='https://image.pollinations.ai/prompt/'+encodeURIComponent(prompt)+'?width=768&height=1024&seed='+Math.floor(Math.random()*999999)+'&nologo=true&model=flux';
  var img=document.getElementById('aiResultImg');
  img.onload=function(){document.getElementById('aiLoading').className='ai-loading';document.getElementById('aiResult').className='ai-result show';};
  img.onerror=function(){document.getElementById('aiLoading').className='ai-loading';alert('GÃ¶rsel Ã¼retilemedi, tekrar deneyin.');};
  img.src=url;
}
function dlAIImg(){var img=document.getElementById('aiResultImg');var a=document.createElement('a');a.href=img.src;a.download='calejon-ai.png';a.target='_blank';a.click();}

// ====================== AI CHATBOT (Gemini) ======================
var geminiKey=null,aiMode='none',chatHist=[];
var SYS="Sen Calejon ÅŸapka markasÄ±nÄ±n AI stil danÄ±ÅŸmanÄ±sÄ±n. TÃ¼rkÃ§e, samimi, kÄ±sa yanÄ±tla (2-3 cÃ¼mle). ÃœrÃ¼nler: Midnight Classic (siyah â‚º890), Arctic Essential (beyaz â‚º890), Terra Signature (kahve â‚º1290 limited). %100 organik pamuk. Bedenler: S(54-55) M(56-57) L(58-59) XL(60-61). Kargo 1-3 gÃ¼n, 500â‚º+ Ã¼cretsiz. 14 gÃ¼n iade. Kampanya: CALEJON10 ile %10.";
var KB={beden:"S(54-55cm) M(56-57cm) L(58-59cm) XL(60-61cm). KaÅŸlarÄ±n 1cm Ã¼stÃ¼nden Ã¶lÃ§.",fiyat:"Siyah/Beyaz â‚º890, Terra â‚º1.290. KDV dahil.",kargo:"1-3 iÅŸ gÃ¼nÃ¼. 500â‚º+ Ã¼cretsiz.",iade:"14 gÃ¼n koÅŸulsuz. Limited'da sadece deÄŸiÅŸim.",stil:"Yuvarlak yÃ¼zâ†’yÃ¼ksek kubbe. Uzun yÃ¼zâ†’geniÅŸ kenar.",merhaba:"Merhaba! Beden, fiyat, stil â€” ne sorarsan! ğŸ©",selam:"Selam! HoÅŸ geldin!",kombinasyon:"Siyah: deri ceket+beyaz tiÅŸÃ¶rt. Beyaz: yazlÄ±k. Kahve: toprak tonlarÄ±.",kampanya:"CALEJON10 kodu ile %10 indirim! 2 al 3. %50!"};
function basicAns(m){m=m.toLowerCase();for(var k in KB)if(m.indexOf(k)!==-1)return KB[k];if(m.indexOf('fiyat')!==-1||m.indexOf('kaÃ§')!==-1)return KB.fiyat;if(m.indexOf('kargo')!==-1||m.indexOf('teslimat')!==-1)return KB.kargo;if(m.indexOf('iade')!==-1)return KB.iade;if(m.indexOf('Ã¶lÃ§Ã¼')!==-1||m.indexOf('boyut')!==-1)return KB.beden;return"destek@calejon.com'a yazabilirsin veya beden/fiyat/kargo sor! ğŸ©";}
function connectAI(){var k=document.getElementById('apiKeyInput').value.trim();if(!k)return;geminiKey=k;aiMode='gemini';document.getElementById('apiSetup').style.display='none';document.getElementById('chatArea').style.display='block';document.getElementById('chatDot').style.background='var(--success)';document.getElementById('chatHeaderText').textContent='CALEJON AI â€” Gemini âœ“';callGemini('Merhaba, kÄ±saca tanÄ±t kendini.').then(function(r){if(r)addBot(r);}).catch(function(){addBot('âš  BaÄŸlantÄ± hatasÄ±.');aiMode='basic';});}
function skipAI(){aiMode='basic';document.getElementById('apiSetup').style.display='none';document.getElementById('chatArea').style.display='block';document.getElementById('chatDot').style.background='#a86a3a';document.getElementById('chatHeaderText').textContent='CALEJON AI â€” Basit mod';}
async function callGemini(msg){chatHist.push({role:'user',parts:[{text:msg}]});var c=[{role:'user',parts:[{text:SYS}]},{role:'model',parts:[{text:'AnladÄ±m! Calejon AI hazÄ±rÄ±m ğŸ©'}]}].concat(chatHist);var r=await fetch('https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key='+geminiKey,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({contents:c,generationConfig:{temperature:.7,maxOutputTokens:200}})});if(!r.ok)throw new Error(r.status);var d=await r.json();var t=d.candidates[0].content.parts[0].text;chatHist.push({role:'model',parts:[{text:t}]});if(chatHist.length>20)chatHist=chatHist.slice(-14);return t;}
function addBot(t){var b=document.getElementById('chatMessages');var m=document.createElement('div');m.className='msg bot';m.textContent=t;b.appendChild(m);b.scrollTop=b.scrollHeight;}
function sendChat(){var inp=document.getElementById('chatInput'),msg=inp.value.trim();if(!msg)return;inp.value='';var b=document.getElementById('chatMessages');var u=document.createElement('div');u.className='msg user';u.textContent=msg;b.appendChild(u);b.scrollTop=b.scrollHeight;var tp=document.createElement('div');tp.className='msg bot typing';tp.innerHTML='<div class="dots"><span></span><span></span><span></span></div>';b.appendChild(tp);b.scrollTop=b.scrollHeight;if(aiMode==='gemini'){callGemini(msg).then(function(r){b.removeChild(tp);addBot(r);}).catch(function(){b.removeChild(tp);addBot(basicAns(msg));});}else{setTimeout(function(){b.removeChild(tp);addBot(basicAns(msg));},400+Math.random()*300);}}

// ====================== FORUM ======================
var threads=[{title:'Midnight Classic kombin Ã¶nerileri',author:'AhmetS',body:'Siyah ÅŸapkamÄ± nasÄ±l kombine edeyim?',replies:[{a:'ZeynepK',t:'Deri ceket + beyaz tiÅŸÃ¶rt harika!'},{a:'CanD',t:'Oversize hoodie ile de Ã§ok iyi.'}]},{title:'57cm S mi M mi?',author:'MelisBT',body:'Kafam 57cm, hangisi?',replies:[{a:'CalejonDestek',t:'57cm = M beden. Rahat istersen M, sÄ±kÄ± fit istersen S.'}]},{title:'Terra Signature stokta kaÃ§ tane?',author:'BurakE',body:'KaÃ§Ä±rmak istemiyorum.',replies:[]}];
function renderThreads(){var c=document.getElementById('forumThreads');c.innerHTML='';threads.forEach(function(t,i){var rh='';t.replies.forEach(function(r){rh+='<div class="reply-item"><div class="ra">'+r.a+'</div><div class="rt">'+r.t+'</div></div>';});c.innerHTML+='<div class="forum-thread"><div class="thread-header" onclick="togT('+i+')"><span class="thread-title">'+t.title+'</span><span class="thread-meta"><span>'+t.author+'</span><span>'+t.replies.length+' yanÄ±t</span></span></div><div class="thread-body" id="tb'+i+'"><p>'+t.body+'</p>'+rh+'<div class="reply-box"><input id="rp'+i+'" placeholder="YanÄ±t..."><button onclick="addRp('+i+')">YanÄ±tla</button></div></div></div>';});}
renderThreads();
function togT(i){document.getElementById('tb'+i).classList.toggle('open');}
function addRp(i){var inp=document.getElementById('rp'+i),t=inp.value.trim();if(!t)return;threads[i].replies.push({a:'Sen',t:t});renderThreads();document.getElementById('tb'+i).classList.add('open');}
function toggleForumNew(){document.getElementById('forumNew').classList.toggle('open');}
function postThread(){var t=document.getElementById('fTitle').value.trim(),b=document.getElementById('fBody').value.trim();if(!t||!b)return;threads.unshift({title:t,author:'Sen',body:b,replies:[]});document.getElementById('fTitle').value='';document.getElementById('fBody').value='';toggleForumNew();renderThreads();}
function subNL(){var e=document.getElementById('nlEmail').value.trim();if(!e||e.indexOf('@')===-1)return;document.getElementById('nlMsg').textContent='âœ“ KayÄ±t yapÄ±ldÄ±! Ä°ndirim kodu: CALEJON10';document.getElementById('nlMsg').style.display='block';document.getElementById('nlEmail').value='';}
function showLegal(i,el){for(var n=0;n<5;n++)document.getElementById('lt'+n).classList.remove('active');document.querySelectorAll('.legal-tab').forEach(function(e){e.classList.remove('active');});document.getElementById('lt'+i).classList.add('active');el.classList.add('active');}

// ====================== GAME 1: AIR HOCKEY ======================
var hkCv=document.getElementById('hockeyCanvas'),hkCx=hkCv.getContext('2d');
var hkW=360,hkH=500,hkBall,hkP,hkAI,hkScore,hkRunning=false,hkAnim;
function rstHockeyState(){hkBall={x:180,y:250,vx:3,vy:3,r:10};hkP={x:180,y:440,r:24};hkAI={x:180,y:60,r:24};hkScore={p:0,ai:0};}
function drawHockey(){
  hkCx.fillStyle='#1a2a1a';hkCx.fillRect(0,0,hkW,hkH);
  hkCx.strokeStyle='rgba(193,163,120,.2)';hkCx.lineWidth=2;hkCx.beginPath();hkCx.moveTo(0,hkH/2);hkCx.lineTo(hkW,hkH/2);hkCx.stroke();
  hkCx.beginPath();hkCx.arc(hkW/2,hkH/2,50,0,Math.PI*2);hkCx.stroke();
  // Goals
  hkCx.fillStyle='rgba(193,163,120,.15)';hkCx.fillRect(120,0,120,6);hkCx.fillRect(120,hkH-6,120,6);
  // Ball
  hkCx.beginPath();hkCx.arc(hkBall.x,hkBall.y,hkBall.r,0,Math.PI*2);hkCx.fillStyle='#e8e2d8';hkCx.fill();
  // Player
  hkCx.beginPath();hkCx.arc(hkP.x,hkP.y,hkP.r,0,Math.PI*2);hkCx.fillStyle='#c1a378';hkCx.fill();
  // AI
  hkCx.beginPath();hkCx.arc(hkAI.x,hkAI.y,hkAI.r,0,Math.PI*2);hkCx.fillStyle='#8b3a3a';hkCx.fill();
}
function updateHockey(){
  hkBall.x+=hkBall.vx;hkBall.y+=hkBall.vy;
  if(hkBall.x<hkBall.r||hkBall.x>hkW-hkBall.r)hkBall.vx*=-1;
  // Goal check
  if(hkBall.y<0){if(hkBall.x>120&&hkBall.x<240){hkScore.p++;hkBall.x=180;hkBall.y=250;hkBall.vx=3*(Math.random()>.5?1:-1);hkBall.vy=3;}else hkBall.vy*=-1;}
  if(hkBall.y>hkH){if(hkBall.x>120&&hkBall.x<240){hkScore.ai++;hkBall.x=180;hkBall.y=250;hkBall.vx=3*(Math.random()>.5?1:-1);hkBall.vy=-3;}else hkBall.vy*=-1;}
  // Paddle collision
  [hkP,hkAI].forEach(function(p){var dx=hkBall.x-p.x,dy=hkBall.y-p.y,d=Math.sqrt(dx*dx+dy*dy);if(d<p.r+hkBall.r){var a=Math.atan2(dy,dx);var sp=Math.sqrt(hkBall.vx*hkBall.vx+hkBall.vy*hkBall.vy)*1.02;hkBall.vx=Math.cos(a)*sp;hkBall.vy=Math.sin(a)*sp;hkBall.x=p.x+Math.cos(a)*(p.r+hkBall.r+1);hkBall.y=p.y+Math.sin(a)*(p.r+hkBall.r+1);}});
  // AI movement
  var diff=hkBall.x-hkAI.x;hkAI.x+=diff*.04;hkAI.x=Math.max(hkAI.r,Math.min(hkW-hkAI.r,hkAI.x));
  hkAI.y=Math.max(hkAI.r,Math.min(hkH/2-20,hkAI.y));
  // Speed cap
  var ms=7;hkBall.vx=Math.max(-ms,Math.min(ms,hkBall.vx));hkBall.vy=Math.max(-ms,Math.min(ms,hkBall.vy));
  document.getElementById('hockeyScore').textContent='Sen: '+hkScore.p+' â€” Rakip: '+hkScore.ai;
}
function hockeyLoop(){if(!hkRunning)return;updateHockey();drawHockey();hkAnim=requestAnimationFrame(hockeyLoop);}
function startHockey(){if(hkRunning)return;rstHockeyState();hkRunning=true;hockeyLoop();}
function resetHockey(){hkRunning=false;cancelAnimationFrame(hkAnim);rstHockeyState();drawHockey();document.getElementById('hockeyScore').textContent='Sen: 0 â€” Rakip: 0';}
hkCv.addEventListener('mousemove',function(e){var r=hkCv.getBoundingClientRect();hkP.x=(e.clientX-r.left)*(hkW/r.width);hkP.y=Math.max(hkH/2+30,Math.min(hkH-hkP.r,(e.clientY-r.top)*(hkH/r.height)));});
hkCv.addEventListener('touchmove',function(e){e.preventDefault();var r=hkCv.getBoundingClientRect();hkP.x=(e.touches[0].clientX-r.left)*(hkW/r.width);hkP.y=Math.max(hkH/2+30,Math.min(hkH-hkP.r,(e.touches[0].clientY-r.top)*(hkH/r.height)));},{passive:false});
rstHockeyState();drawHockey();

// ====================== GAME 2: PLATFORMER ======================
var pfCv=document.getElementById('platformCanvas'),pfCx=pfCv.getContext('2d');
var pfW=360,pfH=400,pfPlayer,pfPlats,pfCoins,pfPScore,pfRunning2=false,pfAnim2,pfKeys={},pfGrav=.5,pfFrame=0;
function rstPlatform(){
  pfPlayer={x:170,y:340,w:20,h:24,vy:0,onGround:false};pfPScore=0;pfFrame=0;
  pfPlats=[{x:0,y:380,w:360,h:20},{x:60,y:310,w:80,h:12},{x:200,y:260,w:90,h:12},{x:30,y:200,w:70,h:12},{x:160,y:150,w:100,h:12},{x:260,y:100,w:80,h:12},{x:60,y:60,w:90,h:12}];
  pfCoins=[];pfPlats.forEach(function(p,i){if(i>0)pfCoins.push({x:p.x+p.w/2-6,y:p.y-20,w:12,h:12,got:false});});
}
function drawPlatform(){
  pfCx.fillStyle='#0a0a14';pfCx.fillRect(0,0,pfW,pfH);
  pfPlats.forEach(function(p){pfCx.fillStyle='#2a2520';pfCx.fillRect(p.x,p.y,p.w,p.h);pfCx.fillStyle='rgba(193,163,120,.3)';pfCx.fillRect(p.x,p.y,p.w,2);});
  pfCoins.forEach(function(c){if(!c.got){pfCx.fillStyle='#c1a378';pfCx.beginPath();pfCx.arc(c.x+6,c.y+6,6,0,Math.PI*2);pfCx.fill();}});
  // Player (hat-wearing character)
  pfCx.fillStyle='#c1a378';pfCx.fillRect(pfPlayer.x,pfPlayer.y,pfPlayer.w,pfPlayer.h);
  // tiny hat on player
  pfCx.fillStyle='#1a1a1a';pfCx.fillRect(pfPlayer.x-3,pfPlayer.y-6,pfPlayer.w+6,5);pfCx.fillRect(pfPlayer.x+2,pfPlayer.y-12,pfPlayer.w-4,8);
}
function updatePlatform(){
  pfFrame++;
  if(pfKeys['ArrowLeft']||pfKeys['a'])pfPlayer.x-=4;
  if(pfKeys['ArrowRight']||pfKeys['d'])pfPlayer.x+=4;
  if((pfKeys['ArrowUp']||pfKeys['w']||pfKeys[' '])&&pfPlayer.onGround){pfPlayer.vy=-10;pfPlayer.onGround=false;}
  pfPlayer.vy+=pfGrav;pfPlayer.y+=pfPlayer.vy;pfPlayer.onGround=false;
  pfPlats.forEach(function(p){if(pfPlayer.vy>=0&&pfPlayer.x+pfPlayer.w>p.x&&pfPlayer.x<p.x+p.w&&pfPlayer.y+pfPlayer.h>=p.y&&pfPlayer.y+pfPlayer.h<=p.y+p.h+10){pfPlayer.y=p.y-pfPlayer.h;pfPlayer.vy=0;pfPlayer.onGround=true;}});
  pfCoins.forEach(function(c){if(!c.got&&pfPlayer.x+pfPlayer.w>c.x&&pfPlayer.x<c.x+c.w&&pfPlayer.y+pfPlayer.h>c.y&&pfPlayer.y<c.y+c.h){c.got=true;pfPScore+=10;}});
  if(pfPlayer.x<0)pfPlayer.x=0;if(pfPlayer.x>pfW-pfPlayer.w)pfPlayer.x=pfW-pfPlayer.w;
  if(pfPlayer.y>pfH){rstPlatform();}
  document.getElementById('platformScore').textContent='Puan: '+pfPScore;
}
function platformLoop(){if(!pfRunning2)return;updatePlatform();drawPlatform();pfAnim2=requestAnimationFrame(platformLoop);}
function startPlatform(){if(pfRunning2)return;rstPlatform();pfRunning2=true;platformLoop();}
function resetPlatform(){pfRunning2=false;cancelAnimationFrame(pfAnim2);rstPlatform();drawPlatform();document.getElementById('platformScore').textContent='Puan: 0';}
document.addEventListener('keydown',function(e){pfKeys[e.key]=true;});
document.addEventListener('keyup',function(e){pfKeys[e.key]=false;});
rstPlatform();drawPlatform();

// ====================== GAME 3: PENALTY SHOOTOUT ======================
var fbCv=document.getElementById('footballCanvas'),fbCx=fbCv.getContext('2d');
var fbW=360,fbH=400,fbBall,fbGK,fbState,fbGoals,fbMisses,fbShots,fbAnim3;
function rstFootball(){fbBall={x:180,y:340,r:10,vx:0,vy:0,shot:false};fbGK={x:155,y:120,w:50,h:40,tx:155};fbState='aim';fbGoals=0;fbMisses=0;fbShots=0;}
function drawFootball(){
  // Pitch
  fbCx.fillStyle='#1a3a1a';fbCx.fillRect(0,0,fbW,fbH);
  // Goal posts
  fbCx.fillStyle='#eee';fbCx.fillRect(80,80,8,80);fbCx.fillRect(272,80,8,80);fbCx.fillRect(80,80,200,6);
  // Net
  fbCx.fillStyle='rgba(255,255,255,.05)';fbCx.fillRect(88,86,184,74);
  // Goal line
  fbCx.strokeStyle='rgba(255,255,255,.3)';fbCx.lineWidth=2;fbCx.beginPath();fbCx.moveTo(88,160);fbCx.lineTo(272,160);fbCx.stroke();
  // GK
  fbCx.fillStyle='#c1a378';fbCx.fillRect(fbGK.x,fbGK.y,fbGK.w,fbGK.h);
  // ball hat detail
  fbCx.fillStyle='#222';fbCx.fillRect(fbGK.x+5,fbGK.y-5,fbGK.w-10,8);
  // Ball
  fbCx.beginPath();fbCx.arc(fbBall.x,fbBall.y,fbBall.r,0,Math.PI*2);fbCx.fillStyle='#fff';fbCx.fill();fbCx.strokeStyle='#333';fbCx.lineWidth=1;fbCx.stroke();
  // Aim line
  if(fbState==='aim'){fbCx.strokeStyle='rgba(193,163,120,.3)';fbCx.setLineDash([4,4]);fbCx.beginPath();fbCx.moveTo(fbBall.x,fbBall.y);fbCx.lineTo(fbBall.x,90);fbCx.stroke();fbCx.setLineDash([]);}
  // Status
  fbCx.fillStyle='rgba(255,255,255,.5)';fbCx.font='14px DM Sans';fbCx.textAlign='center';
  if(fbState==='goal')fbCx.fillText('GOL! ğŸ‰',180,220);
  if(fbState==='miss')fbCx.fillText('KaÃ§tÄ±!',180,220);
  if(fbState==='saved')fbCx.fillText('KurtardÄ±!',180,220);
  if(fbShots>=5&&fbState!=='shooting'){fbCx.fillStyle='var(--gold)';fbCx.font='18px Playfair Display';fbCx.fillText('SonuÃ§: '+fbGoals+'/5 Gol!',180,240);}
}
function updateFootball(){
  if(fbState==='shooting'){
    fbBall.x+=fbBall.vx;fbBall.y+=fbBall.vy;
    // GK move
    fbGK.x+=(fbGK.tx-fbGK.x)*.12;
    // Check goal
    if(fbBall.y<=160){
      if(fbBall.x>88&&fbBall.x<272){
        if(fbBall.x>fbGK.x&&fbBall.x<fbGK.x+fbGK.w&&fbBall.y<fbGK.y+fbGK.h){fbState='saved';fbMisses++;}
        else{fbState='goal';fbGoals++;}
      }else{fbState='miss';fbMisses++;}
      fbShots++;
      document.getElementById('footballScore').textContent='Gol: '+fbGoals+' / '+fbShots+' â€” KaÃ§an: '+fbMisses;
      setTimeout(function(){if(fbShots<5){fbBall.x=180;fbBall.y=340;fbBall.vx=0;fbBall.vy=0;fbBall.shot=false;fbState='aim';fbGK.x=155;fbGK.tx=155;}},1200);
    }
  }
}
function fbLoop(){updateFootball();drawFootball();fbAnim3=requestAnimationFrame(fbLoop);}
fbCv.addEventListener('click',function(e){
  if(fbState!=='aim'||fbShots>=5)return;
  var r=fbCv.getBoundingClientRect();
  var tx=(e.clientX-r.left)*(fbW/r.width);
  var ty=(e.clientY-r.top)*(fbH/r.height);
  var dx=tx-fbBall.x,dy=ty-fbBall.y;
  var sp=12,a=Math.atan2(-Math.abs(dy),dx);
  fbBall.vx=Math.cos(a)*sp*.4+(tx-180)*.03;
  fbBall.vy=-sp;
  fbState='shooting';
  // GK guess
  fbGK.tx=80+Math.random()*200;
});
function startFootball(){cancelAnimationFrame(fbAnim3);rstFootball();fbLoop();}
function resetFootball(){cancelAnimationFrame(fbAnim3);rstFootball();drawFootball();document.getElementById('footballScore').textContent='Gol: 0 / 5 â€” KaÃ§an: 0';}
rstFootball();drawFootball();
</script>
</body>
</html>
