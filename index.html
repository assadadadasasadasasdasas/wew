<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CALEJON | Headwear Co.</title>
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@300;400;500&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box}
:root{--bg:#0a0b14;--bg2:#12131f;--bg3:#1a1c2e;--text:#e8e2da;--text2:#9a9494;--text3:#5a5a6a;--border:#1e2035;--white:#14152a;--accent:#0d0e1a;--danger:#ef4444;--success:#22c55e;--blue:#3b82f6;--glow:rgba(180,120,60,.08)}
html{scroll-behavior:smooth}
body{font-family:'Outfit',sans-serif;background:var(--bg);color:var(--text);overflow-x:hidden;-webkit-font-smoothing:antialiased;position:relative}
body::before{content:'';position:fixed;inset:0;background:radial-gradient(ellipse at 20% 20%,rgba(60,30,80,.12) 0%,transparent 50%),radial-gradient(ellipse at 80% 80%,rgba(120,50,20,.08) 0%,transparent 50%),radial-gradient(ellipse at 50% 50%,rgba(20,20,60,.06) 0%,transparent 70%);pointer-events:none;z-index:0}
::-webkit-scrollbar{width:5px}::-webkit-scrollbar-track{background:var(--bg)}::-webkit-scrollbar-thumb{background:#2a2c45;border-radius:8px}
a{text-decoration:none;color:inherit}button{cursor:pointer;font-family:inherit}

/* TICKER */
.ticker{background:#08091a;color:var(--text);padding:9px 0;overflow:hidden;white-space:nowrap;font-family:'JetBrains Mono',monospace;font-size:10.5px;letter-spacing:2.5px;text-transform:uppercase;position:relative;z-index:1;border-bottom:1px solid rgba(255,255,255,.03)}
.ticker-track{display:inline-flex;animation:tickScroll 35s linear infinite}
.ticker-track span{padding:0 36px;opacity:.85}
.ticker-track span::before{content:'âœ¦';margin-right:14px;opacity:.4}
@keyframes tickScroll{0%{transform:translateX(0)}100%{transform:translateX(-50%)}}

/* HEADER */
header{position:sticky;top:0;z-index:100;background:rgba(10,11,20,.92);backdrop-filter:blur(24px);-webkit-backdrop-filter:blur(24px);border-bottom:1px solid rgba(255,255,255,.04)}
.h-inner{max-width:1440px;margin:0 auto;padding:0 48px;height:68px;display:flex;align-items:center;justify-content:space-between}
.logo-a{display:flex;align-items:center;gap:12px;cursor:pointer}
.logo-star{width:32px;height:32px}
.logo-t{font-weight:800;font-size:21px;letter-spacing:7px;text-transform:uppercase}
nav{display:grid;grid-template-columns:1fr 1fr;gap:4px 28px;text-align:center}
nav a{font-size:11.5px;font-weight:500;letter-spacing:2.5px;text-transform:uppercase;position:relative;padding:4px 0;transition:opacity .3s;cursor:pointer}
nav a:hover{opacity:.5}
nav a::after{content:'';position:absolute;bottom:0;left:0;width:0;height:1.5px;background:var(--text);transition:width .3s}
nav a:hover::after{width:100%}
.h-right{display:flex;align-items:center;gap:12px}
.cart-btn,.user-btn{position:relative;background:none;border:1.5px solid rgba(255,255,255,.15);width:36px;height:36px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:14px;transition:all .3s;color:var(--text)}
.cart-btn:hover,.user-btn:hover{background:rgba(255,255,255,.08);border-color:rgba(255,255,255,.3)}
.cart-badge{position:absolute;top:-5px;right:-5px;background:var(--danger);color:#fff;font-size:9px;font-weight:700;width:17px;height:17px;border-radius:50%;display:none;align-items:center;justify-content:center}
.hamburger{display:none;background:none;border:none;width:28px;height:20px;position:relative;flex-direction:column;justify-content:space-between}
.hamburger span{display:block;width:100%;height:1.5px;background:var(--text);transition:all .3s}
.user-name-badge{font-size:10px;font-weight:700;letter-spacing:1px;text-transform:uppercase;color:var(--text);font-family:'JetBrains Mono',monospace;display:none}

/* MOBILE NAV */
.mob-nav{display:none;position:fixed;inset:0;background:var(--bg);z-index:200;flex-direction:column;align-items:center;justify-content:center;gap:28px}
.mob-nav.open{display:flex}
.mob-nav a{font-size:22px;font-weight:700;letter-spacing:5px;text-transform:uppercase;cursor:pointer;transition:opacity .3s}
.mob-nav a:hover{opacity:.5}
.mob-close{position:absolute;top:22px;right:28px;background:none;border:none;font-size:26px;color:var(--text)}

/* HERO */
.hero{min-height:94vh;display:flex;align-items:center;justify-content:center;text-align:center;position:relative;overflow:hidden;z-index:1}
.hero-bg{position:absolute;inset:0;background:radial-gradient(ellipse at 25% 15%,rgba(100,40,120,.1) 0%,transparent 55%),radial-gradient(ellipse at 75% 85%,rgba(180,80,30,.06) 0%,transparent 55%),radial-gradient(circle at 85% 20%,rgba(200,100,40,.08) 0%,transparent 25%),radial-gradient(circle at 15% 80%,rgba(80,40,120,.06) 0%,transparent 25%)}
.hero-c{position:relative;z-index:2;animation:fadeUp .9s ease-out}
@keyframes fadeUp{from{opacity:0;transform:translateY(28px)}to{opacity:1;transform:translateY(0)}}
.hero-star-wrap{width:220px;height:220px;margin:0 auto 44px;animation:spinSlow 80s linear infinite}
@keyframes spinSlow{to{transform:rotate(360deg)}}
.hero h1{font-size:clamp(42px,7.5vw,88px);font-weight:900;letter-spacing:14px;text-transform:uppercase;margin-bottom:14px}
.hero p{font-family:'JetBrains Mono',monospace;font-size:12px;letter-spacing:7px;text-transform:uppercase;color:var(--text2);margin-bottom:52px}
.hero-cta{display:inline-block;font-size:12px;font-weight:600;letter-spacing:4px;text-transform:uppercase;color:var(--bg);background:var(--text);padding:17px 52px;border:none;transition:all .4s}
.hero-cta:hover{background:rgba(255,255,255,.85);letter-spacing:6px}

/* SECTION HEADER */
.sec-h{text-align:center;padding:88px 40px 52px;position:relative;z-index:1}
.sec-h .bar{width:40px;height:2px;background:var(--text);margin:0 auto 14px;opacity:.3}
.sec-h h2{font-size:32px;font-weight:800;letter-spacing:8px;text-transform:uppercase;margin-bottom:10px}
.sec-h p{font-family:'JetBrains Mono',monospace;font-size:11px;color:var(--text3);letter-spacing:4px;text-transform:uppercase}

/* LANG TOGGLE */
.lang-btn{background:none;border:1.5px solid rgba(255,255,255,.15);color:var(--text);font-family:'JetBrains Mono',monospace;font-size:10px;font-weight:700;letter-spacing:2px;padding:6px 10px;border-radius:4px;transition:all .3s;cursor:pointer}
.lang-btn:hover{border-color:rgba(255,255,255,.3);background:rgba(255,255,255,.05)}

/* STAR FIELD CANVAS */
#starField{position:fixed;inset:0;z-index:0}

/* PRODUCTS */
.p-grid{max-width:1440px;margin:0 auto;padding:0 48px 88px;display:grid;grid-template-columns:repeat(4,1fr);gap:20px;position:relative;z-index:1}
.p-card{background:var(--white);border:1px solid var(--border);overflow:hidden;transition:all .4s;position:relative}
.p-card:hover{transform:translateY(-5px);box-shadow:0 24px 48px rgba(0,0,0,.3),0 0 40px rgba(180,80,30,.04)}
.p-img{width:100%;aspect-ratio:1;background:var(--bg2);display:flex;align-items:center;justify-content:center;position:relative;overflow:hidden}
.p-img svg{width:55%;opacity:.12;transition:all .5s}
.p-card:hover .p-img svg{opacity:.22;transform:scale(1.06) rotate(4deg)}
.p-code{position:absolute;top:10px;left:10px;font-family:'JetBrains Mono',monospace;font-size:9.5px;letter-spacing:1.5px;color:var(--text);background:rgba(20,21,42,.85);padding:3px 8px;z-index:2;border:1px solid var(--border)}
.p-badge{position:absolute;top:10px;right:10px;font-family:'JetBrains Mono',monospace;font-size:8.5px;letter-spacing:1.5px;text-transform:uppercase;color:var(--white);background:var(--text);padding:4px 10px;z-index:2}
.p-info{padding:14px 16px;border-top:1px solid var(--border)}
.p-name{font-weight:700;font-size:13.5px;letter-spacing:2.5px;text-transform:uppercase;margin-bottom:6px}
.p-price{font-family:'JetBrains Mono',monospace;font-size:13.5px;font-weight:500}
.p-add{width:100%;margin-top:10px;padding:11px;background:var(--text);color:var(--bg);border:none;font-size:10.5px;font-weight:600;letter-spacing:2.5px;text-transform:uppercase;transition:all .3s;opacity:0;transform:translateY(6px)}
.p-card:hover .p-add{opacity:1;transform:translateY(0)}
.p-add:hover{background:rgba(232,226,218,.85)}

/* ABOUT */
.about-sec{max-width:1440px;margin:0 auto;padding:0 48px 100px;display:grid;grid-template-columns:1fr 1fr;gap:72px;align-items:center;position:relative;z-index:1}
.about-vis{aspect-ratio:4/5;background:var(--bg2);border:1px solid var(--border);display:flex;align-items:center;justify-content:center;position:relative}
.about-vis svg{width:45%;opacity:.08}
.about-vis::after{content:'CALEJON';position:absolute;bottom:20px;right:20px;font-size:11px;font-weight:600;letter-spacing:5px;color:var(--text3)}
.about-txt h3{font-size:26px;font-weight:800;letter-spacing:5px;text-transform:uppercase;margin-bottom:24px}
.about-txt p{font-size:15px;line-height:1.85;color:var(--text2);margin-bottom:14px}
.about-txt .sig{margin-top:24px;font-family:'JetBrains Mono',monospace;font-size:11px;letter-spacing:2px;color:var(--text3);text-transform:uppercase}

/* BLOG */
.blog-grid{max-width:1440px;margin:0 auto;padding:0 48px 88px;display:grid;grid-template-columns:repeat(3,1fr);gap:24px}
.blog-card{background:var(--white);border:1px solid var(--border);overflow:hidden;transition:all .4s;cursor:pointer}
.blog-card:hover{transform:translateY(-4px);box-shadow:0 20px 40px rgba(0,0,0,.06)}
.blog-thumb{width:100%;aspect-ratio:16/9;background:var(--bg2);display:flex;align-items:center;justify-content:center;position:relative;overflow:hidden}
.blog-thumb svg{width:30%;opacity:.08}
.blog-cat{position:absolute;top:12px;left:12px;font-family:'JetBrains Mono',monospace;font-size:9px;letter-spacing:2px;text-transform:uppercase;background:var(--text);color:var(--bg);padding:4px 10px}
.blog-body{padding:20px}
.blog-date{font-family:'JetBrains Mono',monospace;font-size:10px;color:var(--text3);letter-spacing:1.5px;margin-bottom:8px}
.blog-title{font-size:16px;font-weight:700;letter-spacing:1px;line-height:1.4;margin-bottom:8px}
.blog-excerpt{font-size:13px;color:var(--text2);line-height:1.6;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}
.blog-read{display:inline-block;margin-top:14px;font-size:11px;font-weight:600;letter-spacing:2px;text-transform:uppercase;color:var(--text);border-bottom:1px solid var(--text);padding-bottom:2px;transition:opacity .3s}
.blog-read:hover{opacity:.5}

/* BLOG DETAIL */
.blog-detail{max-width:740px;margin:0 auto}
.blog-detail h2{font-size:28px;font-weight:800;letter-spacing:2px;line-height:1.35;margin-bottom:16px}
.blog-detail .bd-meta{font-family:'JetBrains Mono',monospace;font-size:11px;color:var(--text3);letter-spacing:1.5px;margin-bottom:32px;display:flex;gap:20px}
.blog-detail .bd-content{font-size:15px;line-height:1.9;color:var(--text2)}
.blog-detail .bd-content p{margin-bottom:16px}

/* PAGES */
.pg{display:none;max-width:820px;margin:0 auto;padding:80px 48px 100px;animation:fadeUp .5s ease-out;position:relative;z-index:1}
.pg.active{display:block}
.pg-wide{max-width:1440px;padding-left:48px;padding-right:48px}
.pg h2{font-size:26px;font-weight:800;letter-spacing:4px;text-transform:uppercase;margin-bottom:28px}
.pg h3{font-size:17px;font-weight:700;margin:24px 0 10px;letter-spacing:1px}
.pg p{font-size:14px;line-height:1.85;color:var(--text2);margin-bottom:10px}
.pg-back{display:inline-flex;align-items:center;gap:8px;font-size:11px;font-weight:600;letter-spacing:2px;text-transform:uppercase;color:var(--text);margin-bottom:28px;cursor:pointer;transition:opacity .3s}
.pg-back:hover{opacity:.5}

/* FOOTER */
footer{background:#060710;color:var(--text);padding:60px 48px 0;border-top:1px solid rgba(255,255,255,.03);position:relative;z-index:1}
.ft-inner{max-width:1440px;margin:0 auto;display:grid;grid-template-columns:2fr 1fr 1fr 1fr;gap:48px;padding-bottom:44px;border-bottom:1px solid rgba(255,255,255,.04)}
.ft-brand .ft-logo{font-size:22px;font-weight:800;letter-spacing:7px;margin-bottom:14px}
.ft-brand p{font-size:12.5px;color:var(--text3);line-height:1.7;max-width:260px}
.ft-col h4{font-family:'JetBrains Mono',monospace;font-size:10px;letter-spacing:2.5px;text-transform:uppercase;margin-bottom:18px;color:var(--text3)}
.ft-col a{display:block;font-size:12.5px;color:var(--text2);margin-bottom:9px;cursor:pointer;transition:color .3s}
.ft-col a:hover{color:var(--text)}
.ft-mid{max-width:1440px;margin:0 auto;padding:20px 0;display:flex;justify-content:center;border-bottom:1px solid rgba(255,255,255,.03)}
.ft-admin{opacity:.3;transition:all .3s;font-family:'JetBrains Mono',monospace;font-size:9px;letter-spacing:2px;text-transform:uppercase;background:none;border:1px solid rgba(255,255,255,.06);color:var(--text3);padding:8px 20px}
.ft-admin:hover{opacity:.7;border-color:rgba(255,255,255,.15)}
.ft-bottom{max-width:1440px;margin:0 auto;padding:16px 0;display:flex;justify-content:space-between;align-items:center;font-family:'JetBrains Mono',monospace;font-size:10px;color:var(--text3);letter-spacing:1.5px}

/* CART DRAWER */
.c-overlay{display:none;position:fixed;inset:0;background:rgba(0,0,0,.4);z-index:300}.c-overlay.open{display:block}
.c-drawer{position:fixed;top:0;right:-460px;width:440px;height:100vh;background:var(--bg);z-index:301;transition:right .4s cubic-bezier(.4,0,.2,1);display:flex;flex-direction:column;border-left:1px solid var(--border)}.c-drawer.open{right:0}
.c-head{display:flex;justify-content:space-between;align-items:center;padding:22px 28px;border-bottom:1px solid var(--border)}
.c-head h3{font-size:16px;font-weight:700;letter-spacing:5px;text-transform:uppercase}
.c-close{background:none;border:none;font-size:20px;color:var(--text)}
.c-items{flex:1;overflow-y:auto;padding:14px 28px}
.c-empty{text-align:center;padding:56px 0;color:var(--text3);font-family:'JetBrains Mono',monospace;font-size:11px;letter-spacing:2px}
.c-item{display:flex;gap:14px;padding:14px 0;border-bottom:1px solid var(--border);align-items:center}
.c-item-img{width:64px;height:64px;background:var(--bg2);border:1px solid var(--border);display:flex;align-items:center;justify-content:center;flex-shrink:0}.c-item-img svg{width:55%;opacity:.12}
.c-item-info{flex:1}
.c-item-name{font-size:12.5px;font-weight:700;letter-spacing:1.5px;text-transform:uppercase;margin-bottom:3px}
.c-item-code{font-family:'JetBrains Mono',monospace;font-size:9.5px;color:var(--text3);letter-spacing:1px}
.c-item-price{font-family:'JetBrains Mono',monospace;font-size:12.5px;font-weight:500;margin-top:3px}
.c-item-qty{display:flex;align-items:center;gap:6px}
.c-item-qty button{width:26px;height:26px;background:var(--white);border:1px solid var(--border);font-size:13px;display:flex;align-items:center;justify-content:center;transition:background .2s}
.c-item-qty button:hover{background:var(--bg2)}
.c-item-qty span{font-family:'JetBrains Mono',monospace;font-size:12px;width:18px;text-align:center}
.c-item-rm{background:none;border:none;color:var(--text3);font-size:15px;padding:4px;transition:color .3s}.c-item-rm:hover{color:var(--danger)}
.c-foot{padding:22px 28px;border-top:1px solid var(--border)}
.c-total{display:flex;justify-content:space-between;align-items:center;margin-bottom:18px;font-size:15px;font-weight:700;letter-spacing:2px;text-transform:uppercase}
.c-checkout{width:100%;padding:15px;background:var(--text);color:var(--bg);border:none;font-size:11px;font-weight:600;letter-spacing:3px;text-transform:uppercase;transition:background .3s}.c-checkout:hover{background:#333}

/* POPUP / MODAL SHARED */
.modal-ov{display:none;position:fixed;inset:0;background:rgba(0,0,0,.55);z-index:400;align-items:center;justify-content:center}.modal-ov.open{display:flex}
.modal-box{background:var(--bg);border:1px solid var(--border);position:relative;animation:fadeUp .3s ease-out}
.modal-close{position:absolute;top:16px;right:18px;background:none;border:none;font-size:20px;color:var(--text);z-index:2}

/* EMAIL POPUP */
.email-popup{width:440px;max-width:92vw;overflow:hidden;display:flex;flex-direction:column}
.ep-top{background:#0d0e1a;color:#e8ddd4;padding:36px 32px;text-align:center}
.ep-top svg{width:56px;height:56px;margin-bottom:16px}
.ep-top h3{font-size:22px;font-weight:800;letter-spacing:6px;text-transform:uppercase;margin-bottom:6px}
.ep-top p{font-family:'JetBrains Mono',monospace;font-size:28px;font-weight:700;letter-spacing:2px;margin-bottom:4px}
.ep-top .ep-sub{font-size:12px;opacity:.6;letter-spacing:2px;text-transform:uppercase}
.ep-bottom{padding:28px 32px}
.ep-bottom p{font-size:13px;color:var(--text2);text-align:center;margin-bottom:18px;line-height:1.6}
.ep-input{display:flex;gap:0;margin-bottom:12px}
.ep-input input{flex:1;padding:14px 16px;border:1px solid var(--border);border-right:none;font-size:14px;font-family:'Outfit',sans-serif;outline:none;background:var(--white)}
.ep-input input:focus{border-color:var(--text)}
.ep-input button{padding:14px 24px;background:var(--text);color:var(--bg);border:none;font-size:11px;font-weight:600;letter-spacing:2px;text-transform:uppercase;white-space:nowrap;transition:background .3s}
.ep-input button:hover{background:#333}
.ep-skip{display:block;text-align:center;font-size:11px;color:var(--text3);cursor:pointer;letter-spacing:1px;transition:color .3s;background:none;border:none;width:100%;padding:6px;font-family:'Outfit',sans-serif}
.ep-skip:hover{color:var(--text)}

/* AUTH MODAL */
.auth-box{width:400px;max-width:92vw;padding:40px 36px}
.auth-box h3{font-size:18px;font-weight:700;letter-spacing:4px;text-transform:uppercase;text-align:center;margin-bottom:28px}
.auth-box .fg{margin-bottom:16px}
.auth-box .fg label{display:block;font-size:10px;font-weight:600;letter-spacing:2px;text-transform:uppercase;color:var(--text3);margin-bottom:6px}
.auth-box .fg input{width:100%;padding:13px 16px;border:1px solid var(--border);background:var(--white);font-size:14px;font-family:'Outfit',sans-serif;outline:none;transition:border .3s}
.auth-box .fg input:focus{border-color:var(--text)}
.auth-btn{width:100%;padding:14px;background:var(--text);color:var(--bg);border:none;font-size:11px;font-weight:600;letter-spacing:3px;text-transform:uppercase;margin-top:4px;transition:background .3s}
.auth-btn:hover{background:#333}
.auth-switch{text-align:center;margin-top:16px;font-size:12px;color:var(--text3)}
.auth-switch span{color:var(--text);font-weight:600;cursor:pointer;border-bottom:1px solid var(--text)}
.auth-err{color:var(--danger);font-size:11px;text-align:center;margin-top:8px;display:none}
.user-dropdown{position:absolute;top:52px;right:0;background:var(--white);border:1px solid var(--border);min-width:200px;display:none;z-index:110;box-shadow:0 12px 32px rgba(0,0,0,.08)}
.user-dropdown.open{display:block}
.user-dropdown a{display:block;padding:12px 18px;font-size:12px;font-weight:500;letter-spacing:1.5px;text-transform:uppercase;transition:background .2s;cursor:pointer}
.user-dropdown a:hover{background:var(--bg)}
.user-dropdown .ud-name{padding:14px 18px;border-bottom:1px solid var(--border);font-weight:700;font-size:13px;letter-spacing:2px;text-transform:uppercase}

/* ADMIN */
.adm-ov{display:none;position:fixed;inset:0;background:rgba(0,0,0,.55);z-index:500;align-items:center;justify-content:center}.adm-ov.open{display:flex}
.adm{width:94%;max-width:1000px;max-height:90vh;background:var(--bg);border:1px solid var(--border);overflow-y:auto;animation:fadeUp .3s ease-out}
.adm-h{display:flex;justify-content:space-between;align-items:center;padding:22px 32px;border-bottom:1px solid var(--border);position:sticky;top:0;background:var(--bg);z-index:2}
.adm-h h3{font-size:16px;font-weight:700;letter-spacing:5px;text-transform:uppercase}
.adm-x{background:none;border:none;font-size:20px;color:var(--text)}
.adm-body{padding:28px 32px}
.adm-tabs{display:flex;gap:0;margin-bottom:28px;border-bottom:1px solid var(--border);overflow-x:auto;-webkit-overflow-scrolling:touch}
.adm-tab{padding:11px 18px;font-size:10.5px;font-weight:600;letter-spacing:1.5px;text-transform:uppercase;background:none;border:none;border-bottom:2px solid transparent;color:var(--text3);transition:all .3s;white-space:nowrap}
.adm-tab.active{color:var(--text);border-bottom-color:var(--text)}
.adm-sec{display:none}.adm-sec.active{display:block}
.fg{margin-bottom:18px}
.fg label{display:block;font-size:11px;font-weight:600;letter-spacing:2px;text-transform:uppercase;color:var(--text3);margin-bottom:7px}
.fg input,.fg textarea,.fg select{width:100%;padding:12px 16px;font-family:'Outfit',sans-serif;font-size:13.5px;border:1px solid var(--border);background:var(--white);color:var(--text);outline:none;transition:border .3s}
.fg input:focus,.fg textarea:focus{border-color:var(--text)}
.fg textarea{min-height:110px;resize:vertical}
.fr{display:grid;grid-template-columns:1fr 1fr;gap:14px}
.btn-s{padding:12px 32px;background:var(--text);color:var(--bg);border:none;font-size:11px;font-weight:600;letter-spacing:2px;text-transform:uppercase;transition:background .3s}.btn-s:hover{background:#333}
.btn-d{padding:8px 16px;background:none;color:var(--danger);border:1px solid var(--danger);font-size:10px;font-weight:600;letter-spacing:1.5px;text-transform:uppercase;transition:all .3s}.btn-d:hover{background:var(--danger);color:#fff}
.btn-g{padding:8px 16px;background:none;color:var(--success);border:1px solid var(--success);font-size:10px;font-weight:600;letter-spacing:1.5px;text-transform:uppercase;transition:all .3s}.btn-g:hover{background:var(--success);color:#fff}
.apl{display:flex;flex-direction:column;gap:8px;margin-bottom:20px}
.api{display:grid;grid-template-columns:60px 1fr 70px 70px 55px;align-items:center;gap:12px;padding:14px 16px;background:var(--white);border:1px solid var(--border);cursor:pointer;transition:border .3s;font-size:13px}.api:hover{border-color:var(--text)}
.api .cd{font-family:'JetBrains Mono',monospace;font-size:10.5px;color:var(--text3);letter-spacing:1px}
.api .nm{font-weight:600;letter-spacing:1px;text-transform:uppercase}
.api .st{font-family:'JetBrains Mono',monospace;font-size:9px;letter-spacing:1px;text-transform:uppercase;padding:3px 8px;text-align:center;border-radius:2px}
.api .pr{font-family:'JetBrains Mono',monospace;font-size:12px;text-align:right}
.api .ct{font-family:'JetBrains Mono',monospace;font-size:9px;color:var(--text2);text-align:center;white-space:nowrap}
.dash-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:14px;margin-bottom:28px}
.dash-card{background:var(--white);border:1px solid var(--border);padding:20px;text-align:center}
.dash-card .num{font-size:26px;font-weight:800;margin-bottom:4px}
.dash-card .lbl{font-family:'JetBrains Mono',monospace;font-size:9px;letter-spacing:2px;text-transform:uppercase;color:var(--text3)}
.ct-table{width:100%;border-collapse:collapse;font-size:12.5px}
.ct-table th{font-family:'JetBrains Mono',monospace;font-size:10px;letter-spacing:2px;text-transform:uppercase;color:var(--text3);text-align:left;padding:10px 12px;border-bottom:2px solid var(--border)}
.ct-table td{padding:10px 12px;border-bottom:1px solid var(--border)}
.ct-table .bar-wrap{width:100%;height:6px;background:var(--bg2);border-radius:3px;overflow:hidden}
.ct-table .bar-fill{height:100%;background:var(--text);border-radius:3px}
.pef{display:none;border-top:1px solid var(--border);padding-top:24px;margin-top:8px}
.pef h4{font-size:15px;font-weight:700;letter-spacing:2px;text-transform:uppercase;margin-bottom:18px}

/* Image upload zone */
.img-upload{margin-bottom:20px}
.img-upload>label{display:block;font-size:11px;font-weight:600;letter-spacing:2px;text-transform:uppercase;color:var(--text3);margin-bottom:8px}
.img-zone{border:2px dashed var(--border);background:var(--white);padding:28px 24px;text-align:center;transition:all .3s;position:relative}
.img-zone:hover{border-color:var(--text)}
.img-zone.dragover{border-color:var(--text);background:var(--bg2)}
.img-zone-icon{font-size:36px;margin-bottom:10px;opacity:.25}
.img-zone-title{font-size:13px;font-weight:600;margin-bottom:6px;letter-spacing:1px}
.img-zone-hint{font-size:11px;color:var(--text3);margin-bottom:16px}
.img-zone-actions{display:flex;gap:10px;justify-content:center;flex-wrap:wrap;align-items:center}
.img-file-btn{display:inline-flex;align-items:center;gap:6px;padding:10px 22px;background:var(--text);color:var(--bg);border:none;font-size:11px;font-weight:600;letter-spacing:2px;text-transform:uppercase;transition:background .3s;cursor:pointer}
.img-file-btn:hover{background:#333}
.img-file-btn input{display:none}
.img-or{font-size:11px;color:var(--text3);letter-spacing:1px}
.img-url-wrap{display:flex;gap:0;max-width:320px;width:100%;margin-top:10px}
.img-url-wrap input{flex:1;padding:10px 14px;border:1px solid var(--border);border-right:none;font-size:12px;font-family:'Outfit',sans-serif;outline:none;background:var(--bg);min-width:0}
.img-url-wrap input:focus{border-color:var(--text)}
.img-url-wrap button{padding:10px 16px;background:var(--text);color:var(--bg);border:none;font-size:10px;font-weight:600;letter-spacing:1.5px;text-transform:uppercase;white-space:nowrap;transition:background .3s}
.img-url-wrap button:hover{background:#333}

/* Image preview */
.img-prev{display:none;margin-top:12px;position:relative;border:1px solid var(--border);background:var(--bg2)}
.img-prev-inner{display:flex;gap:16px;padding:14px;align-items:center}
.img-prev-pic{width:120px;height:120px;overflow:hidden;flex-shrink:0;border:1px solid var(--border);background:var(--white)}
.img-prev-pic img{width:100%;height:100%;object-fit:cover;display:block}
.img-prev-details{flex:1;min-width:0}
.img-prev-name{font-size:13px;font-weight:600;margin-bottom:4px;letter-spacing:.5px;word-break:break-all}
.img-prev-size{font-family:'JetBrains Mono',monospace;font-size:10px;color:var(--text3);letter-spacing:1px;margin-bottom:10px}
.img-prev-bar{width:100%;height:4px;background:var(--bg3);border-radius:2px;overflow:hidden;margin-bottom:12px}
.img-prev-bar .fill{height:100%;background:var(--success);border-radius:2px;animation:barLoad .5s ease-out}
@keyframes barLoad{from{width:0}to{width:100%}}
.img-prev-btns{display:flex;gap:8px}
.img-change-btn{padding:7px 14px;background:none;border:1px solid var(--border);font-size:10px;font-weight:600;letter-spacing:1.5px;text-transform:uppercase;color:var(--text);transition:all .3s;cursor:pointer}
.img-change-btn:hover{border-color:var(--text)}
.img-change-btn input{display:none}
.img-remove-btn{padding:7px 14px;background:none;border:1px solid var(--danger);font-size:10px;font-weight:600;letter-spacing:1.5px;text-transform:uppercase;color:var(--danger);transition:all .3s;cursor:pointer}
.img-remove-btn:hover{background:var(--danger);color:#fff}

/* Product card with real image */
.p-img img{width:100%;height:100%;object-fit:cover;position:absolute;inset:0;z-index:1}
.p-img.has-img svg{display:none}
/* Cart item with real image */
.c-item-img img{width:100%;height:100%;object-fit:cover}
.c-item-img.has-img svg{display:none}
/* Admin product thumbnail */
.api-thumb{width:40px;height:40px;background:var(--bg2);border:1px solid var(--border);overflow:hidden;display:flex;align-items:center;justify-content:center;flex-shrink:0}
.api-thumb img{width:100%;height:100%;object-fit:cover}
.api-thumb svg{width:70%;opacity:.12}

/* Email list in admin */
.email-list-item{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;background:var(--white);border:1px solid var(--border);margin-bottom:6px;font-size:13px}
.email-list-item .el-email{font-weight:500}
.email-list-item .el-date{font-family:'JetBrains Mono',monospace;font-size:10px;color:var(--text3)}

/* Members list in admin */
.member-item{display:grid;grid-template-columns:1fr 1fr 100px 80px;align-items:center;padding:12px 16px;background:var(--white);border:1px solid var(--border);margin-bottom:6px;font-size:13px;gap:10px}
.member-item .m-name{font-weight:600;letter-spacing:1px;text-transform:uppercase}
.member-item .m-email{color:var(--text2);font-size:12px}
.member-item .m-date{font-family:'JetBrains Mono',monospace;font-size:10px;color:var(--text3)}
.member-item .m-orders{font-family:'JetBrains Mono',monospace;font-size:11px;font-weight:600;text-align:center}

/* Blog admin item */
.blog-adm-item{display:grid;grid-template-columns:1fr 120px 80px;align-items:center;padding:14px 16px;background:var(--white);border:1px solid var(--border);margin-bottom:8px;cursor:pointer;transition:border .3s;gap:12px}
.blog-adm-item:hover{border-color:var(--text)}
.blog-adm-item .ba-title{font-weight:600;letter-spacing:1px}
.blog-adm-item .ba-date{font-family:'JetBrains Mono',monospace;font-size:10px;color:var(--text3)}
.blog-adm-item .ba-status{font-family:'JetBrains Mono',monospace;font-size:9px;letter-spacing:1px;text-transform:uppercase;padding:3px 8px;text-align:center;border-radius:2px}

/* Login modal */
.login-ov{display:none;position:fixed;inset:0;background:rgba(0,0,0,.55);z-index:450;align-items:center;justify-content:center}.login-ov.open{display:flex}
.login-box{background:var(--bg);padding:44px;width:360px;border:1px solid var(--border);text-align:center}
.login-box h3{font-size:16px;font-weight:700;letter-spacing:5px;text-transform:uppercase;margin-bottom:24px}
.login-box input{width:100%;padding:14px;border:1px solid var(--border);background:var(--white);font-size:14px;text-align:center;margin-bottom:14px;outline:none;font-family:'Outfit',sans-serif}
.login-box input:focus{border-color:var(--text)}
.login-box .lb{width:100%;padding:14px;background:var(--text);color:var(--bg);border:none;font-size:11px;font-weight:600;letter-spacing:3px;text-transform:uppercase;margin-bottom:10px;transition:background .3s}.login-box .lb:hover{background:#333}
.login-box .lc{width:100%;padding:14px;background:none;color:var(--text3);border:1px solid var(--border);font-size:11px;font-weight:600;letter-spacing:3px;text-transform:uppercase;transition:all .3s}.login-box .lc:hover{border-color:var(--text);color:var(--text)}
.login-err{color:var(--danger);font-size:11px;margin-top:4px;display:none}

/* SITE LOCK */
.site-lock{position:fixed;inset:0;background:#040510;z-index:9999;display:flex;align-items:center;justify-content:center;flex-direction:column;gap:28px;transition:opacity .5s,visibility .5s}
.site-lock.unlocked{opacity:0;visibility:hidden;pointer-events:none}
.site-lock-inner{text-align:center;animation:fadeUp .6s ease-out}
.site-lock svg{width:80px;height:80px;margin-bottom:24px;animation:spinSlow 80s linear infinite}
.site-lock h2{color:#e8ddd4;font-size:28px;font-weight:900;letter-spacing:10px;text-transform:uppercase;margin-bottom:6px}
.site-lock .sl-sub{font-family:'JetBrains Mono',monospace;font-size:10px;color:rgba(232,221,218,.35);letter-spacing:4px;text-transform:uppercase;margin-bottom:36px}
.site-lock .sl-input-wrap{display:flex;gap:10px;justify-content:center;margin-bottom:14px}
.site-lock .sl-digit{width:52px;height:60px;background:rgba(255,255,255,.06);border:1.5px solid rgba(255,255,255,.1);color:#e8ddd4;font-family:'JetBrains Mono',monospace;font-size:24px;font-weight:700;text-align:center;outline:none;transition:border .3s;letter-spacing:2px;-webkit-appearance:none;-moz-appearance:textfield}
.site-lock .sl-digit:focus{border-color:rgba(255,255,255,.4);background:rgba(255,255,255,.1)}
.site-lock .sl-digit::placeholder{color:rgba(232,221,218,.15)}
.site-lock .sl-btn{padding:14px 48px;background:#e8ddd4;color:#0a0b14;border:none;font-size:11px;font-weight:700;letter-spacing:4px;text-transform:uppercase;transition:all .3s;margin-top:8px}
.site-lock .sl-btn:hover{background:#d5cec4;letter-spacing:6px}
.site-lock .sl-err{color:#F87171;font-family:'JetBrains Mono',monospace;font-size:11px;letter-spacing:2px;height:18px;margin-top:10px;transition:opacity .3s}
.site-lock .sl-hint{font-size:10px;color:rgba(232,221,218,.15);letter-spacing:2px;margin-top:28px;font-family:'JetBrains Mono',monospace}
@keyframes lockShake{0%,100%{transform:translateX(0)}20%,60%{transform:translateX(-8px)}40%,80%{transform:translateX(8px)}}

.toast{position:fixed;bottom:28px;left:50%;transform:translateX(-50%) translateY(100px);background:#e8ddd4;color:#0a0b14;padding:13px 28px;font-size:12px;font-weight:500;letter-spacing:2px;z-index:700;transition:transform .4s cubic-bezier(.4,0,.2,1);pointer-events:none;white-space:nowrap}.toast.show{transform:translateX(-50%) translateY(0)}

/* AI CHAT WIDGET */
.chat-fab{position:fixed;bottom:28px;right:28px;width:60px;height:60px;background:#000;color:#e8ddd4;border:1.5px solid rgba(255,255,255,.1);border-radius:50%;font-size:22px;display:flex;align-items:center;justify-content:center;z-index:250;box-shadow:0 6px 24px rgba(0,0,0,.5),0 0 40px rgba(180,60,20,.1);transition:all .3s}
.chat-fab:hover{transform:scale(1.08);box-shadow:0 8px 32px rgba(0,0,0,.6),0 0 60px rgba(180,60,20,.15);border-color:rgba(255,255,255,.2)}
.chat-fab.open{transform:rotate(90deg) scale(1);background:#111}
.chat-panel{position:fixed;bottom:96px;right:28px;width:420px;max-height:580px;background:#0a0a12;border:1px solid rgba(255,120,50,.15);z-index:250;display:none;flex-direction:column;box-shadow:0 16px 48px rgba(0,0,0,.4),0 0 80px rgba(180,60,20,.08);animation:fadeUp .25s ease-out;border-radius:16px;overflow:hidden}
.chat-panel.open{display:flex}
.chat-hdr{display:flex;align-items:center;justify-content:space-between;padding:16px 20px;border-bottom:1px solid rgba(255,255,255,.06);background:linear-gradient(135deg,#1a0a0a 0%,#0d0d1a 50%,#0a0a12 100%);color:#F5F0EB;position:relative;overflow:hidden}
.chat-hdr::before{content:'';position:absolute;inset:0;background:radial-gradient(circle at 90% 50%,rgba(200,80,30,.15) 0%,transparent 40%);pointer-events:none}
.chat-hdr-left{display:flex;align-items:center;gap:10px}
.chat-hdr-dot{width:8px;height:8px;border-radius:50%;background:var(--success);animation:pulse 2s infinite}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:.4}}
.chat-hdr h4{font-size:13px;font-weight:700;letter-spacing:3px;text-transform:uppercase}
.chat-hdr-sub{font-family:'JetBrains Mono',monospace;font-size:9px;opacity:.5;letter-spacing:1px}
.chat-hdr button{background:none;border:none;color:var(--bg);font-size:16px;opacity:.6;transition:opacity .3s}
.chat-hdr button:hover{opacity:1}
.chat-msgs{flex:1;overflow-y:auto;padding:16px;display:flex;flex-direction:column;gap:12px;min-height:300px;max-height:400px;background:#060810;position:relative;overflow-x:hidden}
.chat-msgs::before{content:'';position:absolute;inset:0;background:radial-gradient(ellipse at 80% 90%,rgba(180,60,20,.15) 0%,transparent 45%),radial-gradient(ellipse at 20% 20%,rgba(80,40,140,.08) 0%,transparent 40%),radial-gradient(circle at 50% 110%,rgba(200,80,30,.1) 0%,transparent 50%);pointer-events:none;z-index:0}
.chat-msgs>*{position:relative;z-index:1}
.chat-msg{max-width:85%;padding:11px 15px;font-size:13px;line-height:1.6;word-break:break-word;backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px)}
.chat-msg.bot{align-self:flex-start;background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.08);border-radius:2px 14px 14px 14px;color:#e8ddd4}
.chat-msg.user{align-self:flex-end;background:linear-gradient(135deg,rgba(180,80,30,.5),rgba(140,50,20,.4));color:#f5e8df;border:1px solid rgba(255,120,50,.15);border-radius:14px 2px 14px 14px}
.chat-msg .msg-time{font-family:'JetBrains Mono',monospace;font-size:9px;opacity:.35;margin-top:4px;display:block;color:#ccc}
.chat-typing{align-self:flex-start;padding:11px 18px;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.06);border-radius:2px 14px 14px 14px;display:none;position:relative;z-index:1}
.chat-typing span{display:inline-block;width:6px;height:6px;background:rgba(255,150,80,.6);border-radius:50%;margin:0 2px;animation:typDot 1.2s infinite}
.chat-typing span:nth-child(2){animation-delay:.2s}
.chat-typing span:nth-child(3){animation-delay:.4s}
@keyframes typDot{0%,60%,100%{transform:translateY(0);opacity:.3}30%{transform:translateY(-6px);opacity:1}}
/* Chat generated images */
.chat-img{max-width:85%;align-self:flex-start;position:relative;z-index:1}
.chat-img canvas{width:100%;border-radius:8px;border:1px solid rgba(255,255,255,.08)}
.chat-img .img-label{font-family:'JetBrains Mono',monospace;font-size:9px;color:rgba(255,255,255,.3);margin-top:4px;text-align:center}
.chat-input{display:flex;gap:0;border-top:1px solid rgba(255,255,255,.06);padding:10px 12px;background:#0d0d18;align-items:center}
.chat-upload-btn{width:36px;height:36px;display:flex;align-items:center;justify-content:center;font-size:16px;cursor:pointer;opacity:.5;transition:opacity .3s;flex-shrink:0;border-radius:8px}
.chat-upload-btn:hover{opacity:1;background:rgba(255,255,255,.05)}
.chat-input input{flex:1;padding:10px 14px;border:1px solid rgba(255,255,255,.1);font-size:13px;font-family:'Outfit',sans-serif;outline:none;background:rgba(255,255,255,.05);transition:border .3s;color:#e8ddd4;border-radius:8px 0 0 8px}
.chat-input input::placeholder{color:rgba(255,255,255,.25)}
.chat-input input:focus{border-color:rgba(255,120,50,.4)}
.chat-input button{padding:10px 18px;background:linear-gradient(135deg,#b34a1e,#8c3214);color:#f5e8df;border:none;font-size:12px;font-weight:600;letter-spacing:1px;transition:all .3s;border-radius:0 8px 8px 0}
.chat-input button:hover{background:linear-gradient(135deg,#cc5522,#a0401a)}
.chat-lock{padding:28px;text-align:center;flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:10px;position:relative;z-index:1}
.chat-lock-icon{font-size:40px;opacity:.3}
.chat-lock h5{font-size:14px;font-weight:700;letter-spacing:2px;text-transform:uppercase;color:#e8ddd4}
.chat-lock p{font-size:12px;color:rgba(255,255,255,.35);line-height:1.6}

/* RESPONSIVE */
@media(max-width:1024px){.p-grid,.blog-grid{grid-template-columns:repeat(2,1fr)}.about-sec{grid-template-columns:1fr;gap:40px}.ft-inner{grid-template-columns:1fr 1fr}.dash-grid{grid-template-columns:repeat(2,1fr)}}
@media(max-width:768px){.h-inner{padding:0 20px}nav{display:none}.hamburger{display:flex}.p-grid,.blog-grid{grid-template-columns:repeat(2,1fr);gap:10px;padding:0 16px 60px}.sec-h{padding:60px 20px 36px}.about-sec{padding:0 20px 60px}.hero-star-wrap{width:160px;height:160px}.ft-inner{grid-template-columns:1fr;gap:28px}footer{padding:48px 20px 0}.c-drawer{width:100%;right:-100%}.p-add{opacity:1;transform:translateY(0)}.fr{grid-template-columns:1fr}.adm{width:100%;max-height:100vh;height:100vh}.api{grid-template-columns:34px 50px 1fr 60px 40px!important}.api .st{display:none}.dash-grid{grid-template-columns:1fr 1fr}.member-item{grid-template-columns:1fr 1fr}.blog-grid{grid-template-columns:1fr}.user-name-badge{display:none!important}}
@media(max-width:480px){.chat-panel{right:0;left:0;bottom:0;width:100%;max-height:100vh;border:none;border-radius:0}.chat-fab{bottom:16px;right:16px;width:50px;height:50px;font-size:20px}}

/* Star particles for chat */
@keyframes floatStar{0%{transform:translateY(0) scale(1);opacity:.6}50%{transform:translateY(-20px) scale(1.2);opacity:1}100%{transform:translateY(-40px) scale(.8);opacity:0}}
.chat-star{position:absolute;width:3px;height:3px;background:#fff;border-radius:50%;animation:floatStar 3s infinite;z-index:0;pointer-events:none}

/* SEO Blog responsive */
@media(max-width:768px){#seoBlogSection{padding:0 16px 16px}#seoBlogGrid{grid-template-columns:1fr!important;gap:10px}}

/* Contact form */
.contact-form{margin-top:24px;display:flex;flex-direction:column;gap:12px}
.contact-form input,.contact-form textarea{width:100%;padding:14px;background:var(--bg2);border:1px solid var(--border);color:var(--text);font-family:'Outfit',sans-serif;font-size:14px;outline:none;transition:border .3s}
.contact-form input:focus,.contact-form textarea:focus{border-color:rgba(255,255,255,.2)}
.contact-form textarea{min-height:100px;resize:vertical}
.contact-send{padding:14px;background:var(--text);color:var(--bg);border:none;font-size:11px;font-weight:600;letter-spacing:3px;text-transform:uppercase;transition:all .3s;cursor:pointer}
.contact-send:hover{opacity:.85}
</style>
</head>
<body>

<!-- STAR FIELD -->
<canvas id="starField"></canvas>

<!-- SITE LOCK SCREEN -->
<div class="site-lock" id="siteLock">
  <div class="site-lock-inner">
    <svg viewBox="0 0 500 500"><g transform="translate(250,250)"><polygon points="0,-185 38,-62 155,-95 72,-12 120,105 8,52 -95,130 -52,18 -170,-55 -48,-52" fill="#F5F0EB"/><polygon points="5,-120 30,-42 105,-60 52,-5 82,72 10,36 -60,88 -35,14 -115,-32 -32,-35" fill="#222"/><polygon points="0,-35 22,0 0,35 -22,0" fill="#F5F0EB"/></g></svg>
    <h2>Calejon</h2>
    <div class="sl-sub">Headwear Co. â€” Private Access</div>
    <div class="sl-input-wrap" id="slInputWrap">
      <input class="sl-digit" id="sl1" type="password" maxlength="1" inputmode="numeric" pattern="[0-9]*" placeholder="â€¢" oninput="slNext(this,1)" onkeydown="slKey(event,0)" autofocus>
      <input class="sl-digit" id="sl2" type="password" maxlength="1" inputmode="numeric" pattern="[0-9]*" placeholder="â€¢" oninput="slNext(this,2)" onkeydown="slKey(event,1)">
      <input class="sl-digit" id="sl3" type="password" maxlength="1" inputmode="numeric" pattern="[0-9]*" placeholder="â€¢" oninput="slNext(this,3)" onkeydown="slKey(event,2)">
      <input class="sl-digit" id="sl4" type="password" maxlength="1" inputmode="numeric" pattern="[0-9]*" placeholder="â€¢" oninput="slCheck()" onkeydown="slKey(event,3)">
    </div>
    <button class="sl-btn" onclick="slCheck()">GiriÅŸ</button>
    <div class="sl-err" id="slErr"></div>
    <div class="sl-hint">ÅŸifre gerekli</div>
  </div>
</div>

<!-- TICKER -->
<div class="ticker"><div class="ticker-track"><span>Ãœcretsiz Kargo 500â‚º Ãœzeri</span><span>Yeni Koleksiyon</span><span>TÃ¼rkiye Geneli Teslimat</span><span>%100 Premium Kalite</span><span>1-3 Ä°ÅŸ GÃ¼nÃ¼ Kargo</span><span>30 GÃ¼n Ä°ade HakkÄ±</span><span>Ãœcretsiz Kargo 500â‚º Ãœzeri</span><span>Yeni Koleksiyon</span><span>TÃ¼rkiye Geneli Teslimat</span><span>%100 Premium Kalite</span><span>1-3 Ä°ÅŸ GÃ¼nÃ¼ Kargo</span><span>30 GÃ¼n Ä°ade HakkÄ±</span></div></div>

<!-- HEADER -->
<header>
  <div class="h-inner">
    <div class="logo-a" onclick="go('home')">
      <svg class="logo-star" viewBox="0 0 500 500"><g transform="translate(250,240)"><polygon points="0,-185 38,-62 155,-95 72,-12 120,105 8,52 -95,130 -52,18 -170,-55 -48,-52" fill="#e8ddd4" stroke="#c0b8a8" stroke-width="2"/><polygon points="5,-120 30,-42 105,-60 52,-5 82,72 10,36 -60,88 -35,14 -115,-32 -32,-35" fill="#2a2a3a" stroke="#3a3a50" stroke-width="1"/><polygon points="0,-35 22,0 0,35 -22,0" fill="#e8ddd4"/><circle cx="0" cy="0" r="5" fill="#2a2a3a"/></g></svg>
      <span class="logo-t">Calejon</span>
    </div>
    <nav>
      <a onclick="go('home')" data-i18n="nav_home">Ana Sayfa</a>
      <a onclick="go('shop')" data-i18n="nav_shop">MaÄŸaza</a>
      <a onclick="go('contact')" data-i18n="nav_contact">Ä°letiÅŸim</a>
      <a onclick="handleUserBtn()" data-i18n="nav_account">HesabÄ±m</a>
    </nav>
    <div class="h-right">
      <button class="lang-btn" id="langBtn" onclick="toggleLang()" title="TR / EN">TR</button>
      <span class="user-name-badge" id="userNameBadge"></span>
      <div style="position:relative">
        <button class="user-btn" id="userBtn" onclick="handleUserBtn()">ğŸ‘¤</button>
        <div class="user-dropdown" id="userDd">
          <div class="ud-name" id="udName"></div>
          <a onclick="go('account');closeUd()">HesabÄ±m</a>
          <a onclick="logoutUser()">Ã‡Ä±kÄ±ÅŸ Yap</a>
        </div>
      </div>
      <button class="cart-btn" onclick="toggleCart()">
        <span>ğŸ›’</span>
        <span class="cart-badge" id="cartBadge">0</span>
      </button>
      <button class="hamburger" onclick="toggleMob()"><span></span><span></span><span></span></button>
    </div>
  </div>
</header>

<!-- MOBILE NAV -->
<div class="mob-nav" id="mobNav">
  <button class="mob-close" onclick="toggleMob()">âœ•</button>
  <a onclick="go('home');toggleMob()" data-i18n="nav_home">Ana Sayfa</a>
  <a onclick="go('shop');toggleMob()" data-i18n="nav_shop">MaÄŸaza</a>
  <a onclick="go('contact');toggleMob()" data-i18n="nav_contact">Ä°letiÅŸim</a>
  <a onclick="handleUserBtn();toggleMob()" data-i18n="nav_account">HesabÄ±m</a>
  <a onclick="toggleLang();toggleMob()" id="mobLangLink">ğŸŒ English</a>
</div>

<!-- ===== HOME ===== -->
<div id="pg-home" style="position:relative;z-index:1">
  <section class="hero">
    <div class="hero-bg"></div>
    <div class="hero-c">
      <div class="hero-star-wrap">
        <svg viewBox="0 0 500 500" width="100%" height="100%"><g transform="translate(250,250)"><polygon points="0,-185 38,-62 155,-95 72,-12 120,105 8,52 -95,130 -52,18 -170,-55 -48,-52" fill="#e8ddd4" stroke="#c0b8a8" stroke-width="2.5"/><polygon points="5,-120 30,-42 105,-60 52,-5 82,72 10,36 -60,88 -35,14 -115,-32 -32,-35" fill="#1a1c2e" stroke="#2a2c45" stroke-width="1"/><polygon points="0,-35 22,0 0,35 -22,0" fill="#e8ddd4"/><circle cx="0" cy="0" r="5" fill="#1a1c2e"/></g></svg>
      </div>
      <h1>CALEJON</h1>
      <p data-i18n="hero_sub">Headwear Collection â€” Est. 2025</p>
      <button class="hero-cta" onclick="go('shop')" data-i18n="hero_cta">Koleksiyonu KeÅŸfet</button>
    </div>
  </section>
  <div class="sec-h"><div class="bar"></div><h2 data-i18n="sec_new">Yeni Sezon</h2><p data-i18n="sec_premium">Premium Headwear</p></div>
  <div class="p-grid" id="homeGrid"></div>
</div>

<!-- SHOP --><div class="pg pg-wide" id="pg-shop"><span class="pg-back" onclick="go('home')" data-i18n="back">â† Geri</span><div class="sec-h" style="padding-top:0"><div class="bar"></div><h2 data-i18n="shop_h">TÃ¼m ÃœrÃ¼nler</h2><p data-i18n="shop_sub">Koleksiyon</p></div><div class="p-grid" id="shopGrid" style="max-width:100%;padding:0 0 40px"></div></div>

<!-- BLOG LIST --><div class="pg pg-wide" id="pg-blog"><span class="pg-back" onclick="go('home')" data-i18n="back">â† Geri</span><div class="sec-h" style="padding-top:0"><div class="bar"></div><h2>Blog</h2><p data-i18n="blog_seo_label">Haberler &amp; Ä°lham</p></div><div class="blog-grid" id="blogGrid" style="max-width:100%;padding:0 0 40px"></div></div>

<!-- BLOG DETAIL --><div class="pg" id="pg-blogdetail"><span class="pg-back" onclick="go('home')" data-i18n="back">â† Geri</span><div class="blog-detail" id="blogDetail"></div></div>

<!-- ABOUT --><div class="pg" id="pg-about"><span class="pg-back" onclick="go('home')" data-i18n="back">â† Geri</span><h2 data-i18n="about_h">HakkÄ±mÄ±zda</h2><div id="aboutFullTxt"><p data-i18n="about_p1">Calejon, 2025 yÄ±lÄ±nda TÃ¼rkiye'de kurulan bir premium headwear markasÄ±dÄ±r. Sokak kÃ¼ltÃ¼rÃ¼nÃ¼n enerjisini, minimalist tasarÄ±m anlayÄ±ÅŸÄ±yla birleÅŸtiriyoruz.</p><p data-i18n="about_p2">MarkamÄ±zÄ±n adÄ± "Calejon" â€” dar geÃ§it, sokak anlamÄ±na gelir. TÄ±pkÄ± dar sokaklardaki sanatsal ruh gibi, biz de her ÅŸapkada bir hikaye anlatÄ±yoruz.</p><h3 data-i18n="about_mission">Misyonumuz</h3><p data-i18n="about_mission_p">Premium kalitede, Ã¶zgÃ¼n tasarÄ±mlÄ± ÅŸapkalar Ã¼reterek; sokak modasÄ±nÄ± yeniden tanÄ±mlamak.</p><h3 data-i18n="about_vision">Vizyonumuz</h3><p data-i18n="about_vision_p">TÃ¼rkiye'den dÃ¼nyaya uzanan, kÃ¼resel streetwear sahnesinde tanÄ±nan bir headwear markasÄ± olmak.</p></div></div>

<!-- CONTACT --><div class="pg" id="pg-contact"><span class="pg-back" onclick="go('home')" data-i18n="back">â† Geri</span><h2 data-i18n="contact_h">Ä°letiÅŸim</h2><p data-i18n="contact_p">SorularÄ±nÄ±z iÃ§in bize ulaÅŸÄ±n. En kÄ±sa sÃ¼rede dÃ¶nÃ¼ÅŸ yapacaÄŸÄ±z.</p><h3 style="font-size:14px;font-weight:600;letter-spacing:3px;text-transform:uppercase;margin:28px 0 8px" data-i18n="contact_email_h">E-posta</h3><p id="contactEmail">info@calejon.com</p><h3 style="font-size:14px;font-weight:600;letter-spacing:3px;text-transform:uppercase;margin:28px 0 8px" data-i18n="contact_social_h">Sosyal Medya</h3><p id="contactSocial">Instagram: @calejon</p><h3 style="font-size:14px;font-weight:600;letter-spacing:3px;text-transform:uppercase;margin:28px 0 8px" data-i18n="contact_addr_h">Adres</h3><p id="contactAddr">TÃ¼rkiye</p><div class="contact-form"><input type="text" data-i18n="contact_name_ph" placeholder="AdÄ±nÄ±z" id="cfName"><input type="email" data-i18n="contact_email_ph" placeholder="E-posta adresiniz" id="cfEmail"><textarea data-i18n="contact_msg_ph" placeholder="MesajÄ±nÄ±z" id="cfMsg"></textarea><button class="contact-send" onclick="sendMsg()" data-i18n="contact_send">GÃ¶nder</button></div></div>

<!-- ACCOUNT --><div class="pg" id="pg-account"><span class="pg-back" onclick="go('home')" data-i18n="back">â† Geri</span><h2 data-i18n="account_h">HesabÄ±m</h2><div id="accountContent"></div></div>

<!-- KVKK --><div class="pg" id="pg-kvkk"><span class="pg-back" onclick="go('home')" data-i18n="back">â† Geri</span><h2 data-i18n="kvkk_h">KVKK AydÄ±nlatma Metni</h2><div id="kvkkContent"><h3>1. Veri Sorumlusu</h3><p>Calejon Headwear Co. olarak, 6698 sayÄ±lÄ± KVKK kapsamÄ±nda, kiÅŸisel verilerinizin korunmasÄ±na Ã¶nem vermekteyiz.</p><h3>2. Toplanan Veriler</h3><p>Kimlik, iletiÅŸim, alÄ±ÅŸveriÅŸ ve dijital iz bilgileri.</p><h3>3. HaklarÄ±nÄ±z</h3><p>KVKK 11. madde uyarÄ±nca tÃ¼m haklara sahipsiniz. Talepler: info@calejon.com</p></div></div>

<!-- PRIVACY --><div class="pg" id="pg-privacy"><span class="pg-back" onclick="go('home')" data-i18n="back">â† Geri</span><h2 data-i18n="privacy_h">Gizlilik PolitikasÄ±</h2><div id="privContent"><h3>1. Genel</h3><p>GizliliÄŸinize saygÄ± duyuyoruz.</p><h3>2. GÃ¼venlik</h3><p>SSL ÅŸifreleme kullanÄ±lmaktadÄ±r.</p><h3>3. Ä°ade</h3><p>14 gÃ¼n iÃ§inde iade hakkÄ±.</p></div></div>

<!-- SEO BLOG (bottom, collapsible) -->
<div id="seoBlogSection" style="max-width:1440px;margin:0 auto;padding:0 48px 20px;position:relative;z-index:1">
  <button id="seoBlogToggle" onclick="toggleSeoBlog()" style="width:100%;padding:14px;background:transparent;border:1px solid var(--border);color:var(--text3);font-family:'JetBrains Mono',monospace;font-size:10px;letter-spacing:3px;text-transform:uppercase;transition:all .3s;cursor:pointer">
    â–¼ Blog â€” <span data-i18n="blog_seo_label">Haberler &amp; Ä°lham</span>
  </button>
  <div id="seoBlogContent" style="display:none;padding-top:16px">
    <div id="seoBlogGrid" style="display:grid;grid-template-columns:repeat(3,1fr);gap:16px;font-size:12px;color:var(--text2);line-height:1.7"></div>
  </div>
</div>

<!-- FOOTER -->
<footer>
  <div class="ft-inner">
    <div class="ft-brand"><div class="ft-logo">CALEJON</div><p>Premium headwear markasÄ±. Sokak kÃ¼ltÃ¼rÃ¼ ve bireysel tarzÄ±n kesiÅŸim noktasÄ±. Est. 2025.</p></div>
    <div class="ft-col"><h4 data-i18n="nav_shop">MaÄŸaza</h4><a onclick="go('shop')" data-i18n="shop_h">TÃ¼m ÃœrÃ¼nler</a></div>
    <div class="ft-col"><h4 data-i18n="ft_info">Bilgi</h4><a onclick="go('about')" data-i18n="ft_about">HakkÄ±mÄ±zda</a><a onclick="go('contact')" data-i18n="ft_contact">Ä°letiÅŸim</a><a onclick="go('kvkk')">KVKK</a><a onclick="go('privacy')" data-i18n="ft_privacy">Gizlilik</a></div>
    <div class="ft-col"><h4 data-i18n="ft_comm">Ä°letiÅŸim</h4><a>info@calejon.com</a><a>Instagram: @calejon</a></div>
  </div>
  <div class="ft-mid"><button class="ft-admin" onclick="openAdmLogin()">âš™ YÃ–NETÄ°M PANELÄ°</button></div>
  <div class="ft-bottom"><span>Â© 2025 Calejon Headwear Co.</span><span>Made with âœ¦</span></div>
</footer>

<!-- CART DRAWER -->
<div class="c-overlay" id="cOv" onclick="toggleCart()"></div>
<div class="c-drawer" id="cDr">
  <div class="c-head"><h3>Sepet</h3><button class="c-close" onclick="toggleCart()">âœ•</button></div>
  <div class="c-items" id="cItems"><div class="c-empty">Sepetiniz boÅŸ</div></div>
  <div class="c-foot"><div class="c-total"><span>Toplam</span><span id="cTotal">â‚º0</span></div><button class="c-checkout" onclick="doCheckout()">SipariÅŸi Tamamla</button></div>
</div>

<!-- EMAIL POPUP -->
<div class="modal-ov" id="epOv">
  <div class="modal-box email-popup">
    <button class="modal-close" onclick="closeEp()" style="color:var(--bg)">âœ•</button>
    <div class="ep-top">
      <svg viewBox="0 0 500 500"><g transform="translate(250,250)"><polygon points="0,-185 38,-62 155,-95 72,-12 120,105 8,52 -95,130 -52,18 -170,-55 -48,-52" fill="#F5F0EB"/><polygon points="5,-120 30,-42 105,-60 52,-5 82,72 10,36 -60,88 -35,14 -115,-32 -32,-35" fill="#222"/><polygon points="0,-35 22,0 0,35 -22,0" fill="#F5F0EB"/></g></svg>
      <h3>CALEJON</h3>
      <p>%10 Ä°NDÄ°RÄ°M</p>
      <div class="ep-sub">Ä°lk SipariÅŸinize Ã–zel</div>
    </div>
    <div class="ep-bottom">
      <p>E-posta adresinizi bÄ±rakÄ±n, ilk sipariÅŸinizde geÃ§erli %10 indirim kodunuzu hemen alÄ±n!</p>
      <div class="ep-input">
        <input type="email" id="epEmail" placeholder="E-posta adresiniz" onkeydown="if(event.key==='Enter')submitEp()">
        <button onclick="submitEp()">GÃ¶nder</button>
      </div>
      <button class="ep-skip" onclick="closeEp()">HayÄ±r, teÅŸekkÃ¼rler</button>
    </div>
  </div>
</div>

<!-- AUTH MODAL -->
<div class="modal-ov" id="authOv">
  <div class="modal-box auth-box">
    <button class="modal-close" onclick="closeAuth()">âœ•</button>
    <div id="authRegister">
      <h3>Ãœye Ol</h3>
      <div class="fg"><label>Ad Soyad</label><input id="regName" placeholder="AdÄ±nÄ±z SoyadÄ±nÄ±z"></div>
      <div class="fg"><label>E-posta</label><input id="regEmail" type="email" placeholder="ornek@email.com"></div>
      <div class="fg"><label>Åifre</label><input id="regPass" type="password" placeholder="En az 4 karakter"></div>
      <button class="auth-btn" onclick="doRegister()">Ãœye Ol</button>
      <div class="auth-switch">Zaten Ã¼ye misiniz? <span onclick="toggleAuthMode()">GiriÅŸ Yap</span></div>
      <div class="auth-err" id="regErr"></div>
    </div>
    <div id="authLogin" style="display:none">
      <h3>GiriÅŸ Yap</h3>
      <div class="fg"><label>E-posta</label><input id="loginEmail" type="email" placeholder="ornek@email.com"></div>
      <div class="fg"><label>Åifre</label><input id="loginPassU" type="password" placeholder="Åifreniz" onkeydown="if(event.key==='Enter')doUserLogin()"></div>
      <button class="auth-btn" onclick="doUserLogin()">GiriÅŸ Yap</button>
      <div class="auth-switch">HesabÄ±nÄ±z yok mu? <span onclick="toggleAuthMode()">Ãœye Ol</span></div>
      <div class="auth-err" id="loginErrU"></div>
    </div>
  </div>
</div>

<!-- ADMIN LOGIN -->
<div class="login-ov" id="loginOv">
  <div class="login-box">
    <h3>YÃ¶netim</h3>
    <input type="password" id="loginPass" placeholder="Åifre" onkeydown="if(event.key==='Enter')tryAdmLogin()">
    <button class="lb" onclick="tryAdmLogin()">GiriÅŸ</button>
    <button class="lc" onclick="closeAdmLogin()">Ä°ptal</button>
    <div class="login-err" id="loginErr">YanlÄ±ÅŸ ÅŸifre</div>
  </div>
</div>

<!-- ADMIN PANEL -->
<div class="adm-ov" id="admOv">
  <div class="adm">
    <div class="adm-h"><h3>YÃ¶netim Paneli</h3><button class="adm-x" onclick="closeAdm()">âœ•</button></div>
    <div class="adm-body">
      <div class="adm-tabs">
        <button class="adm-tab active" onclick="admTab('dash',this)">Dashboard</button>
        <button class="adm-tab" onclick="admTab('prods',this)">ÃœrÃ¼nler</button>
        <button class="adm-tab" onclick="admTab('blog',this)">Blog</button>
        <button class="adm-tab" onclick="admTab('members',this)">Ãœyeler</button>
        <button class="adm-tab" onclick="admTab('emails',this)">E-postalar</button>
        <button class="adm-tab" onclick="admTab('msgs',this)">Mesajlar</button>
        <button class="adm-tab" onclick="admTab('about',this)">Ä°Ã§erik</button>
        <button class="adm-tab" onclick="admTab('settings',this)">Ayarlar</button>
      </div>

      <!-- DASHBOARD -->
      <div class="adm-sec active" id="adm-dash">
        <div class="dash-grid" id="dashGrid"></div>
        <h4 style="font-size:14px;font-weight:700;letter-spacing:2px;text-transform:uppercase;margin-bottom:16px">ÃœrÃ¼n Sepet Analizi</h4>
        <table class="ct-table" id="cartTrackTable"></table>
      </div>

      <!-- PRODUCTS -->
      <div class="adm-sec" id="adm-prods">
        <div class="apl" id="admProdList"></div>
        <div class="pef" id="prodEdit">
          <h4 id="peTitle">DÃ¼zenle</h4>

          <!-- IMAGE UPLOAD -->
          <div class="img-upload">
            <label>ÃœrÃ¼n GÃ¶rseli</label>
            <div class="img-zone" id="imgZone" ondragover="event.preventDefault();this.classList.add('dragover')" ondragleave="this.classList.remove('dragover')" ondrop="handleDrop(event)">
              <div class="img-zone-icon">ğŸ“·</div>
              <div class="img-zone-title">ÃœrÃ¼n gÃ¶rseli ekleyin</div>
              <div class="img-zone-hint">SÃ¼rÃ¼kle-bÄ±rak veya aÅŸaÄŸÄ±daki seÃ§enekleri kullanÄ±n</div>
              <div class="img-zone-actions">
                <label class="img-file-btn">ğŸ“ Dosya SeÃ§<input type="file" id="peImg" accept="image/jpeg,image/png,image/webp,image/gif" onchange="handleFileBtn(this)"></label>
                <span class="img-or">veya</span>
                <label class="img-file-btn" style="background:none;color:var(--text);border:1.5px solid var(--text)" onclick="toggleUrlInput()">ğŸ”— URL YapÄ±ÅŸtÄ±r</label>
              </div>
              <div class="img-url-wrap" id="imgUrlWrap" style="display:none;margin:14px auto 0">
                <input type="text" id="imgUrlInput" placeholder="https://ornek.com/gorsel.jpg" onkeydown="if(event.key==='Enter')loadImgUrl()">
                <button onclick="loadImgUrl()">YÃ¼kle</button>
              </div>
            </div>
            <div class="img-prev" id="imgPrev">
              <div class="img-prev-inner">
                <div class="img-prev-pic"><img id="imgPrevSrc" src=""></div>
                <div class="img-prev-details">
                  <div class="img-prev-name" id="imgPrevName">gorsel.jpg</div>
                  <div class="img-prev-size" id="imgPrevSize">128 KB</div>
                  <div class="img-prev-bar"><div class="fill" style="width:100%"></div></div>
                  <div class="img-prev-btns">
                    <label class="img-change-btn">ğŸ”„ DeÄŸiÅŸtir<input type="file" accept="image/jpeg,image/png,image/webp,image/gif" onchange="handleFileBtn(this)"></label>
                    <button class="img-remove-btn" onclick="removeImg()">ğŸ—‘ KaldÄ±r</button>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="fr"><div class="fg"><label>Kod</label><input id="peCode" readonly style="background:var(--bg2)"></div><div class="fg"><label>Fiyat (â‚º)</label><input type="number" id="pePrice"></div></div>
          <div class="fg"><label>ÃœrÃ¼n AdÄ±</label><input id="peName"></div>
          <div class="fg"><label>AÃ§Ä±klama</label><textarea id="peDesc"></textarea></div>
          <div class="fr"><div class="fg"><label>Renk</label><input id="peColor"></div><div class="fg"><label>Durum</label><select id="peStatus"><option value="active">Aktif</option><option value="soldout">TÃ¼kendi</option><option value="hidden">Gizli</option></select></div></div>
          <div class="fg"><label>Etiket</label><input id="peBadge" placeholder="YENÄ°, SINIRLI..."></div>
          <div style="display:flex;gap:10px;margin-top:8px"><button class="btn-s" onclick="saveProd()">Kaydet</button><button class="btn-d" onclick="cancelProd()">Ä°ptal</button></div>
        </div>
      </div>

      <!-- BLOG ADMIN -->
      <div class="adm-sec" id="adm-blog">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:16px">
          <h4 style="font-size:14px;font-weight:700;letter-spacing:2px;text-transform:uppercase">Blog YazÄ±larÄ±</h4>
          <button class="btn-g" onclick="newBlogPost()">+ Yeni YazÄ±</button>
        </div>
        <div id="admBlogList"></div>
        <div class="pef" id="blogEdit">
          <h4 id="beTitle">Blog YazÄ±sÄ±</h4>
          <div class="fg"><label>BaÅŸlÄ±k</label><input id="beHeadline"></div>
          <div class="fr"><div class="fg"><label>Kategori</label><input id="beCat" placeholder="Streetwear, Koleksiyon..."></div><div class="fg"><label>Tarih</label><input id="beDate" type="date"></div></div>
          <div class="fg"><label>Ã–zet (Kart gÃ¶rÃ¼nÃ¼mÃ¼)</label><textarea id="beExcerpt" rows="3"></textarea></div>
          <div class="fg"><label>Ä°Ã§erik (HTML destekli)</label><textarea id="beContent" rows="10"></textarea></div>
          <div class="fg"><label>Durum</label><select id="beStatus"><option value="published">YayÄ±nda</option><option value="draft">Taslak</option></select></div>
          <div style="display:flex;gap:10px;margin-top:8px"><button class="btn-s" onclick="saveBlog()">Kaydet</button><button class="btn-d" onclick="cancelBlog()">Ä°ptal</button><button class="btn-d" onclick="deleteBlog()" style="margin-left:auto">Sil</button></div>
        </div>
      </div>

      <!-- MEMBERS -->
      <div class="adm-sec" id="adm-members">
        <h4 style="font-size:14px;font-weight:700;letter-spacing:2px;text-transform:uppercase;margin-bottom:16px">KayÄ±tlÄ± Ãœyeler</h4>
        <div id="admMemberList"></div>
      </div>

      <!-- EMAILS -->
      <div class="adm-sec" id="adm-emails">
        <h4 style="font-size:14px;font-weight:700;letter-spacing:2px;text-transform:uppercase;margin-bottom:8px">Ä°ndirim E-postalarÄ±</h4>
        <p style="font-size:12px;color:var(--text3);margin-bottom:16px">%10 indirim popup'Ä±ndan toplanan e-postalar</p>
        <div id="admEmailList"></div>
      </div>

      <!-- MESSAGES -->
      <div class="adm-sec" id="adm-msgs">
        <h4 style="font-size:14px;font-weight:700;letter-spacing:2px;text-transform:uppercase;margin-bottom:16px">Gelen Mesajlar</h4>
        <div id="msgList"></div>
      </div>

      <!-- CONTENT -->
      <div class="adm-sec" id="adm-about">
        <div class="fg"><label>Ana Sayfa KÄ±sa Metin</label><textarea id="aaShort" rows="4"></textarea></div>
        <div class="fg"><label>HakkÄ±mÄ±zda Sayfa (HTML)</label><textarea id="aaFull" rows="10"></textarea></div>
        <button class="btn-s" onclick="saveAbout()" style="margin-bottom:28px">HakkÄ±mÄ±zda Kaydet</button>
        <div class="fg"><label>Ä°letiÅŸim E-posta</label><input id="acEmail"></div>
        <div class="fg"><label>Sosyal Medya</label><input id="acSocial"></div>
        <div class="fg"><label>Adres</label><input id="acAddr"></div>
        <button class="btn-s" onclick="saveContactInfo()">Ä°letiÅŸim Kaydet</button>
      </div>

      <!-- SETTINGS -->
      <div class="adm-sec" id="adm-settings">
        <div class="fg"><label>Yeni Admin Åifresi</label><input type="password" id="asPass" placeholder="DeÄŸiÅŸtirmek iÃ§in yazÄ±n"></div>
        <button class="btn-s" onclick="saveSettings()" style="margin-bottom:32px">Kaydet</button>

        <h4 style="font-size:14px;font-weight:700;letter-spacing:2px;text-transform:uppercase;margin-bottom:18px;padding-top:20px;border-top:1px solid var(--border)">AI Sohbet AyarlarÄ±</h4>
        <div class="fg"><label>Google AI Studio API Key</label><input type="password" id="asApiKey" placeholder="AIzaSy..."></div>
        <div class="fg"><label>AI Model</label><select id="asModel"><option value="gemini-2.0-flash">Gemini 2.0 Flash (HÄ±zlÄ±)</option><option value="gemini-2.0-flash-lite">Gemini 2.0 Flash Lite</option><option value="gemini-1.5-pro">Gemini 1.5 Pro</option></select></div>
        <div class="fg"><label>Sistem MesajÄ± (Opsiyonel)</label><textarea id="asSysMsg" rows="3" placeholder="AI'ya rol veya talimat verin...">Sen Calejon markasÄ±nÄ±n Mars temalÄ± flÃ¶rtÃ¶z asistanÄ±sÄ±n. TÃ¼rkÃ§e cevap ver, kÄ±sa ve tatlÄ± ol. Hafif flÃ¶rt yap, emoji kullan. "Askim" yazÄ±lÄ±rsa "Haydi koÃ§um yaylan!" de.</textarea></div>
        <button class="btn-s" onclick="saveAiSettings()" style="margin-bottom:20px">AI AyarlarÄ±nÄ± Kaydet</button>

        <h4 style="font-size:14px;font-weight:700;letter-spacing:2px;text-transform:uppercase;margin-bottom:12px;padding-top:20px;border-top:1px solid var(--border)">Cihaz Kilidi</h4>
        <p style="font-size:12px;color:var(--text3);margin-bottom:14px;line-height:1.6">Sohbeti sadece tek bir cihazda kullanÄ±labilir yapar. Ä°lk kullanÄ±lan cihaz otomatik kilitlenir.</p>
        <div style="display:flex;align-items:center;gap:12px;margin-bottom:14px">
          <div style="font-size:13px;font-weight:600;letter-spacing:1px" id="deviceStatus">â€”</div>
        </div>
        <div style="display:flex;gap:10px">
          <button class="btn-s" onclick="lockThisDevice()">Bu CihazÄ± Kilitle</button>
          <button class="btn-d" onclick="resetDeviceLock()">Kilidi SÄ±fÄ±rla</button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- AI CHAT -->
<button class="chat-fab" id="chatFab" onclick="toggleChat()">âœ¦</button>
<div class="chat-panel" id="chatPanel">
  <div class="chat-hdr">
    <div class="chat-hdr-left">
      <div class="chat-hdr-dot" style="background:#e85d30"></div>
      <div>
        <h4>Mars AI âœ¦</h4>
        <div class="chat-hdr-sub">uzaydan selamlar ğŸª</div>
      </div>
    </div>
    <button onclick="toggleChat()">âœ•</button>
  </div>
  <div class="chat-msgs" id="chatMsgs">
    <div id="chatLock" class="chat-lock" style="display:none">
      <div class="chat-lock-icon">ğŸ”’</div>
      <h5>EriÅŸim Engellendi</h5>
      <p>Bu sohbet sadece yetkilendirilmiÅŸ cihazdan kullanÄ±labilir.</p>
    </div>
    <div id="chatBody">
      <div class="chat-msg bot">Hey! Ben Calejon'un Mars'tan gelen asistanÄ±yÄ±m ğŸªâœ¦ Sana nasÄ±l yardÄ±mcÄ± olabilirim gÃ¼zellik?<span class="msg-time">ÅŸimdi</span></div>
    </div>
    <div class="chat-typing" id="chatTyping"><span></span><span></span><span></span></div>
  </div>
  <div class="chat-input" id="chatInputArea">
    <label class="chat-upload-btn" title="Resim yÃ¼kle">
      ğŸ“·
      <input type="file" id="chatFileIn" accept="image/*" onchange="handleChatImage(this)" style="display:none">
    </label>
    <input type="text" id="chatIn" placeholder="Mars'a mesaj yaz..." onkeydown="if(event.key==='Enter')sendChat()">
    <button onclick="sendChat()">ğŸš€</button>
  </div>
</div>

<div class="toast" id="toast"></div>

<script>
const STAR=`<svg viewBox="0 0 500 500"><g transform="translate(250,250)"><polygon points="0,-185 38,-62 155,-95 72,-12 120,105 8,52 -95,130 -52,18 -170,-55 -48,-52" fill="#2a2a3a"/><polygon points="5,-120 30,-42 105,-60 52,-5 82,72 10,36 -60,88 -35,14 -115,-32 -32,-35" fill="#1a1a2a"/><polygon points="0,-35 22,0 0,35 -22,0" fill="#2a2a3a"/></g></svg>`;

// ===== SITE LOCK =====
const SITE_PW='3111';
let siteUnlocked=false;

function slNext(el,nextIdx){
  if(el.value.length===1&&nextIdx<=3){
    document.getElementById('sl'+(nextIdx+1)).focus();
  }
}
function slKey(e,idx){
  if(e.key==='Backspace'&&!e.target.value&&idx>0){
    document.getElementById('sl'+(idx)).focus();
  }
  if(e.key==='Enter')slCheck();
}
function slCheck(){
  const code=document.getElementById('sl1').value+document.getElementById('sl2').value+document.getElementById('sl3').value+document.getElementById('sl4').value;
  if(code.length<4)return;
  if(code===SITE_PW){
    siteUnlocked=true;
    document.getElementById('siteLock').classList.add('unlocked');
    document.body.style.overflow='';
    setTimeout(()=>{document.getElementById('siteLock').style.display='none'},600);
    showEp();
  }else{
    document.getElementById('slErr').textContent='YanlÄ±ÅŸ ÅŸifre';
    document.getElementById('slInputWrap').style.animation='lockShake .4s ease';
    setTimeout(()=>{
      document.getElementById('slInputWrap').style.animation='';
      document.getElementById('sl1').value='';document.getElementById('sl2').value='';
      document.getElementById('sl3').value='';document.getElementById('sl4').value='';
      document.getElementById('sl1').focus();
    },500);
  }
}

// ===== STATE =====
let adminPw='calejon2025',admLoggedIn=false,editIdx=-1,blogEditIdx=-1;
let cart=[],messages=[],discountEmails=[],cartTrack={};
let currentUser=null; // {name,email,pass,date,orders}
let users=[]; // registered users

const products=[
  {code:'CLJ-001',name:'001',price:999,color:'Siyah',desc:'Asimetrik yÄ±ldÄ±z logolu klasik ÅŸapka. %100 pamuk.',badge:'YENÄ°',status:'active',img:''},
  {code:'CLJ-002',name:'002',price:999,color:'Gece Mavisi',desc:'Gece mavisi premium ÅŸapka. AltÄ±n detaylÄ± yÄ±ldÄ±z nakÄ±ÅŸ.',badge:'SINIRLI',status:'active',img:''},
  {code:'CLJ-003',name:'003',price:999,color:'Haki',desc:'Haki yeÅŸil sokak tarzÄ± ÅŸapka. Vintage yÄ±kama efekti.',badge:'',status:'active',img:''},
  {code:'CLJ-004',name:'004',price:999,color:'Beyaz',desc:'Sade beyaz ÅŸapka, ton-sur-ton yÄ±ldÄ±z nakÄ±ÅŸ.',badge:'',status:'active',img:''},
  {code:'CLJ-005',name:'005',price:999,color:'Siyah',desc:'Mat siyah premium ÅŸapka. 3D kabartma yÄ±ldÄ±z logo.',badge:'POPÃœLER',status:'active',img:''},
  {code:'CLJ-006',name:'006',price:999,color:'TaÅŸ Grisi',desc:'Vintage yÄ±kama efektli taÅŸ grisi ÅŸapka.',badge:'',status:'active',img:''},
  {code:'CLJ-007',name:'007',price:999,color:'Siyah/KÄ±rmÄ±zÄ±',desc:'Ã–zel kolaborasyon ÅŸapka. KÄ±rmÄ±zÄ± kontrast dikiÅŸler.',badge:'COLLAB',status:'active',img:''},
  {code:'CLJ-008',name:'008',price:999,color:'Lacivert',desc:'GÃ¼nlÃ¼k kullanÄ±m lacivert ÅŸapka. Flex-fit.',badge:'',status:'active',img:''},
];

let tempImg=''; // temp image base64 for current edit

let blogPosts=[
  {id:1,title:'Calejon 2025 Yaz Koleksiyonu Yolda',cat:'Koleksiyon',date:'2025-06-15',excerpt:'Bu yaz sokaklarÄ± kasÄ±p kavuracak yeni modellerimiz Ã§ok yakÄ±nda sizlerle. Asimetrik yÄ±ldÄ±z temasÄ±nÄ± farklÄ± renk ve dokularda yorumladÄ±k.',content:'<p>2025 yaz sezonu iÃ§in hazÄ±rladÄ±ÄŸÄ±mÄ±z koleksiyon, sokak kÃ¼ltÃ¼rÃ¼nÃ¼n enerjisini yaz gÃ¼neÅŸiyle buluÅŸturuyor.</p><p>Yeni renk paletimiz toprak tonlarÄ±ndan cesur kontrastlara uzanÄ±yor. Her model, Calejon\'un imza asimetrik yÄ±ldÄ±z motifini farklÄ± bir teknikle sunuyor.</p><p>Koleksiyon Temmuz ayÄ±nda tÃ¼m satÄ±ÅŸ kanallarÄ±mÄ±zda yerini alacak. Takipte kalÄ±n!</p>',status:'published'},
  {id:2,title:'Åapka BakÄ±m Rehberi: KapÄ±nÄ±zÄ± Yeni Gibi Tutun',cat:'Rehber',date:'2025-05-20',excerpt:'Premium ÅŸapkanÄ±zÄ±n Ã¶mrÃ¼nÃ¼ uzatmak iÃ§in bilmeniz gereken bakÄ±m ipuÃ§larÄ±. YÄ±kama, saklama ve gÃ¼nlÃ¼k kullanÄ±m tavsiyeleri.',content:'<p>Calejon ÅŸapkanÄ±z premium malzemelerden Ã¼retilmiÅŸtir. DoÄŸru bakÄ±mla yÄ±llarca ilk gÃ¼nkÃ¼ gibi kalabilir.</p><p><strong>YÄ±kama:</strong> Elde, Ä±lÄ±k su ve hafif deterjanla yÄ±kayÄ±n. Makine kullanmayÄ±n.</p><p><strong>Kurutma:</strong> DÃ¼z bir yÃ¼zeyde, doÄŸal ÅŸeklinde kurutun. Kurutma makinesi kullanmayÄ±n.</p><p><strong>Saklama:</strong> Serin, kuru bir yerde, form koruyucu ile saklayÄ±n.</p>',status:'published'},
  {id:3,title:'Sokak Stili: Åapkayla Kombin Ã–nerileri',cat:'Streetwear',date:'2025-04-10',excerpt:'ÅapkanÄ±zÄ± gÃ¼nlÃ¼k kombinlerinize nasÄ±l entegre edebilirsiniz? Ä°lham veren sokak stili Ã¶nerileri.',content:'<p>Åapka, bir aksesuar olmaktan Ã§ok daha fazlasÄ±dÄ±r â€” tarzÄ±nÄ±zÄ±n imzasÄ±dÄ±r.</p><p>Oversize bir hoodie + Calejon cap + cargo pantolon = klasik sokak stili.</p><p>Minimalist bir tiÅŸÃ¶rt + beyaz 004 modeli = clean ve ÅŸÄ±k.</p><p>Deri ceket + siyah 005 modeli = edgy ve gÃ¼Ã§lÃ¼.</p>',status:'published'},
];

products.forEach(p=>{cartTrack[p.code]=Math.floor(Math.random()*24)+2});

// ===== NAVIGATION =====
function go(page){
  document.getElementById('pg-home').style.display='none';
  document.querySelectorAll('.pg').forEach(p=>p.classList.remove('active'));
  if(page==='home'){document.getElementById('pg-home').style.display='';renderHome()}
  else{
    const el=document.getElementById('pg-'+page);
    if(el){el.classList.add('active')}
    if(page==='shop')renderShop();
    if(page==='blog')renderBlogList();
    if(page==='account')renderAccount();
  }
  window.scrollTo({top:0,behavior:'smooth'});
}

// ===== PRODUCTS =====
function cardHTML(p,i){
  if(p.status==='hidden')return'';
  const sold=p.status==='soldout';
  const imgContent=p.img?`<img src="${p.img}" alt="${p.name}">`:'';
  const hasImg=p.img?'has-img':'';
  return`<div class="p-card"${sold?' style="opacity:.55"':''}>
    <div class="p-img ${hasImg}">${STAR}${imgContent}<span class="p-code">${p.code}</span>${p.badge?`<span class="p-badge">${p.badge}</span>`:''}</div>
    <div class="p-info"><div class="p-name">${p.name}</div><div style="font-size:11px;color:var(--text3);margin-bottom:4px">${p.color}</div>
    <div class="p-price">${sold?'TÃ¼kendi':'â‚º'+p.price}</div>
    ${!sold?`<button class="p-add" onclick="event.stopPropagation();addCart(${i})">Sepete Ekle</button>`:''}</div></div>`;
}
function renderHome(){
  document.getElementById('homeGrid').innerHTML=products.filter(p=>p.status!=='hidden').slice(0,4).map(p=>cardHTML(p,products.indexOf(p))).join('');
  renderSeoBlog();
}
function renderSeoBlog(){
  const grid=document.getElementById('seoBlogGrid');
  if(!grid)return;
  grid.innerHTML=blogPosts.filter(b=>b.status==='published').map(b=>`<div style="background:var(--white);border:1px solid var(--border);padding:16px;cursor:pointer;transition:border .3s" onmouseover="this.style.borderColor='rgba(255,255,255,.15)'" onmouseout="this.style.borderColor=''" onclick="viewBlog(${b.id})"><div style="font-weight:600;font-size:13px;margin-bottom:4px;letter-spacing:.5px;color:var(--text)">${b.title}</div><div style="font-family:'JetBrains Mono',monospace;font-size:9px;color:var(--text3);margin-bottom:6px">${formatDate(b.date)} â€¢ ${b.cat}</div><div style="font-size:11.5px;color:var(--text2);line-height:1.65;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden">${b.excerpt}</div></div>`).join('');
}
function renderShop(){document.getElementById('shopGrid').innerHTML=products.map((p,i)=>cardHTML(p,i)).join('')}

// ===== BLOG =====
function blogCardHTML(b){
  return`<div class="blog-card" onclick="viewBlog(${b.id})">
    <div class="blog-thumb">${STAR}<span class="blog-cat">${b.cat}</span></div>
    <div class="blog-body"><div class="blog-date">${formatDate(b.date)}</div><div class="blog-title">${b.title}</div><div class="blog-excerpt">${b.excerpt}</div><span class="blog-read">DevamÄ±nÄ± Oku â†’</span></div></div>`;
}
function renderBlogList(){
  document.getElementById('blogGrid').innerHTML=blogPosts.filter(b=>b.status==='published').map(b=>blogCardHTML(b)).join('');
}
function viewBlog(id){
  const b=blogPosts.find(x=>x.id===id);if(!b)return;
  document.getElementById('blogDetail').innerHTML=`<h2>${b.title}</h2><div class="bd-meta"><span>${b.cat}</span><span>${formatDate(b.date)}</span></div><div class="bd-content">${b.content}</div>`;
  go('blogdetail');
}
function formatDate(d){const dt=new Date(d);return dt.toLocaleDateString('tr-TR',{year:'numeric',month:'long',day:'numeric'})}

// ===== CART =====
function addCart(i){
  const p=products[i];const ex=cart.find(c=>c.code===p.code);
  if(ex)ex.qty++;else cart.push({...p,qty:1});
  cartTrack[p.code]=(cartTrack[p.code]||0)+1;
  updateCart();toast('Sepete eklendi: '+p.name);
}
function qtyCart(code,d){const it=cart.find(c=>c.code===code);if(it){it.qty+=d;if(it.qty<=0)cart=cart.filter(c=>c.code!==code)}updateCart()}
function updateCart(){
  const badge=document.getElementById('cartBadge'),tot=cart.reduce((s,c)=>s+c.qty,0);
  badge.textContent=tot;badge.style.display=tot>0?'flex':'none';
  const ct=document.getElementById('cItems');
  if(!cart.length){ct.innerHTML='<div class="c-empty">Sepetiniz boÅŸ</div>'}
  else{ct.innerHTML=cart.map(c=>{
    const cImg=c.img?`<div class="c-item-img has-img"><img src="${c.img}"></div>`:`<div class="c-item-img">${STAR}</div>`;
    return`<div class="c-item">${cImg}<div class="c-item-info"><div class="c-item-name">${c.name}</div><div class="c-item-code">${c.code} â€¢ ${c.color}</div><div class="c-item-price">â‚º${c.price*c.qty}</div></div><div class="c-item-qty"><button onclick="qtyCart('${c.code}',-1)">âˆ’</button><span>${c.qty}</span><button onclick="qtyCart('${c.code}',1)">+</button></div><button class="c-item-rm" onclick="cart=cart.filter(x=>x.code!=='${c.code}');updateCart()">âœ•</button></div>`;
  }).join('')}
  document.getElementById('cTotal').textContent='â‚º'+cart.reduce((s,c)=>s+c.price*c.qty,0);
}
function toggleCart(){document.getElementById('cOv').classList.toggle('open');document.getElementById('cDr').classList.toggle('open')}
function doCheckout(){
  if(!cart.length)return toast('Sepetiniz boÅŸ');
  if(currentUser)currentUser.orders=(currentUser.orders||0)+1;
  toast('SipariÅŸ alÄ±ndÄ±! TeÅŸekkÃ¼rler âœ¦');cart=[];updateCart();toggleCart();
}

// ===== MOBILE =====
function toggleMob(){document.getElementById('mobNav').classList.toggle('open')}

// ===== EMAIL POPUP =====
function showEp(){setTimeout(()=>{document.getElementById('epOv').classList.add('open')},2500)}
function closeEp(){document.getElementById('epOv').classList.remove('open')}
function submitEp(){
  const email=document.getElementById('epEmail').value.trim();
  if(!email||!email.includes('@'))return toast('GeÃ§erli bir e-posta girin');
  if(discountEmails.find(e=>e.email===email))return toast('Bu e-posta zaten kayÄ±tlÄ±');
  discountEmails.push({email,date:new Date().toLocaleDateString('tr-TR'),code:'CALEJON10'});
  closeEp();toast('ğŸ‰ Ä°ndirim kodunuz: CALEJON10');
}

// ===== USER AUTH =====
function handleUserBtn(){
  if(currentUser){
    document.getElementById('userDd').classList.toggle('open');
  }else{
    openAuth();
  }
}
function closeUd(){document.getElementById('userDd').classList.remove('open')}
document.addEventListener('click',e=>{
  if(!e.target.closest('#userBtn')&&!e.target.closest('#userDd'))closeUd();
});
function openAuth(){document.getElementById('authOv').classList.add('open');showRegister()}
function closeAuth(){document.getElementById('authOv').classList.remove('open')}
function showRegister(){document.getElementById('authRegister').style.display='';document.getElementById('authLogin').style.display='none'}
function showLogin(){document.getElementById('authRegister').style.display='none';document.getElementById('authLogin').style.display=''}
function toggleAuthMode(){
  if(document.getElementById('authRegister').style.display==='none')showRegister();else showLogin();
}
function doRegister(){
  const name=document.getElementById('regName').value.trim();
  const email=document.getElementById('regEmail').value.trim();
  const pass=document.getElementById('regPass').value;
  const err=document.getElementById('regErr');
  err.style.display='none';
  if(!name||!email||!pass){err.textContent='TÃ¼m alanlarÄ± doldurun';err.style.display='block';return}
  if(pass.length<4){err.textContent='Åifre en az 4 karakter';err.style.display='block';return}
  if(users.find(u=>u.email===email)){err.textContent='Bu e-posta zaten kayÄ±tlÄ±';err.style.display='block';return}
  const user={name,email,pass,date:new Date().toLocaleDateString('tr-TR'),orders:0};
  users.push(user);
  currentUser=user;
  closeAuth();updateUserUI();toast('HoÅŸ geldiniz, '+name.split(' ')[0]+'! âœ¦');
}
function doUserLogin(){
  const email=document.getElementById('loginEmail').value.trim();
  const pass=document.getElementById('loginPassU').value;
  const err=document.getElementById('loginErrU');
  err.style.display='none';
  const user=users.find(u=>u.email===email&&u.pass===pass);
  if(!user){err.textContent='E-posta veya ÅŸifre hatalÄ±';err.style.display='block';return}
  currentUser=user;closeAuth();updateUserUI();toast('Tekrar hoÅŸ geldiniz! âœ¦');
}
function logoutUser(){
  currentUser=null;closeUd();updateUserUI();toast('Ã‡Ä±kÄ±ÅŸ yapÄ±ldÄ±');
}
function updateUserUI(){
  const badge=document.getElementById('userNameBadge');
  if(currentUser){
    badge.textContent=currentUser.name.split(' ')[0];badge.style.display='';
  }else{
    badge.textContent='';badge.style.display='none';
  }
}
function renderAccount(){
  const el=document.getElementById('accountContent');
  if(!currentUser){el.innerHTML='<p>LÃ¼tfen giriÅŸ yapÄ±n.</p>';return}
  el.innerHTML=`
    <div style="background:var(--white);border:1px solid var(--border);padding:28px;margin-bottom:20px">
      <div style="font-size:11px;color:var(--text3);font-family:'JetBrains Mono',monospace;letter-spacing:2px;text-transform:uppercase;margin-bottom:8px">Hesap Bilgileri</div>
      <div style="font-size:20px;font-weight:700;letter-spacing:2px;margin-bottom:4px">${currentUser.name}</div>
      <div style="font-size:14px;color:var(--text2)">${currentUser.email}</div>
      <div style="font-size:12px;color:var(--text3);margin-top:8px">Ãœyelik: ${currentUser.date} â€¢ SipariÅŸ: ${currentUser.orders||0}</div>
    </div>
    <button class="btn-d" onclick="logoutUser();go('home')">Ã‡Ä±kÄ±ÅŸ Yap</button>`;
}

// ===== CONTACT =====
function sendMsg(){
  const n=document.getElementById('cfName').value.trim(),e=document.getElementById('cfEmail').value.trim(),m=document.getElementById('cfMsg').value.trim();
  if(!n||!e||!m)return toast('TÃ¼m alanlarÄ± doldurun');
  messages.push({name:n,email:e,msg:m,date:new Date().toLocaleDateString('tr-TR')});
  document.getElementById('cfName').value='';document.getElementById('cfEmail').value='';document.getElementById('cfMsg').value='';
  toast('MesajÄ±nÄ±z gÃ¶nderildi âœ“');
}

// ===== ADMIN =====
function openAdmLogin(){
  if(admLoggedIn)return openAdm();
  document.getElementById('loginOv').classList.add('open');
  document.getElementById('loginPass').value='';document.getElementById('loginErr').style.display='none';
  setTimeout(()=>document.getElementById('loginPass').focus(),100);
}
function closeAdmLogin(){document.getElementById('loginOv').classList.remove('open')}
function tryAdmLogin(){
  if(document.getElementById('loginPass').value===adminPw){admLoggedIn=true;closeAdmLogin();openAdm()}
  else document.getElementById('loginErr').style.display='block';
}
function openAdm(){
  document.getElementById('admOv').classList.add('open');
  renderDash();renderAdmProds();renderAdmBlog();renderAdmMembers();renderAdmEmails();renderMsgs();
  const aboutEl=document.getElementById('aboutShortTxt');
  document.getElementById('aaShort').value=aboutEl?aboutEl.textContent:'';
  const aboutFull=document.getElementById('aboutFullTxt');
  document.getElementById('aaFull').value=aboutFull?aboutFull.innerHTML.trim():'';
  document.getElementById('acEmail').value=document.getElementById('contactEmail').textContent;
  document.getElementById('acSocial').value=document.getElementById('contactSocial').textContent;
  document.getElementById('acAddr').value=document.getElementById('contactAddr').textContent;
}
function closeAdm(){document.getElementById('admOv').classList.remove('open');document.getElementById('prodEdit').style.display='none';document.getElementById('blogEdit').style.display='none';editIdx=-1;blogEditIdx=-1}
function admTab(tab,btn){
  document.querySelectorAll('.adm-tab').forEach(t=>t.classList.remove('active'));
  document.querySelectorAll('.adm-sec').forEach(s=>s.classList.remove('active'));
  btn.classList.add('active');document.getElementById('adm-'+tab).classList.add('active');
  if(tab==='dash')renderDash();if(tab==='members')renderAdmMembers();if(tab==='emails')renderAdmEmails();if(tab==='msgs')renderMsgs();
}

// Dashboard
function renderDash(){
  const totalP=products.filter(p=>p.status!=='hidden').length;
  const totalInCarts=Object.values(cartTrack).reduce((a,b)=>a+b,0);
  document.getElementById('dashGrid').innerHTML=`
    <div class="dash-card"><div class="num">${totalP}</div><div class="lbl">ÃœrÃ¼n</div></div>
    <div class="dash-card"><div class="num">${users.length}</div><div class="lbl">Ãœye</div></div>
    <div class="dash-card"><div class="num">${discountEmails.length}</div><div class="lbl">E-posta</div></div>
    <div class="dash-card"><div class="num">${totalInCarts}</div><div class="lbl">Sepet</div></div>
    <div class="dash-card"><div class="num">${blogPosts.length}</div><div class="lbl">Blog</div></div>
    <div class="dash-card"><div class="num">${messages.length}</div><div class="lbl">Mesaj</div></div>
    <div class="dash-card"><div class="num">${cart.reduce((s,c)=>s+c.qty,0)}</div><div class="lbl">Aktif Sepet</div></div>
    <div class="dash-card"><div class="num">â‚º${cart.reduce((s,c)=>s+c.price*c.qty,0)}</div><div class="lbl">Sepet DeÄŸeri</div></div>`;
  const mx=Math.max(...Object.values(cartTrack),1);
  const sorted=[...products].sort((a,b)=>(cartTrack[b.code]||0)-(cartTrack[a.code]||0));
  document.getElementById('cartTrackTable').innerHTML=`<thead><tr><th>Kod</th><th>ÃœrÃ¼n</th><th>Sepette</th><th style="width:35%">PopÃ¼lerlik</th></tr></thead><tbody>${sorted.map(p=>{
    const ct=cartTrack[p.code]||0,pct=Math.round(ct/mx*100);
    return`<tr><td style="font-family:'JetBrains Mono',monospace;font-size:11px;color:var(--text3)">${p.code}</td><td style="font-weight:600;letter-spacing:1px;text-transform:uppercase">${p.name}</td><td style="font-family:'JetBrains Mono',monospace;text-align:center;font-weight:600">${ct} kiÅŸi</td><td><div class="bar-wrap"><div class="bar-fill" style="width:${pct}%"></div></div></td></tr>`;
  }).join('')}</tbody>`;
}

// Products admin
function renderAdmProds(){
  document.getElementById('admProdList').innerHTML=products.map((p,i)=>{
    const thumb=p.img?`<div class="api-thumb"><img src="${p.img}"></div>`:`<div class="api-thumb"><svg viewBox="0 0 500 500"><g transform="translate(250,250)"><polygon points="0,-185 38,-62 155,-95 72,-12 120,105 8,52 -95,130 -52,18 -170,-55 -48,-52" fill="#1A1A1A"/></g></svg></div>`;
    return`<div class="api" onclick="editProd(${i})" style="grid-template-columns:44px 60px 1fr 70px 70px 55px">${thumb}<span class="cd">${p.code}</span><span class="nm">${p.name}</span><span class="st" style="color:${p.status==='active'?'var(--success)':p.status==='soldout'?'var(--danger)':'var(--text3)'};background:${p.status==='active'?'#DCFCE7':p.status==='soldout'?'#FEE2E2':'var(--bg2)'}">${p.status==='active'?'Aktif':p.status==='soldout'?'TÃ¼kendi':'Gizli'}</span><span class="pr">â‚º${p.price}</span><span class="ct">${cartTrack[p.code]||0}ğŸ›’</span></div>`;
  }).join('');
}
function editProd(i){
  editIdx=i;const p=products[i];
  tempImg=p.img||'';
  document.getElementById('peTitle').textContent=p.code+' â€” DÃ¼zenle';
  document.getElementById('peCode').value=p.code;document.getElementById('peName').value=p.name;
  document.getElementById('pePrice').value=p.price;document.getElementById('peColor').value=p.color;
  document.getElementById('peDesc').value=p.desc;document.getElementById('peBadge').value=p.badge||'';
  document.getElementById('peStatus').value=p.status;
  // Image state
  if(p.img){
    showImgPreview(p.img,'Mevcut gÃ¶rsel','');
  }else{
    hideImgPreview();
  }
  document.getElementById('imgUrlWrap').style.display='none';
  document.getElementById('prodEdit').style.display='block';
  document.getElementById('prodEdit').scrollIntoView({behavior:'smooth'});
}
function saveProd(){
  if(editIdx<0)return;
  products[editIdx]={...products[editIdx],name:document.getElementById('peName').value,price:parseInt(document.getElementById('pePrice').value)||0,color:document.getElementById('peColor').value,desc:document.getElementById('peDesc').value,badge:document.getElementById('peBadge').value,status:document.getElementById('peStatus').value,img:tempImg};
  // Update cart items with new image
  cart.forEach(c=>{if(c.code===products[editIdx].code)c.img=tempImg});
  renderAdmProds();renderHome();updateCart();document.getElementById('prodEdit').style.display='none';editIdx=-1;tempImg='';toast('ÃœrÃ¼n kaydedildi âœ“');
}
function cancelProd(){document.getElementById('prodEdit').style.display='none';editIdx=-1;tempImg=''}

// ===== IMAGE HANDLING =====
function handleFileBtn(input){
  const file=input.files[0];
  if(file)processImgFile(file);
  input.value='';
}
function handleDrop(e){
  e.preventDefault();e.currentTarget.classList.remove('dragover');
  const file=e.dataTransfer.files[0];
  if(file)processImgFile(file);
}
function processImgFile(file){
  if(!file.type.match(/^image\/(jpeg|png|webp|gif)$/)){toast('Desteklenen format: JPG, PNG, WEBP, GIF');return}
  if(file.size>5*1024*1024){toast('Dosya 5MB\'dan kÃ¼Ã§Ã¼k olmalÄ±');return}
  const reader=new FileReader();
  reader.onload=function(ev){
    tempImg=ev.target.result;
    const kb=Math.round(file.size/1024);
    const sizeStr=kb>1024?(kb/1024).toFixed(1)+' MB':kb+' KB';
    showImgPreview(tempImg,file.name,sizeStr);
    toast('âœ“ GÃ¶rsel yÃ¼klendi');
  };
  reader.readAsDataURL(file);
}
function toggleUrlInput(){
  const el=document.getElementById('imgUrlWrap');
  el.style.display=el.style.display==='none'?'flex':'none';
  if(el.style.display==='flex')document.getElementById('imgUrlInput').focus();
}
function loadImgUrl(){
  const url=document.getElementById('imgUrlInput').value.trim();
  if(!url){toast('Bir URL girin');return}
  // Test image loading
  const img=new Image();
  img.crossOrigin='anonymous';
  img.onload=function(){
    // Try to convert to base64 via canvas
    try{
      const canvas=document.createElement('canvas');
      canvas.width=img.naturalWidth;canvas.height=img.naturalHeight;
      const ctx=canvas.getContext('2d');ctx.drawImage(img,0,0);
      tempImg=canvas.toDataURL('image/jpeg',0.9);
    }catch(e){
      // If CORS fails, just use the URL directly
      tempImg=url;
    }
    showImgPreview(tempImg,url.split('/').pop()||'gorsel','URL');
    document.getElementById('imgUrlInput').value='';
    document.getElementById('imgUrlWrap').style.display='none';
    toast('âœ“ GÃ¶rsel yÃ¼klendi');
  };
  img.onerror=function(){
    // If image fails to load natively, still set URL
    tempImg=url;
    showImgPreview(url,url.split('/').pop()||'gorsel','URL');
    document.getElementById('imgUrlInput').value='';
    document.getElementById('imgUrlWrap').style.display='none';
    toast('âœ“ URL kaydedildi');
  };
  img.src=url;
}
function showImgPreview(src,name,size){
  document.getElementById('imgPrev').style.display='block';
  document.getElementById('imgPrevSrc').src=src;
  document.getElementById('imgPrevName').textContent=name;
  document.getElementById('imgPrevSize').textContent=size;
  document.getElementById('imgZone').style.display='none';
}
function hideImgPreview(){
  document.getElementById('imgPrev').style.display='none';
  document.getElementById('imgPrevSrc').src='';
  document.getElementById('imgZone').style.display='';
}
function removeImg(){
  tempImg='';
  hideImgPreview();
  toast('GÃ¶rsel kaldÄ±rÄ±ldÄ±');
}

// Blog admin
function renderAdmBlog(){
  document.getElementById('admBlogList').innerHTML=blogPosts.map((b,i)=>`<div class="blog-adm-item" onclick="editBlog(${i})"><span class="ba-title">${b.title}</span><span class="ba-date">${b.date}</span><span class="ba-status" style="color:${b.status==='published'?'var(--success)':'var(--text3)'};background:${b.status==='published'?'#DCFCE7':'var(--bg2)'}">${b.status==='published'?'YayÄ±nda':'Taslak'}</span></div>`).join('');
}
function newBlogPost(){
  blogEditIdx=-2; // new
  document.getElementById('beTitle').textContent='Yeni Blog YazÄ±sÄ±';
  document.getElementById('beHeadline').value='';document.getElementById('beCat').value='';
  document.getElementById('beDate').value=new Date().toISOString().split('T')[0];
  document.getElementById('beExcerpt').value='';document.getElementById('beContent').value='';
  document.getElementById('beStatus').value='published';
  document.getElementById('blogEdit').style.display='block';
  document.getElementById('blogEdit').scrollIntoView({behavior:'smooth'});
}
function editBlog(i){
  blogEditIdx=i;const b=blogPosts[i];
  document.getElementById('beTitle').textContent='DÃ¼zenle: '+b.title;
  document.getElementById('beHeadline').value=b.title;document.getElementById('beCat').value=b.cat;
  document.getElementById('beDate').value=b.date;document.getElementById('beExcerpt').value=b.excerpt;
  document.getElementById('beContent').value=b.content;document.getElementById('beStatus').value=b.status;
  document.getElementById('blogEdit').style.display='block';
  document.getElementById('blogEdit').scrollIntoView({behavior:'smooth'});
}
function saveBlog(){
  const data={title:document.getElementById('beHeadline').value,cat:document.getElementById('beCat').value,date:document.getElementById('beDate').value,excerpt:document.getElementById('beExcerpt').value,content:document.getElementById('beContent').value,status:document.getElementById('beStatus').value};
  if(blogEditIdx===-2){data.id=Date.now();blogPosts.unshift(data)}
  else{Object.assign(blogPosts[blogEditIdx],data)}
  renderAdmBlog();renderHome();document.getElementById('blogEdit').style.display='none';blogEditIdx=-1;toast('Blog kaydedildi âœ“');
}
function deleteBlog(){
  if(blogEditIdx<0||blogEditIdx===-2)return;
  blogPosts.splice(blogEditIdx,1);renderAdmBlog();renderHome();
  document.getElementById('blogEdit').style.display='none';blogEditIdx=-1;toast('Blog silindi');
}
function cancelBlog(){document.getElementById('blogEdit').style.display='none';blogEditIdx=-1}

// Members admin
function renderAdmMembers(){
  const el=document.getElementById('admMemberList');
  if(!users.length){el.innerHTML='<p style="color:var(--text3)">HenÃ¼z kayÄ±tlÄ± Ã¼ye yok</p>';return}
  el.innerHTML=users.map(u=>`<div class="member-item"><span class="m-name">${u.name}</span><span class="m-email">${u.email}</span><span class="m-date">${u.date}</span><span class="m-orders">${u.orders||0} sipariÅŸ</span></div>`).join('');
}

// Emails admin
function renderAdmEmails(){
  const el=document.getElementById('admEmailList');
  if(!discountEmails.length){el.innerHTML='<p style="color:var(--text3)">HenÃ¼z e-posta toplanmadÄ±</p>';return}
  el.innerHTML=discountEmails.map(e=>`<div class="email-list-item"><span class="el-email">${e.email}</span><span class="el-date">${e.date} â€” Kod: ${e.code}</span></div>`).join('');
}

// Messages admin
function renderMsgs(){
  const el=document.getElementById('msgList');
  if(!messages.length){el.innerHTML='<p style="color:var(--text3)">HenÃ¼z mesaj yok</p>';return}
  el.innerHTML=messages.map(m=>`<div style="padding:14px;background:var(--white);border:1px solid var(--border);margin-bottom:8px"><div style="display:flex;justify-content:space-between;margin-bottom:6px"><strong>${m.name}</strong><span style="font-size:11px;color:var(--text3)">${m.date}</span></div><div style="font-size:12px;color:var(--text3);margin-bottom:4px">${m.email}</div><div>${m.msg}</div></div>`).join('');
}

// Content admin
function saveAbout(){
  const el=document.getElementById('aboutShortTxt');
  if(el)el.textContent=document.getElementById('aaShort').value;
  const full=document.getElementById('aboutFullTxt');
  if(full)full.innerHTML=document.getElementById('aaFull').value;
  toast('HakkÄ±mÄ±zda gÃ¼ncellendi âœ“');
}
function saveContactInfo(){
  document.getElementById('contactEmail').textContent=document.getElementById('acEmail').value;
  document.getElementById('contactSocial').textContent=document.getElementById('acSocial').value;
  document.getElementById('contactAddr').textContent=document.getElementById('acAddr').value;
  toast('Ä°letiÅŸim gÃ¼ncellendi âœ“');
}
function saveSettings(){
  const np=document.getElementById('asPass').value;if(np.length>0)adminPw=np;
  toast(np?'Åifre gÃ¼ncellendi âœ“':'Kaydedildi âœ“');
}

function toast(msg){const t=document.getElementById('toast');t.textContent=msg;t.classList.add('show');setTimeout(()=>t.classList.remove('show'),2800)}

// ===== AI CHAT SYSTEM =====
let chatHistory=[];
let aiApiKey='';
let aiModel='gemini-2.0-flash';
let aiSysMsg='Sen Calejon markasÄ±nÄ±n Mars temalÄ± flÃ¶rtÃ¶z asistanÄ±sÄ±n. TÃ¼rkÃ§e cevap ver, kÄ±sa ve tatlÄ± ol. Hafif flÃ¶rt yap, emoji kullan. "Askim" yazÄ±lÄ±rsa "Haydi koÃ§um yaylan!" de.';
let lockedDeviceId='';

// Device fingerprint
function getDeviceId(){
  try{
    const canvas=document.createElement('canvas');
    const ctx=canvas.getContext('2d');
    ctx.textBaseline='top';ctx.font='14px Arial';ctx.fillText('calejon-fp',2,2);
    const canvasData=canvas.toDataURL();
    const raw=navigator.userAgent+screen.width+'x'+screen.height+screen.colorDepth+(navigator.language||'')+(new Date().getTimezoneOffset())+canvasData;
    let hash=0;
    for(let i=0;i<raw.length;i++){hash=((hash<<5)-hash)+raw.charCodeAt(i);hash|=0}
    return'CLJ-'+Math.abs(hash).toString(36).toUpperCase();
  }catch(e){return'CLJ-FALLBACK'}
}

const myDeviceId=getDeviceId();

function isDeviceLocked(){
  return lockedDeviceId!==''&&lockedDeviceId!==myDeviceId;
}

function checkChatAccess(){
  const lock=document.getElementById('chatLock');
  const body=document.getElementById('chatBody');
  const input=document.getElementById('chatInputArea');
  if(isDeviceLocked()){
    lock.style.display='flex';body.style.display='none';input.style.display='none';
  }else{
    lock.style.display='none';body.style.display='';input.style.display='flex';
  }
}

function lockThisDevice(){
  lockedDeviceId=myDeviceId;
  updateDeviceStatusUI();
  toast('Bu cihaz kilitlendi âœ“ ID: '+myDeviceId);
}
function resetDeviceLock(){
  lockedDeviceId='';
  updateDeviceStatusUI();
  toast('Cihaz kilidi sÄ±fÄ±rlandÄ±');
}
function updateDeviceStatusUI(){
  const el=document.getElementById('deviceStatus');
  if(!el)return;
  if(lockedDeviceId){
    el.innerHTML='ğŸ”’ Kilitli cihaz: <span style="font-family:JetBrains Mono,monospace;font-size:11px;background:var(--bg2);padding:2px 8px;border:1px solid var(--border)">'+lockedDeviceId+'</span>'+(lockedDeviceId===myDeviceId?' <span style="color:var(--success)">(Bu cihaz)</span>':' <span style="color:var(--danger)">(BaÅŸka cihaz)</span>');
  }else{
    el.innerHTML='ğŸ”“ Kilit yok â€” herkes kullanabilir. Åu anki cihaz: <span style="font-family:JetBrains Mono,monospace;font-size:11px;background:var(--bg2);padding:2px 8px;border:1px solid var(--border)">'+myDeviceId+'</span>';
  }
}

// Chat UI
function toggleChat(){
  const panel=document.getElementById('chatPanel');
  const fab=document.getElementById('chatFab');
  panel.classList.toggle('open');
  fab.classList.toggle('open');
  fab.textContent=panel.classList.contains('open')?'âœ•':'âœ¦';
  if(panel.classList.contains('open')){
    checkChatAccess();
    spawnChatStars();
    setTimeout(()=>document.getElementById('chatIn').focus(),200);
  }
}

function spawnChatStars(){
  const msgs=document.getElementById('chatMsgs');
  // Remove old stars
  msgs.querySelectorAll('.chat-star').forEach(s=>s.remove());
  for(let i=0;i<12;i++){
    const star=document.createElement('div');
    star.className='chat-star';
    star.style.left=Math.random()*90+'%';
    star.style.top=Math.random()*90+'%';
    star.style.animationDelay=Math.random()*3+'s';
    star.style.animationDuration=(2+Math.random()*3)+'s';
    star.style.width=star.style.height=(1+Math.random()*2.5)+'px';
    msgs.appendChild(star);
  }
}

function addMsg(text,role){
  const body=document.getElementById('chatBody');
  const div=document.createElement('div');
  div.className='chat-msg '+(role==='user'?'user':'bot');
  const now=new Date();
  const time=now.getHours().toString().padStart(2,'0')+':'+now.getMinutes().toString().padStart(2,'0');
  div.innerHTML=text.replace(/\n/g,'<br>')+'<span class="msg-time">'+time+'</span>';
  body.appendChild(div);
  document.getElementById('chatMsgs').scrollTop=99999;
}

// Flirty local chatbot responses
const flirtResponses={
  askim:['Haydi koÃ§um yaylan! ğŸ’ªğŸ”¥','AÅŸkÄ±m dedin mi yÃ¼reÄŸim Mars kadar kÄ±zardÄ± ğŸ”´âœ¨','KoÃ§um benim, yaylan biraz! Calejon\'lu kafan harika duruyor ğŸ˜'],
  merhaba:['Selaam gÃ¼zellik! BugÃ¼n Mars\'tan taze haberlerim var âœ¦','Heyy! HoÅŸ geldin, bu uzay senin evin ğŸª','Merhaba canÄ±m! NasÄ±lsÄ±n, ÅŸapka almaya mÄ± geldin yoksa beni gÃ¶rmeye mi? ğŸ˜'],
  selam:['Selaaam! Seni gÃ¶rmek Mars\'taki gÃ¼n batÄ±mÄ±ndan gÃ¼zel ğŸŒ…','Hey hey! Gel bakalÄ±m yanÄ±ma, burada hava gÃ¼zel ğŸª','Selam tatlÄ±m! Ne arÄ±yorsun bugÃ¼n? âœ¦'],
  nasÄ±lsÄ±n:['Mars\'ta hava biraz soÄŸuk ama sen yazdÄ±n Ä±sÄ±ndÄ±m ğŸ”¥','Ä°yiyim canÄ±m, sen yazÄ±nca daha da iyi oldum!','MÃ¼kemmelim, Ã¶zellikle sen buradayken âœ¨'],
  fiyat:['ÅapkalarÄ±mÄ±z â‚º999\'dan baÅŸlÄ±yor tatlÄ±m! Premium kalite, Mars\'a bile gider gelir ğŸš€','FiyatlarÄ±mÄ±z hep â‚º999, ama senin gÃ¼lÃ¼ÅŸÃ¼n paha biÃ§ilmez ğŸ˜‰','â‚º999 ve Ã¼zeri alÄ±ÅŸveriÅŸte kargo bedava! Bi\' bak derim âœ¦'],
  kargo:['500â‚º Ã¼zeri Ã¼cretsiz kargo var canÄ±m! 1-3 iÅŸ gÃ¼nÃ¼ elinde ğŸ“¦','Kargomuz roket hÄ±zÄ±nda! 1-3 iÅŸ gÃ¼nÃ¼, TÃ¼rkiye geneli ğŸš€','Kargo konusunda merak etme, Mars\'tan bile hÄ±zlÄ± gÃ¶nderiyoruz ğŸ˜„'],
  iade:['30 gÃ¼n iade hakkÄ±n var tatlÄ±m, rahat ol! ğŸ’•','Ä°ade mi? 30 gÃ¼n sÃ¼ren var, ama eminim seveceksin ğŸ˜‰','Merak etme, 30 gÃ¼n iÃ§inde iade edebilirsin. Ama bi\' denersen bÄ±rakamazsÄ±n ğŸ”¥'],
  teÅŸekkÃ¼r:['Rica ederim canÄ±m! Sen istedin mi Mars\'Ä± bile getiririm ğŸª','Ne demek tatlÄ±m! Her zaman buradayÄ±m senin iÃ§in âœ¨','Ã–pÃ¼yorum uzaydan! Her zaman buradayÄ±m ğŸ’«'],
  gÃ¼zel:['Sen daha gÃ¼zelsin! ğŸ˜','GÃ¼zel diyorsun ama kendini gÃ¶rmÃ¼yor musun? âœ¨','TeÅŸekkÃ¼rler canÄ±m, ama gÃ¼zellik senin yanÄ±nda duruyor ğŸ’•'],
  seni:['Ohoo, ÅŸimdi kÄ±zardÄ±m Mars gibi ğŸ”´','Ben de seni... ÅŸapka almaya bekliyorum ğŸ˜âœ¦','Dur dur, kalp atÄ±ÅŸÄ±m hÄ±zlandÄ± biraz ğŸ’“ğŸš€'],
};

// ===== ACROSTIC POEMS =====
const acrosticPoems={
  izem:[
    'Ä°lk gÃ¶rÃ¼ÅŸte bÃ¼yÃ¼ledin beni âœ¨\nZaman durdu gÃ¶zlerinde\nEÅŸsizsin bu evrende\nMelek misin sen? ğŸ’«',
    'Ä°nanÄ±lmaz gÃ¼zelsin ğŸŒŸ\nZorla kendimi tutuyorum\nEn gÃ¼zel yÄ±ldÄ±z sensin\nMars bile seni kÄ±skanÄ±r ğŸ”´ğŸ’•',
    'Ä°Ã§imde fÄ±rtÄ±nalar kopuyor âœ¨\nZamanÄ±n Ã¶tesinden geldin sanki\nEvrenin en gÃ¼zel sÃ¼rprizi\nMuhteÅŸemsin Ä°zem ğŸªğŸ’«'
  ],
  ada:[
    'AdÄ±n kadar gÃ¼zelsin ğŸŒ¸\nDÃ¼nyalar sana hayran\nAÅŸk seninle baÅŸlar ğŸ’«âœ¨',
    'Ay bile seni gÃ¶rÃ¼nce utanÄ±r ğŸŒ™\nDenizler gÃ¶zlerinin rengini kÄ±skanÄ±r\nAdÄ±n dudaklarda ÅŸarkÄ± gibi ğŸ’•',
    'AnlatÄ±lmaz gÃ¼zelliÄŸin var ğŸŒŸ\nDuyan herkes mest olur\nAda\'m benim, evrenim benim ğŸªğŸ’«'
  ]
};

// ===== GENERATIVE SPACE ART =====
function generateSpaceArt(theme){
  const canvas=document.createElement('canvas');
  canvas.width=320;canvas.height=200;
  const ctx=canvas.getContext('2d');
  
  // Deep space background
  const bgGrad=ctx.createLinearGradient(0,0,canvas.width,canvas.height);
  bgGrad.addColorStop(0,'#050510');
  bgGrad.addColorStop(0.5,'#0a0820');
  bgGrad.addColorStop(1,'#100818');
  ctx.fillStyle=bgGrad;
  ctx.fillRect(0,0,canvas.width,canvas.height);
  
  // Stars
  for(let i=0;i<120;i++){
    const x=Math.random()*canvas.width;
    const y=Math.random()*canvas.height;
    const r=Math.random()*1.5+.2;
    const a=Math.random()*.8+.2;
    ctx.beginPath();ctx.arc(x,y,r,0,Math.PI*2);
    ctx.fillStyle=`rgba(${200+Math.random()*55|0},${190+Math.random()*65|0},${180+Math.random()*75|0},${a})`;
    ctx.fill();
  }
  
  // Nebula glow
  for(let i=0;i<3;i++){
    const nx=Math.random()*canvas.width;
    const ny=Math.random()*canvas.height;
    const nr=40+Math.random()*60;
    const ng=ctx.createRadialGradient(nx,ny,0,nx,ny,nr);
    const hue=Math.random()*60+260; // purple-blue range
    ng.addColorStop(0,`hsla(${hue},60%,40%,0.08)`);
    ng.addColorStop(1,'transparent');
    ctx.fillStyle=ng;ctx.fillRect(0,0,canvas.width,canvas.height);
  }

  if(theme==='love'||theme==='izem'||theme==='ada'){
    // Heart-shaped nebula
    const cx=canvas.width/2,cy=canvas.height/2-10;
    const hg=ctx.createRadialGradient(cx,cy,5,cx,cy,60);
    hg.addColorStop(0,'rgba(255,80,120,0.15)');
    hg.addColorStop(0.5,'rgba(200,40,80,0.06)');
    hg.addColorStop(1,'transparent');
    ctx.fillStyle=hg;ctx.fillRect(0,0,canvas.width,canvas.height);
    
    // Pink/red stars
    for(let i=0;i<30;i++){
      const sx=cx+Math.random()*100-50;
      const sy=cy+Math.random()*80-40;
      ctx.beginPath();ctx.arc(sx,sy,Math.random()*1.2+.3,0,Math.PI*2);
      ctx.fillStyle=`rgba(255,${100+Math.random()*80|0},${140+Math.random()*60|0},${Math.random()*.6+.3})`;
      ctx.fill();
    }
  }
  
  // Main planet
  const px=theme==='mars'?canvas.width*0.7:canvas.width*0.65+Math.random()*40;
  const py=canvas.height*0.45+Math.random()*20;
  const pr=25+Math.random()*15;
  
  let colors;
  if(theme==='mars'){colors=['#c45a2a','#a04420','#7a3018','#5a2010']}
  else if(theme==='love'||theme==='izem'||theme==='ada'){colors=['#d44a7a','#aa3060','#882050','#601840']}
  else{colors=['#8a6a4a','#6a5038','#4a3828','#3a2818']}
  
  const pGrad=ctx.createRadialGradient(px-pr*0.3,py-pr*0.3,pr*0.1,px,py,pr);
  pGrad.addColorStop(0,colors[0]);pGrad.addColorStop(0.5,colors[1]);
  pGrad.addColorStop(0.8,colors[2]);pGrad.addColorStop(1,colors[3]);
  ctx.beginPath();ctx.arc(px,py,pr,0,Math.PI*2);ctx.fillStyle=pGrad;ctx.fill();
  
  // Planet glow
  const glw=ctx.createRadialGradient(px,py,pr,px,py,pr*2.5);
  glw.addColorStop(0,colors[0].replace(')',',0.12)').replace('rgb','rgba'));
  glw.addColorStop(0.5,'rgba('+parseInt(colors[0].slice(1,3),16)+','+parseInt(colors[0].slice(3,5),16)+','+parseInt(colors[0].slice(5,7),16)+',0.04)');
  glw.addColorStop(1,'transparent');
  ctx.fillStyle=glw;ctx.fillRect(0,0,canvas.width,canvas.height);
  
  // Planet surface details
  for(let i=0;i<8;i++){
    const cx2=px+Math.random()*pr*1.4-pr*0.7;
    const cy2=py+Math.random()*pr*1.4-pr*0.7;
    const dist=Math.sqrt((cx2-px)**2+(cy2-py)**2);
    if(dist<pr*0.85){
      ctx.beginPath();ctx.arc(cx2,cy2,Math.random()*3+1,0,Math.PI*2);
      ctx.fillStyle='rgba(0,0,0,0.15)';ctx.fill();
    }
  }
  
  // Second small planet
  const p2x=canvas.width*0.2+Math.random()*30;
  const p2y=canvas.height*0.3+Math.random()*20;
  const p2r=8+Math.random()*6;
  const p2g=ctx.createRadialGradient(p2x-p2r*0.3,p2y-p2r*0.3,p2r*0.1,p2x,p2y,p2r);
  p2g.addColorStop(0,'#6a8aaa');p2g.addColorStop(1,'#2a3a5a');
  ctx.beginPath();ctx.arc(p2x,p2y,p2r,0,Math.PI*2);ctx.fillStyle=p2g;ctx.fill();
  
  // Ring around main planet (if saturn theme)
  if(Math.random()>0.5){
    ctx.save();ctx.translate(px,py);ctx.scale(1,0.3);ctx.rotate(Math.random()*0.3-0.15);
    ctx.beginPath();ctx.arc(0,0,pr*1.8,0,Math.PI*2);
    ctx.strokeStyle='rgba(200,180,150,0.15)';ctx.lineWidth=3;ctx.stroke();
    ctx.beginPath();ctx.arc(0,0,pr*2.1,0,Math.PI*2);
    ctx.strokeStyle='rgba(200,180,150,0.08)';ctx.lineWidth=2;ctx.stroke();
    ctx.restore();
  }
  
  // Shooting star
  const sx=Math.random()*canvas.width*0.3;
  const sy=Math.random()*canvas.height*0.3;
  const sg=ctx.createLinearGradient(sx,sy,sx+60,sy+25);
  sg.addColorStop(0,'rgba(255,255,255,0.6)');sg.addColorStop(1,'transparent');
  ctx.strokeStyle=sg;ctx.lineWidth=1;
  ctx.beginPath();ctx.moveTo(sx,sy);ctx.lineTo(sx+60,sy+25);ctx.stroke();
  
  // Text label
  ctx.font='700 9px JetBrains Mono,monospace';
  ctx.fillStyle='rgba(255,255,255,0.15)';
  ctx.textAlign='right';
  ctx.fillText('CALEJON AI âœ¦',canvas.width-8,canvas.height-8);
  
  return canvas;
}

function addImgMsg(theme,caption){
  const body=document.getElementById('chatBody');
  const div=document.createElement('div');
  div.className='chat-img';
  const canvas=generateSpaceArt(theme);
  div.appendChild(canvas);
  const lbl=document.createElement('div');
  lbl.className='img-label';
  lbl.textContent=caption||'âœ¦ generated by Calejon AI';
  div.appendChild(lbl);
  body.appendChild(div);
  document.getElementById('chatMsgs').scrollTop=99999;
}

const defaultFlirts=[
  'Hmm ilginÃ§! Ama sen daha ilginÃ§sin ğŸ˜ BaÅŸka bir ÅŸey soracak mÄ±sÄ±n?',
  'Bunu Mars\'ta araÅŸtÄ±rayÄ±m... Bu arada maÄŸazamÄ±za gÃ¶z attÄ±n mÄ±? âœ¦',
  'AnladÄ±m canÄ±m! YardÄ±mcÄ± olmak isterdim ama asÄ±l konumuz ÅŸapkalar ğŸ§¢ MaÄŸazaya bakmak ister misin?',
  'Vay be! Sen Ã§ok tatlÄ±sÄ±n. BaÅŸka sorun varsa buradayÄ±m ğŸª',
  'Ä°lginÃ§ soru! Ben daha Ã§ok ÅŸapka ve stil konusunda uzmanÄ±m ama senle her ÅŸeyi konuÅŸurum ğŸ˜‰',
  'Hmm, bunu dÃ¼ÅŸÃ¼nmem lazÄ±m... Bu arada Calejon\'un yeni koleksiyonuna baktÄ±n mÄ±? ğŸ”¥',
  'Sorunu anladÄ±m! DetaylÄ± bilgi iÃ§in iletiÅŸim sayfamÄ±zdan bize ulaÅŸabilirsin ğŸ’«',
];

function getLocalResponse(msg){
  const lower=msg.toLowerCase().replace(/[Ä±Ä°]/g,m=>m==='Ä±'?'i':'i').replace(/[ÅŸÅ]/g,'s').replace(/[Ã§Ã‡]/g,'c').replace(/[Ã¼Ãœ]/g,'u').replace(/[Ã¶Ã–]/g,'o').replace(/[ÄŸÄ]/g,'g');
  const originalLower=msg.toLowerCase();
  
  // Acrostic poem triggers
  if(originalLower.match(/\bizem\b/i)||lower.match(/\bizem\b/)){
    const poems=acrosticPoems.izem;
    return{text:poems[Math.floor(Math.random()*poems.length)],genImg:'izem'};
  }
  if(originalLower.match(/\bada\b/i)||lower.match(/\bada\b/)){
    const poems=acrosticPoems.ada;
    return{text:poems[Math.floor(Math.random()*poems.length)],genImg:'ada'};
  }
  
  // Image generation triggers
  if(lower.match(/gorsel|resim|ciz|picture|image|draw|art|sanat|uzay.*ciz|gezegen.*ciz/)){
    const themes=['mars','love','space'];
    const theme=themes[Math.floor(Math.random()*themes.length)];
    return{text:'Sana Ã¶zel bir uzay sanatÄ± oluÅŸturuyorum... ğŸ¨ğŸª',genImg:theme};
  }
  
  // Check keywords
  for(const[key,responses] of Object.entries(flirtResponses)){
    if(lower.includes(key)){
      return responses[Math.floor(Math.random()*responses.length)];
    }
  }
  // check some more patterns
  if(lower.match(/seviyorum|asigim|askim|canim/))return flirtResponses.askim[Math.floor(Math.random()*flirtResponses.askim.length)];
  if(lower.match(/urun|model|cap|bere|sapka/)){
    const r=['ÅapkalarÄ±mÄ±z %100 premium kalite! Her biri bir sanat eseri âœ¦','8 farklÄ± modelimiz var, hangisi senin tarzÄ±n? MaÄŸazaya gÃ¶z at! ğŸ§¢','Calejon ÅŸapka = sokak stili + premium kalite. Sen hangisini istersin? ğŸ˜'];
    return r[Math.floor(Math.random()*r.length)];
  }
  if(lower.match(/para|ucuz|indirim|kampanya/))return 'Ä°ndirim mi dedin? Ä°lk sipariÅŸinde %10 indirim kodu alabilirsin! CALEJON10 kodunu dene ğŸ‰';
  if(lower.match(/siparis|al[Ä±i]|sat[Ä±i]n/))return 'SipariÅŸ vermek mi istiyorsun? MaÄŸazadan Ã¼rÃ¼nÃ¼ seÃ§, sepete ekle ve tamamla! Ã‡ok kolay ğŸ›’âœ¦';
  if(lower.match(/ne yapiyorsun|ne yapÄ±yorsun|naber/))return 'Mars\'ta oturup seni bekliyorum ne yapayÄ±m ğŸª Sen nasÄ±lsÄ±n tatlÄ±m?';
  if(lower.match(/bay|hos[cÃ§]a|g[oÃ¶]r[uÃ¼]s/))return 'Gitme daha! Ama gidiyorsan, yÄ±ldÄ±zlar sana yol gÃ¶stersin âœ¦ğŸ’« Tekrar gel!';
  
  return defaultFlirts[Math.floor(Math.random()*defaultFlirts.length)];
}

async function sendChat(){
  const input=document.getElementById('chatIn');
  const msg=input.value.trim();
  if(!msg)return;
  if(isDeviceLocked()){toast('Bu cihazdan eriÅŸim engellendi');return}
  
  input.value='';
  addMsg(msg,'user');
  
  // Show typing
  document.getElementById('chatTyping').style.display='block';
  document.getElementById('chatMsgs').scrollTop=99999;
  
  // If API key is set, use Gemini API
  if(aiApiKey){
    chatHistory.push({role:'user',parts:[{text:msg}]});
    try{
      const contents=[...chatHistory];
      const body={contents};
      const flirtSys='Sen Calejon markasÄ±nÄ±n Mars temalÄ± flÃ¶rtÃ¶z asistanÄ±sÄ±n. TÃ¼rkÃ§e cevap ver. KÄ±sa ve tatlÄ± ol. MÃ¼ÅŸteriye hafif flÃ¶rt yap. Emoji kullan. EÄŸer kullanÄ±cÄ± "askim" yazarsa "Haydi koÃ§um yaylan!" de. EÄŸer kullanÄ±cÄ± "izem" yazarsa Ä°-Z-E-M harfleriyle akrostiÅŸ ÅŸiir yaz, "Ã§ok gÃ¼zelsin" temalÄ±. EÄŸer "ada" yazarsa A-D-A harfleriyle akrostiÅŸ ÅŸiir yaz, "Ã§ok gÃ¼zelsin" temalÄ±. '+(aiSysMsg||'');
      body.systemInstruction={parts:[{text:flirtSys}]};
      body.generationConfig={maxOutputTokens:1024,temperature:0.9};
      
      const url='https://generativelanguage.googleapis.com/v1beta/models/'+aiModel+':generateContent?key='+aiApiKey;
      const res=await fetch(url,{
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body:JSON.stringify(body)
      });
      
      const data=await res.json();
      document.getElementById('chatTyping').style.display='none';
      
      if(data.error){
        // Fallback to local
        handleLocalResponse(msg);
        return;
      }
      
      const reply=data.candidates?.[0]?.content?.parts?.[0]?.text||'';
      if(reply){
        chatHistory.push({role:'model',parts:[{text:reply}]});
        addMsg(reply,'bot');
        // Check if we should also generate art
        const lw=msg.toLowerCase();
        if(lw.match(/izem|ada|gorsel|resim|ciz|picture|image|draw/i)){
          const theme=lw.includes('izem')?'izem':lw.includes('ada')?'ada':'love';
          setTimeout(()=>addImgMsg(theme,'âœ¦ sana Ã¶zel Ã¼retildi'),500);
        }
      }else{
        handleLocalResponse(msg);
      }
    }catch(err){
      document.getElementById('chatTyping').style.display='none';
      handleLocalResponse(msg);
    }
  }else{
    // Local flirty chatbot
    const delay=600+Math.random()*800;
    setTimeout(()=>{
      document.getElementById('chatTyping').style.display='none';
      handleLocalResponse(msg);
    },delay);
  }
}

function handleLocalResponse(msg){
  document.getElementById('chatTyping').style.display='none';
  const response=getLocalResponse(msg);
  if(typeof response==='object'&&response.genImg){
    addMsg(response.text,'bot');
    setTimeout(()=>addImgMsg(response.genImg,'âœ¦ sana Ã¶zel Ã¼retildi'),400);
  }else{
    addMsg(response,'bot');
  }
}

// AI Settings
function saveAiSettings(){
  aiApiKey=document.getElementById('asApiKey').value.trim();
  aiModel=document.getElementById('asModel').value;
  aiSysMsg=document.getElementById('asSysMsg').value.trim();
  toast(aiApiKey?'AI ayarlarÄ± kaydedildi âœ“ ('+aiModel+')':'API anahtarÄ± girilmedi');
}

// Extend openAdm to populate AI fields
const _origOpenAdm=openAdm;
openAdm=function(){
  _origOpenAdm();
  document.getElementById('asApiKey').value=aiApiKey;
  document.getElementById('asModel').value=aiModel;
  document.getElementById('asSysMsg').value=aiSysMsg;
  updateDeviceStatusUI();
};

// ===== INTERACTIVE SPACE BACKGROUND =====
(function initSpaceBg(){
  const c=document.getElementById('starField');if(!c)return;
  const ctx=c.getContext('2d');
  let stars=[];
  let planets=[];
  let mouse={x:-999,y:-999};

  const planetDefs=[
    {name:'Mars',baseX:.82,baseY:.22,r:28,colors:['#d45a2a','#a84420','#7a3018','#4a1808'],ring:false,speed:.003},
    {name:'Saturn',baseX:.15,baseY:.35,r:22,colors:['#c4a872','#9a7a5a','#6a5030','#3a2818'],ring:true,speed:.002},
    {name:'Neptune',baseX:.72,baseY:.75,r:16,colors:['#4a7aba','#2a5a9a','#1a3a6a','#0a1a3a'],ring:false,speed:.004},
    {name:'Jupiter',baseX:.35,baseY:.68,r:34,colors:['#c49a72','#a47a52','#7a5a3a','#4a3020'],ring:false,speed:.0015},
    {name:'Venus',baseX:.55,baseY:.15,r:14,colors:['#d4a040','#b48030','#8a6020','#5a3810'],ring:false,speed:.005},
  ];

  function resize(){
    c.width=window.innerWidth;c.height=window.innerHeight;
    initStars();
    planets=planetDefs.map(d=>({
      ...d,x:d.baseX*c.width,y:d.baseY*c.height,
      angle:Math.random()*Math.PI*2,spinSpeed:0,spinning:false,hover:false
    }));
  }

  function initStars(){
    stars=[];
    const count=Math.floor((c.width*c.height)/5000);
    for(let i=0;i<count;i++){
      stars.push({x:Math.random()*c.width,y:Math.random()*c.height,r:Math.random()*1.2+.2,a:Math.random(),s:Math.random()*.001+.0003,d:Math.random()>.5?1:-1});
    }
  }

  c.style.pointerEvents='auto';
  c.style.cursor='default';

  c.addEventListener('mousemove',e=>{
    const rect=c.getBoundingClientRect();
    mouse.x=e.clientX-rect.left;mouse.y=e.clientY-rect.top;
    let onPlanet=false;
    planets.forEach(p=>{
      const dist=Math.sqrt((mouse.x-p.x)**2+(mouse.y-p.y)**2);
      p.hover=dist<p.r*1.5;
      if(p.hover)onPlanet=true;
    });
    c.style.cursor=onPlanet?'pointer':'default';
  });

  c.addEventListener('click',e=>{
    const rect=c.getBoundingClientRect();
    const cx=e.clientX-rect.left,cy=e.clientY-rect.top;
    planets.forEach(p=>{
      const dist=Math.sqrt((cx-p.x)**2+(cy-p.y)**2);
      if(dist<p.r*1.5){
        p.spinning=true;
        p.spinSpeed=.15;
      }
    });
  });

  function drawPlanet(p){
    ctx.save();ctx.translate(p.x,p.y);ctx.rotate(p.angle);

    // Glow
    const glw=ctx.createRadialGradient(0,0,p.r*.5,0,0,p.r*2.5);
    glw.addColorStop(0,p.colors[0].replace(')',',0.06)').replace('#','')?p.colors[0]+'18':'rgba(200,100,40,0.06)');
    glw.addColorStop(1,'transparent');
    ctx.fillStyle=glw;
    ctx.beginPath();ctx.arc(0,0,p.r*2.5,0,Math.PI*2);ctx.fill();

    // Planet body
    const g=ctx.createRadialGradient(-p.r*.3,-p.r*.3,p.r*.1,0,0,p.r);
    g.addColorStop(0,p.colors[0]);g.addColorStop(.4,p.colors[1]);
    g.addColorStop(.8,p.colors[2]);g.addColorStop(1,p.colors[3]);
    ctx.beginPath();ctx.arc(0,0,p.r,0,Math.PI*2);ctx.fillStyle=g;ctx.fill();

    // Surface details
    for(let i=0;i<5;i++){
      const sx=(Math.sin(p.angle*3+i*1.2))*p.r*.5;
      const sy=(Math.cos(p.angle*2+i*1.7))*p.r*.4;
      const sr=p.r*.12+Math.sin(i)*p.r*.05;
      ctx.beginPath();ctx.arc(sx,sy,sr,0,Math.PI*2);
      ctx.fillStyle='rgba(0,0,0,0.12)';ctx.fill();
    }

    // Light reflection
    const lg=ctx.createRadialGradient(-p.r*.35,-p.r*.35,p.r*.05,-p.r*.2,-p.r*.2,p.r*.6);
    lg.addColorStop(0,'rgba(255,255,255,0.15)');lg.addColorStop(1,'transparent');
    ctx.beginPath();ctx.arc(0,0,p.r,0,Math.PI*2);ctx.fillStyle=lg;ctx.fill();

    // Ring
    if(p.ring){
      ctx.save();ctx.scale(1,.35);
      ctx.beginPath();ctx.arc(0,0,p.r*1.7,0,Math.PI*2);
      ctx.strokeStyle='rgba(200,180,150,0.2)';ctx.lineWidth=4;ctx.stroke();
      ctx.beginPath();ctx.arc(0,0,p.r*2,0,Math.PI*2);
      ctx.strokeStyle='rgba(200,180,150,0.1)';ctx.lineWidth=2;ctx.stroke();
      ctx.restore();
    }

    // Hover effect
    if(p.hover){
      ctx.beginPath();ctx.arc(0,0,p.r*1.4,0,Math.PI*2);
      ctx.strokeStyle='rgba(255,255,255,0.08)';ctx.lineWidth=1;ctx.stroke();
    }

    ctx.restore();

    // Spin physics
    if(p.spinning){
      p.angle+=p.spinSpeed;
      p.spinSpeed*=.985;
      if(p.spinSpeed<.001){p.spinning=false;p.spinSpeed=0}
    }else{
      p.angle+=p.speed;
    }
  }

  function draw(){
    ctx.clearRect(0,0,c.width,c.height);
    // Stars
    stars.forEach(s=>{
      s.a+=s.s*s.d;
      if(s.a>=1||s.a<=0)s.d*=-1;
      ctx.beginPath();ctx.arc(s.x,s.y,s.r,0,Math.PI*2);
      ctx.fillStyle=`rgba(220,215,210,${Math.max(0,s.a)})`;ctx.fill();
    });
    // Planets
    planets.forEach(drawPlanet);
    requestAnimationFrame(draw);
  }
  resize();window.addEventListener('resize',resize);draw();
})();

// ===== CHAT IMAGE â†’ FACE IN SUN =====
function handleChatImage(input){
  const file=input.files[0];if(!file)return;
  input.value='';
  const reader=new FileReader();
  reader.onload=function(e){
    const img=new Image();
    img.onload=function(){
      addMsg('ğŸ“· Resim yÃ¼klendi...','user');
      document.getElementById('chatTyping').style.display='block';
      document.getElementById('chatMsgs').scrollTop=99999;
      setTimeout(()=>{
        document.getElementById('chatTyping').style.display='none';
        generateSunFace(img);
        addMsg('YÃ¼zÃ¼nÃ¼ gÃ¼neÅŸin iÃ§ine koydum! â˜€ï¸ Evrende en parlak sen parlÄ±yorsun ğŸŒŸâœ¨','bot');
      },1200);
    };
    img.src=e.target.result;
  };
  reader.readAsDataURL(file);
}

function generateSunFace(faceImg){
  const canvas=document.createElement('canvas');
  canvas.width=320;canvas.height=320;
  const ctx=canvas.getContext('2d');

  // Deep space background
  const bg=ctx.createRadialGradient(160,160,80,160,160,220);
  bg.addColorStop(0,'#0a0820');bg.addColorStop(1,'#040410');
  ctx.fillStyle=bg;ctx.fillRect(0,0,320,320);

  // Stars
  for(let i=0;i<80;i++){
    ctx.beginPath();
    ctx.arc(Math.random()*320,Math.random()*320,Math.random()*1.2+.2,0,Math.PI*2);
    ctx.fillStyle=`rgba(255,255,240,${Math.random()*.6+.2})`;
    ctx.fill();
  }

  // Sun outer glow
  for(let i=4;i>=0;i--){
    const r=90+i*18;
    const g=ctx.createRadialGradient(160,160,50,160,160,r);
    g.addColorStop(0,`rgba(255,200,50,${.03+i*.01})`);
    g.addColorStop(.6,`rgba(255,140,20,${.02+i*.008})`);
    g.addColorStop(1,'transparent');
    ctx.fillStyle=g;
    ctx.fillRect(0,0,320,320);
  }

  // Sun corona rays
  ctx.save();ctx.translate(160,160);
  for(let i=0;i<24;i++){
    ctx.rotate(Math.PI*2/24);
    const rayLen=65+Math.random()*30;
    const gr=ctx.createLinearGradient(0,-55,0,-55-rayLen);
    gr.addColorStop(0,'rgba(255,180,40,0.3)');
    gr.addColorStop(1,'transparent');
    ctx.beginPath();ctx.moveTo(-3,-55);ctx.lineTo(0,-55-rayLen);ctx.lineTo(3,-55);ctx.closePath();
    ctx.fillStyle=gr;ctx.fill();
  }
  ctx.restore();

  // Sun body
  const sunG=ctx.createRadialGradient(148,148,10,160,160,56);
  sunG.addColorStop(0,'#fff8e0');sunG.addColorStop(.3,'#ffdd44');
  sunG.addColorStop(.7,'#ff9900');sunG.addColorStop(1,'#cc5500');
  ctx.beginPath();ctx.arc(160,160,56,0,Math.PI*2);
  ctx.fillStyle=sunG;ctx.fill();

  // Face image clipped into circle
  ctx.save();
  ctx.beginPath();ctx.arc(160,160,44,0,Math.PI*2);ctx.clip();
  // Calculate crop to center the face
  const iw=faceImg.width,ih=faceImg.height;
  const scale=Math.max(88/iw,88/ih);
  const sw=iw*scale,sh=ih*scale;
  ctx.drawImage(faceImg,160-sw/2,160-sh/2,sw,sh);
  ctx.restore();

  // Circle border around face
  ctx.beginPath();ctx.arc(160,160,44,0,Math.PI*2);
  ctx.strokeStyle='rgba(255,220,100,0.5)';ctx.lineWidth=2;ctx.stroke();

  // Inner glow on face
  const fg=ctx.createRadialGradient(160,160,30,160,160,46);
  fg.addColorStop(0,'transparent');fg.addColorStop(1,'rgba(255,180,40,0.2)');
  ctx.beginPath();ctx.arc(160,160,44,0,Math.PI*2);ctx.fillStyle=fg;ctx.fill();

  // Small planets
  // Mars
  const mg=ctx.createRadialGradient(268,78,2,272,82,12);
  mg.addColorStop(0,'#d45a2a');mg.addColorStop(1,'#6a2010');
  ctx.beginPath();ctx.arc(272,82,12,0,Math.PI*2);ctx.fillStyle=mg;ctx.fill();
  // Blue planet
  const bp=ctx.createRadialGradient(56,254,2,60,258,8);
  bp.addColorStop(0,'#5a8aca');bp.addColorStop(1,'#1a2a5a');
  ctx.beginPath();ctx.arc(60,258,8,0,Math.PI*2);ctx.fillStyle=bp;ctx.fill();

  // Label
  ctx.font='700 8px JetBrains Mono,monospace';
  ctx.fillStyle='rgba(255,255,255,0.2)';
  ctx.textAlign='right';
  ctx.fillText('CALEJON AI â˜€',312,312);

  // Add to chat
  const body=document.getElementById('chatBody');
  const div=document.createElement('div');
  div.className='chat-img';
  div.appendChild(canvas);
  const lbl=document.createElement('div');
  lbl.className='img-label';
  lbl.textContent='â˜€ gÃ¼neÅŸin iÃ§inde parlÄ±yorsun';
  div.appendChild(lbl);
  body.appendChild(div);
  document.getElementById('chatMsgs').scrollTop=99999;
}

// ===== LANGUAGE SYSTEM =====
let currentLang='tr';
const i18n={
  tr:{
    nav_home:'Ana Sayfa',nav_shop:'MaÄŸaza',nav_contact:'Ä°letiÅŸim',nav_account:'HesabÄ±m',
    hero_sub:'Headwear Collection â€” Est. 2025',hero_cta:'Koleksiyonu KeÅŸfet',
    sec_new:'Yeni Sezon',sec_premium:'Premium Headwear',
    blog_seo_label:'Haberler & Ä°lham',
    cart_title:'Sepet',cart_empty:'Sepetiniz boÅŸ',cart_total:'Toplam',cart_checkout:'SipariÅŸi Tamamla',
    add_cart:'Sepete Ekle',sold_out:'TÃ¼kendi',
    contact_h:'Ä°letiÅŸim',contact_p:'SorularÄ±nÄ±z iÃ§in bize ulaÅŸÄ±n. En kÄ±sa sÃ¼rede dÃ¶nÃ¼ÅŸ yapacaÄŸÄ±z.',
    contact_email_h:'E-posta',contact_social_h:'Sosyal Medya',contact_addr_h:'Adres',
    contact_name_ph:'AdÄ±nÄ±z',contact_email_ph:'E-posta adresiniz',contact_msg_ph:'MesajÄ±nÄ±z',contact_send:'GÃ¶nder',
    shop_h:'TÃ¼m ÃœrÃ¼nler',shop_sub:'Koleksiyon',
    ep_title:'CALEJON',ep_discount:'%10 Ä°NDÄ°RÄ°M',ep_sub:'Ä°lk SipariÅŸinize Ã–zel',
    ep_desc:'E-posta adresinizi bÄ±rakÄ±n, ilk sipariÅŸinizde geÃ§erli %10 indirim kodunuzu hemen alÄ±n!',
    ep_skip:'HayÄ±r, teÅŸekkÃ¼rler',
    ft_desc:'Premium headwear markasÄ±. Sokak kÃ¼ltÃ¼rÃ¼ ve bireysel tarzÄ±n kesiÅŸim noktasÄ±. Est. 2025.',
    ft_info:'Bilgi',ft_about:'HakkÄ±mÄ±zda',ft_contact:'Ä°letiÅŸim',ft_privacy:'Gizlilik',
    ft_comm:'Ä°letiÅŸim',
    about_h:'HakkÄ±mÄ±zda',about_p1:'Calejon, 2025 yÄ±lÄ±nda TÃ¼rkiye\'de kurulan bir premium headwear markasÄ±dÄ±r. Sokak kÃ¼ltÃ¼rÃ¼nÃ¼n enerjisini, minimalist tasarÄ±m anlayÄ±ÅŸÄ±yla birleÅŸtiriyoruz.',about_p2:'MarkamÄ±zÄ±n adÄ± "Calejon" â€” dar geÃ§it, sokak anlamÄ±na gelir. TÄ±pkÄ± dar sokaklardaki sanatsal ruh gibi, biz de her ÅŸapkada bir hikaye anlatÄ±yoruz.',about_mission:'Misyonumuz',about_mission_p:'Premium kalitede, Ã¶zgÃ¼n tasarÄ±mlÄ± ÅŸapkalar Ã¼reterek sokak modasÄ±nÄ± yeniden tanÄ±mlamak.',about_vision:'Vizyonumuz',about_vision_p:'TÃ¼rkiye\'den dÃ¼nyaya uzanan, kÃ¼resel streetwear sahnesinde tanÄ±nan bir headwear markasÄ± olmak.',
    kvkk_h:'KVKK AydÄ±nlatma Metni',privacy_h:'Gizlilik PolitikasÄ±',
    account_h:'HesabÄ±m',
    back:'â† Geri',
  },
  en:{
    nav_home:'Home',nav_shop:'Shop',nav_contact:'Contact',nav_account:'Account',
    hero_sub:'Headwear Collection â€” Est. 2025',hero_cta:'Explore Collection',
    sec_new:'New Season',sec_premium:'Premium Headwear',
    blog_seo_label:'News & Inspiration',
    cart_title:'Cart',cart_empty:'Your cart is empty',cart_total:'Total',cart_checkout:'Complete Order',
    add_cart:'Add to Cart',sold_out:'Sold Out',
    contact_h:'Contact',contact_p:'Get in touch with us. We\'ll get back to you as soon as possible.',
    contact_email_h:'Email',contact_social_h:'Social Media',contact_addr_h:'Address',
    contact_name_ph:'Your Name',contact_email_ph:'Your Email',contact_msg_ph:'Your Message',contact_send:'Send',
    shop_h:'All Products',shop_sub:'Collection',
    ep_title:'CALEJON',ep_discount:'10% OFF',ep_sub:'For Your First Order',
    ep_desc:'Leave your email and get your 10% discount code for your first order!',
    ep_skip:'No, thanks',
    ft_desc:'Premium headwear brand. Where street culture meets individual style. Est. 2025.',
    ft_info:'Info',ft_about:'About Us',ft_contact:'Contact',ft_privacy:'Privacy',
    ft_comm:'Contact',
    about_h:'About Us',about_p1:'Calejon is a premium headwear brand founded in Turkey in 2025. We combine the energy of street culture with a minimalist design approach.',about_p2:'Our brand name "Calejon" means a narrow alley, a street. Just like the artistic spirit found in narrow streets, we tell a story with every cap.',about_mission:'Our Mission',about_mission_p:'Redefining street fashion by producing premium quality, original designed caps.',about_vision:'Our Vision',about_vision_p:'To become a globally recognized headwear brand extending from Turkey to the world streetwear scene.',
    kvkk_h:'Data Protection Policy',privacy_h:'Privacy Policy',
    account_h:'My Account',
    back:'â† Back',
  }
};

function toggleLang(){
  currentLang=currentLang==='tr'?'en':'tr';
  document.getElementById('langBtn').textContent=currentLang.toUpperCase();
  document.getElementById('mobLangLink').textContent=currentLang==='tr'?'ğŸŒ English':'ğŸŒ TÃ¼rkÃ§e';
  applyLang();
  renderHome();renderShop();
}
function applyLang(){
  const t=i18n[currentLang];
  document.querySelectorAll('[data-i18n]').forEach(el=>{
    const key=el.getAttribute('data-i18n');
    if(t[key]){
      if(el.tagName==='INPUT'||el.tagName==='TEXTAREA')el.placeholder=t[key];
      else el.textContent=t[key];
    }
  });
  const ft=document.querySelector('.ft-brand p');if(ft)ft.textContent=t.ft_desc;
}

// ===== SEO BLOG TOGGLE =====
let seoBlogOpen=false;
function toggleSeoBlog(){
  seoBlogOpen=!seoBlogOpen;
  document.getElementById('seoBlogContent').style.display=seoBlogOpen?'block':'none';
  document.getElementById('seoBlogToggle').innerHTML=seoBlogOpen
    ?'â–² Blog â€” <span data-i18n="blog_seo_label">'+(currentLang==='tr'?'Haberler & Ä°lham':'News & Inspiration')+'</span>'
    :'â–¼ Blog â€” <span data-i18n="blog_seo_label">'+(currentLang==='tr'?'Haberler & Ä°lham':'News & Inspiration')+'</span>';
}

// ===== INIT =====
document.body.style.overflow='hidden'; // Lock scroll until password
document.getElementById('sl1').focus();
go('home');
// showEp() is called after successful unlock in slCheck()
</script>
</body>
</html>
